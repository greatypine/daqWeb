<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>221专题</title>
  <!-- Tell the browser to be responsive to screen width -->
  <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />
  <meta content="width=device-width, initial-scale=0.3, maximum-scale=1, user-scalable=yes" name="viewport">  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="plugins/gooey_menu/gooey.min.css">
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="bootstrap/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="bootstrap/css/ionicons.min.css">
  <!-- Morris charts -->
  <link rel="stylesheet" href="plugins/morris/morris.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
   <link rel="stylesheet"  href="dist/css/lightslider.css"/>
  <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker-bs3.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="plugins/select2/select2.min.css">
  <link href="../scripts/css/auto.css" rel="stylesheet">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="IE 9/html5shiv.min.js"></script>
  <script src="IE 9/respond.min.js"></script>
  <![endif]-->
  <style>
 .box-body img{width: 100%}
	.details{background-color: #ff7d73; padding: 10px 0 10px 0; color: #fff;}
    .details small{opacity: 0.6}
    .small-box .icon{top: 5px; font-size: 70px;}
    .small-box:hover .icon{font-size: 80px;}
    .detail_tomorrow{font-size: 16px; opacity: 0.8; margin-top: 10px;}
    .detail_tomorrow span{padding-left: 15px;}
    .detail_tomorrow i{padding-right: 5px;}
    .lightslider{line-height: 36px; margin-top: 20px;}
    .lightslider h4{color:#fdff64;font-size: 18px;}
    .lightslider .col-sm-6{color: #e7e7e7}
    .lightslider .col-sm-6 span{font-size: 24px; color: #fff; font-weight: bold;}
    .demo ul li{padding: 0 40px;}
    .demo{ background-color: rgba(90,114,147,1); border-radius: 10px; box-shadow: 0 5px 5px rgba(0,0,0,0.3); padding: 20px 0; position: relative; overflow: hidden;}
    .demo .yuan{position: absolute; background-color: #f97487; width: 80px; height: 80px; border-radius: 50px; right: -40px; top: -40px; padding: 45px 0 0 30px; transform: rotate(45deg);}
	.nav-tabs-custom,.nav-tabs-custom > .tab-content{background: transparent;}
    .nav-tabs-custom > .nav-tabs > li > a{ margin: 10px 0; font-size: 18px;}
    .nav-tabs-custom > .nav-tabs > li > a:hover{ margin: 10px 0;color: #f39c12;}
    .nav-tabs-custom > .nav-tabs > li.active > a,.nav-tabs-custom > .nav-tabs > li.active > a:hover{background: transparent; color: #f39c12; border-bottom: 2px solid #f39c12; font-weight: bold; cursor: pointer;}
    .nav-tabs-custom > .nav-tabs{margin: 0 auto; width: 450px;}

    .vertical-example{position: absolute; top: 70px; right: 30px; width: 100px;}
    .navimenu{min-height: 800px; padding-top: 0;}
    #gooey-v .open-button, #gooey-v .gooey-menu-item{margin-top: 0; margin-bottom: 15em;}
      #process_div{ 
		background-color:#292a2b; 
		display:inline; 
		z-index:100000;  
		left:0px; 
		opacity:0.3; top:0; left:0;height:100%; width:100%; z-index:999; position:fixed; _position:absolute; _left: expression_r(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); _top: expression_r(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight);
		filter:Alpha(Opacity=30); 
		opacity: 0.3; 
	} 
	
	#process_div_pic{
		position:fixed;
		top:50%;
		left:50%; 
		z-index:100000000; 
		margin:-16px 0 0 -50px; 
		width:100px; 
		height:32px;
		color: #fff;
	}
    
  </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">
<header class="main-header">
    <nav class="navbar navbar-static-top">
      <div class="container">
			<div class="logo_img pull-left">
				<img src="dist/img/logo.png" height="30">
				<img src="dist/img/title.png" height="20">
			</div>
			<div class="pull-left">
				<div class="logo-lg">
					<ul class="no-margin">
						<li class="current"><em>221专题</em></li>
					</ul>
				</div>
			</div>
      </div>
    </nav>
  </header>
  
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <div class="container">
      <!-- Main content -->
      
      <div class="nav-tabs-custom">
       <ul class="nav nav-tabs">
         <li><a href="javascript:void(0);" onclick="toIndex()" data-toggle="tab">221合计</a></li>
         <li style="padding-top: 20px; color: rgba(0,0,0,0.3)">\</li>
         <li><a href="javascript:void(0);" onclick="toBussiness()">221分业务</a></li>
         <li style="padding-top: 20px; color: rgba(0,0,0,0.3)">\</li>
         <li class="active"><a href="javascript:void(0);" data-toggle="tab">221单店</a></li>
       </ul>
      
      <section class="content-header">
        <div class="box box-default details">
          <div class="box-body">
          	<div class="col-sm-6">
              <h5 style="color: #7c4139;">96店昨日完成情况</h5>
              <div class="pull-left col-sm-6">
                <div class="small-box bg-aqua-active">
                  <div class="inner">
                    <h3><sup style="font-size: 20px" id="yestodayTotalGmv">载入中...</sup></h3>
                    <p>总计GMV</p>
                  </div>
                  <div class="icon">
                    <i class="fa fa-cny"></i>
                  </div>
                  <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                </div>
              </div>
              <div class="pull-left col-sm-6">
                <div class="small-box bg-teal-active">
                  <div class="inner">
                    <h3><sup style="font-size: 20px" id="yestodayAvgGmv">载入中...</sup></h3>
                    <p>店均GMV</p>
                  </div>
                  <div class="icon">
                    <i class="fa fa-database"></i>
                  </div>
                  <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
                </div>
              </div>
              <div class="col-sm-6 detail_tomorrow"><i class="fa fa-credit-card"></i>累计GMV<span id="totalGmv">载入中...</span></div>
              <div class="col-sm-6 detail_tomorrow"><i class="fa fa-users"></i>累计社员<span id="memberNum">载入中...</span></div>
            </div>
            <div class="col-sm-6">
	       		<input id="store_id_manual" name="store_id_manual" type="hidden" bidTableFlag="true" value=""/>
	            <input type="text" class="form-control"  placeholder="全部门店" id="store_name_manual" />
	            <div class="auto hidden" id="auto" style="width: 94%;z-index: 99999;">
	            </div>
	          </div>
            <div class="col-sm-6 lightslider">
              <div class="demo">
                <div class="item">
                  <div class="clearfix" style="max-width:474px;">
                    <ul id="image-gallery" class="gallery list-unstyled cS-hidden">
                    	<li data-thumb="img/thumb/cS-1.jpg">
                          <h4>门店名称&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pull-center">店长：XXXX</span></h4>
                          <div class="col-sm-12">
                          	<div class="col-sm-6 no-padding">昨日GMV：</br><span><small>￥</small>0</span></div>
                            <div class="col-sm-6 no-padding">商品类GMV：</br><span><small>￥</small>0</span></div>
                            <div class="col-sm-6 no-padding">商品类GMV：</br><span><small>￥</small>0</span></div>
                            <div class="col-sm-6 no-padding">商品类GMV：</br><span><small>￥</small>0</span></div>
                          </div>
                          <div class="col-sm-6" style="margin-top: 20px;">社员新增：<span><small>￥</small>0人</span></div>
                        </li>
                    </ul>
                  </div>
                </div>
                <div class="yuan">hot</div>
              </div>
            </div>
          </div>
        </div>
        <div class="box box-default">
          <div class="box-body">
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-red">221单店【GMV】昨日完成情况前十</h4>
              <table class="table table-bordered">
                <tbody id="gmv_store_up_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-light-blue">221单店【GMV】昨日完成情况后十</h4>
              <table class="table table-bordered">
                <tbody id="gmv_store_down_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="box box-default">
          <div class="box-body">
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-red">221单店【商品类】昨日完成情况前十</h4>
              <table class="table table-bordered">
                <tbody id="product_store_up_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-light-blue">221单店【商品类】昨日完成情况后十</h4>
              <table class="table table-bordered">
                <tbody id="product_store_down_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="box box-default">
          <div class="box-body">
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-red">221单店【服务类】昨日完成情况前十</h4>
              <table class="table table-bordered">
                <tbody id="service_store_up_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-light-blue">221单店【服务类】昨日完成情况后十</h4>
              <table class="table table-bordered">
                <tbody id="service_store_down_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="box box-default">
          <div class="box-body">
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-red">221单店【团购】昨日完成情况前十</h4>
              <table class="table table-bordered">
                <tbody id="groupon_store_up_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-light-blue">221单店【团购】昨日完成情况后十</h4>
              <table class="table table-bordered">
                <tbody id="groupon_store_down_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>GMV</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
       <div class="box box-default">
          <div class="box-body">
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-red">221单店【社员】昨日完成情况前十</h4>
              <table class="table table-bordered">
                <tbody id="member_store_up_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>社员数</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
            <div class="col-sm-6" style="height: 460px;">
              <h4 class="text-light-blue">221单店【社员】昨日完成情况后十</h4>
              <table class="table table-bordered">
                <tbody id="member_store_down_data">
	                <tr>
	                  <th>门店名称</th>
	                  <th>社员数</th>
	                  <th>排名</th>
	                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
      </div>
    </div>
  </div>
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.0 -->
<script src="plugins/jQuery/jQuery-2.2.0.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<script src="dist/js/nav-scroll.js"></script>
<script src="dist/js/lightslider.js"></script>
<!-- Select2 -->
<script src="plugins/select2/select2.full.min.js"></script>
<!-- iCheck 1.0.1 -->
<script src="plugins/iCheck/icheck.min.js"></script>
<!-- page script -->
<script type="text/javascript" src="plugins/jquery.page.js"></script>
<script type="text/javascript" src="plugins/moment.min.js"></script>
<script type="text/javascript" src="plugins/daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="../scripts/bidLibjsjquery3.0.js"></script>
<script type="text/javascript" src="../scripts/auto.js"></script>
<script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>
<script src="bootstrap/js/raphael-min.js"></script>
<script src="plugins/morris/morris.min.js"></script>
<script src="plugins/gooey_menu/gooey.min.js"></script>
<script type ="text/javascript">

	$(document).ready(function() {
// 	    $("#content-slider").lightSlider({
// 	      loop:true,
// 	      keyPress:true
// 	    });
	    $('#image-gallery').lightSlider({
	      gallery:true,
	      item:1,
	      thumbItem:9,
	      slideMargin: 0,
	      speed:500,
	      auto:false,
	      loop:true,
	      onSliderLoad: function() {
	        $('#image-gallery').removeClass('cS-hidden');
	      }
	    });
	  });

  Date.prototype.format = function() {  
    var s = '';  
    var mouth = (this.getMonth() + 1)>=10?(this.getMonth() + 1):('0'+(this.getMonth() + 1));  
    var day = this.getDate()>=10?this.getDate():('0'+this.getDate());  
    s += this.getFullYear() + '-'; // 获取年份。  
    s += mouth + "-"; // 获取月份。  
    s += day; // 获取日。  
    return (s); // 返回日期。  
  };
  
</script>
<!-- 引入 ECharts 文件 -->
<script src="dist/js/echarts.common.min.js"></script>  
<script>

	$(function(){
		initallstore();
		inintTotalGmvData();
		inintYestodayGmvData();
		initStoreCompleteInfo();
		inintMemberData();
		//单店GMV排名
		showYestodayGmvRanking();
		//单店商品类GMV排名
		showYestodayProductRanking();
		//单店服务类GMV排名
		showYestodayServiceRanking();
		//单店团购GMV排名
		showYestodayGrouponRanking();
		//单店社员排名
		showYestodayMemberRanking();
		
		var autoComplete = new AutoComplete("store_name_manual","auto",array);
	  	document.getElementById("store_name_manual").onkeyup = function(event){
	  		autoComplete.start(event);
	  		if($("#store_name_manual").val().trim() == ""){
				$("#store_id_manual").val("");
			}
	  		for(var key in storeJson){
	  			if(document.getElementById("store_name_manual").value==key){
	  				document.getElementById("store_id_manual").value=storeJson[key];
	  			}
	  		}
	  	}
	  	$("#auto").on("click",function(event){
			for(var key in storeJson){
				if(document.getElementById("store_name_manual").value==key){
					document.getElementById("store_id_manual").value=storeJson[key];
				}
			}
			var storeNo = $("#store_id_manual").val(); 
			initStoreCompleteInfo(storeNo);
		});
		
	});
    
	
	var totalGMV = '0';
	var start_time = '2018-07-01';
	var cur_date = new Date();
	cur_date.setTime(cur_date.getTime()+24*60*60*1000);
	var end_month = cur_date.getMonth()+1;
	var end_date = cur_date.getDate();
	var end_time = cur_date.getFullYear()+"-" + (end_month < 10 ? '0' + end_month : '' + end_month) + "-" + (end_date < 10 ? '0' + end_date : '' + end_date);
	
	cur_date.setTime(cur_date.getTime()-2*24*60*60*1000);
	var yestoday_month = cur_date.getMonth()+1;
	var yestoday_date = cur_date.getDate();
	var yestoday_time = cur_date.getFullYear()+"-" + (yestoday_month < 10 ? '0' + yestoday_month : '' + yestoday_month) + "-" + (yestoday_date < 10 ? '0' + yestoday_date : '' + yestoday_date);
	
	var newMemberNum = '0';
	var totalMembernum = '0';
	function inintMemberData(){
		  doManager("strategyActivityManager","queryNewMember",[null,start_time,end_time],
				function(datax,textStatus,XmlHttpRequest){
					if (datax.result) {
						var jsonData = $.fromJSON(datax.data);
						if(Object.keys(jsonData).length!=0){
							newMemberNum = jsonData.membernum;
							$("#memberNum").html(parseFloat(newMemberNum).toLocaleString()+"人");
						}else{
							$("#memberNum").html('0');
						}
					}
			});
	}
	
	var yyGMV = '0';
	var yy_dept_id = "1";//优易+老年之家（养老餐）
	var jwsGMV = '0';
	var jws_dept_id = "2";//家务事
	var grouponGMV = '0';
	var groupon_dept_id = "3";
	function inintTotalGmvData(){
		  doManager("strategyActivityManager","queryStrategyGMV",[start_time,end_time],
				function(datax,textStatus,XmlHttpRequest){
					if (datax.result) {
						var jsonData = $.fromJSON(datax.data);
						if(Object.keys(jsonData).length!=0){
							yyGMV = jsonData.pro_total_gmv;
							$("#yyGmv").html(changeMoney(parseInt(yyGMV)));
							jwsGMV = jsonData.ser_total_gmv;
							$("#jwsGmv").html(changeMoney(parseInt(jwsGMV)));
							grouponGMV = jsonData.gro_total_gmv;
							$("#grouponGmv").html(changeMoney(parseInt(grouponGMV)));
						}
					}
			},false);
		  $("#totalGmv").html(changeMoney(parseInt(yyGMV)+parseInt(jwsGMV)+parseInt(grouponGMV)));
		  $("#avgGmv").html(changeMoney(((parseInt(yyGMV)+parseInt(jwsGMV)+parseInt(grouponGMV))/96).toFixed(2)));
	}
	
	var yestoday_yyGMV = '0';
	function inintYestodayGmvData(){
		  doManager("strategyActivityManager","queryStrategyGMV",[yestoday_time,yestoday_time],
				function(datax,textStatus,XmlHttpRequest){
					if (datax.result) {
						var jsonData = $.fromJSON(datax.data);
						if(Object.keys(jsonData).length!=0){
							yestoday_yyGMV = jsonData.pro_total_gmv;
							yestoday_jwsGMV = jsonData.ser_total_gmv;
							yestoday_grouponGMV = jsonData.gro_total_gmv;
						}
					}
			},false);
		  $("#yestodayTotalGmv").html(changeMoney(parseInt(yestoday_yyGMV)+parseInt(yestoday_jwsGMV)+parseInt(yestoday_grouponGMV)));
		  $("#yestodayAvgGmv").html(changeMoney(((parseInt(yestoday_yyGMV)+parseInt(yestoday_jwsGMV)+parseInt(yestoday_grouponGMV))/96).toFixed(2)));
		  
	}
	
	function initStoreCompleteInfo(store_no){
		  doManager("strategyActivityManager","queryStoreCompleteInfo",[store_no],
			function(datax,textStatus,XmlHttpRequest){
				if (datax.result) {
					var jsonData = $.fromJSON(datax.data);
					if(jsonData!=null&&jsonData.length>0){
						$("#image-gallery").find("li").remove(); 
						var infoStr="";
						for(var i=0;i<jsonData.length;i++){
							infoStr=infoStr+ '<li data-thumb="img/thumb/cS-1.jpg">';
							infoStr=infoStr+'<h5>'+jsonData[i].store_name+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pull-center">店长：'+jsonData[i].store_user+'</span></h5>';
							infoStr=infoStr+'<div class="col-sm-12">';
							infoStr=infoStr+'<div class="col-sm-6 no-padding">昨日GMV：</br><span>￥'+(jsonData[i].pro_total_gmv+jsonData[i].ser_total_gmv+jsonData[i].gro_total_gmv).toFixed(2)+'</span></div>';
							infoStr=infoStr+'<div class="col-sm-6 no-padding">商品类GMV：</br><span>￥'+jsonData[i].pro_total_gmv+'</span></div>';
							infoStr=infoStr+'<div class="col-sm-6 no-padding">服务类GMV：</br><span>￥'+jsonData[i].ser_total_gmv+'</span></div>';
							infoStr=infoStr+'<div class="col-sm-6 no-padding">团购GMV：</br><span>￥'+jsonData[i].gro_total_gmv+'</span></div>';
							infoStr=infoStr+'</div>';
							infoStr=infoStr+'<div class="col-sm-6">社员新增：<span>'+jsonData[i].member_num+'人</span></div>';
		                    infoStr=infoStr+'</li>';
						}
						$("#image-gallery").append(infoStr); 
					}else{
		        		crm_alert(5,"系统查无此条件的数据");
		        		return;
					}
				}
		},false);
	}
	
	function showYestodayGmvRanking(){
		var yyStr="";
		doManager("strategyActivityManager","queryYestodayGmvRanking",[null,'DESC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							yyStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	 yyStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   yyStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   yyStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   yyStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   yyStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   yyStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   yyStr += "</tr>";
			                   $("#gmv_store_up_data").append(yyStr); 
	                 	}
					}else{
						yyStr = "<tr>没有符合条件的数据</tr>";
						$("#gmv_store_up_data").append(yyStr); 
					}
				}
		});
		
	   var jwsStr="";
	   doManager("strategyActivityManager","queryYestodayGmvRanking",[null,'ASC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							jwsStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	   jwsStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   jwsStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   jwsStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   jwsStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   jwsStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   jwsStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   jwsStr += "</tr>";
			                   $("#gmv_store_down_data").append(jwsStr); 
	                 	}
					}else{
						jwsStr = "<tr>没有符合条件的数据</tr>";
						$("#gmv_store_down_data").append(jwsStr); 
					}
				}
		});
	}
	
	function showYestodayProductRanking(){
		var yyStr="";
		doManager("strategyActivityManager","queryYestodayGmvRanking",['1','DESC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							yyStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	 yyStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   yyStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   yyStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   yyStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   yyStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   yyStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   yyStr += "</tr>";
			                   $("#product_store_up_data").append(yyStr); 
	                 	}
					}else{
						yyStr = "<tr>没有符合条件的数据</tr>";
						$("#product_store_up_data").append(yyStr); 
					}
				}
		});
		
	   var jwsStr="";
	   doManager("strategyActivityManager","queryYestodayGmvRanking",['1','ASC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							jwsStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	   jwsStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   jwsStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   jwsStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   jwsStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   jwsStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   jwsStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   jwsStr += "</tr>";
			                   $("#product_store_down_data").append(jwsStr); 
	                 	}
					}else{
						jwsStr = "<tr>没有符合条件的数据</tr>";
						$("#product_store_down_data").append(jwsStr); 
					}
				}
		});
	}
	
	function showYestodayServiceRanking(){
		var yyStr="";
		doManager("strategyActivityManager","queryYestodayGmvRanking",['2','DESC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							yyStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	 yyStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   yyStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   yyStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   yyStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   yyStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   yyStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   yyStr += "</tr>";
			                   $("#service_store_up_data").append(yyStr); 
	                 	}
					}else{
						yyStr = "<tr>没有符合条件的数据</tr>";
						$("#service_store_up_data").append(yyStr); 
					}
				}
		});
		
	   var jwsStr="";
	   doManager("strategyActivityManager","queryYestodayGmvRanking",['2','ASC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							jwsStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	   jwsStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   jwsStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   jwsStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   jwsStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   jwsStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   jwsStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   jwsStr += "</tr>";
			                   $("#service_store_down_data").append(jwsStr); 
	                 	}
					}else{
						jwsStr = "<tr>没有符合条件的数据</tr>";
						$("#service_store_down_data").append(jwsStr); 
					}
				}
		});
	}
	
	function showYestodayGrouponRanking(){
		var yyStr="";
		doManager("strategyActivityManager","queryYestodayGmvRanking",['3','DESC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							yyStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	 yyStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   yyStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   yyStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   yyStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   yyStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   yyStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   yyStr += "</tr>";
			                   $("#groupon_store_up_data").append(yyStr); 
	                 	}
					}else{
						yyStr = "<tr>没有符合条件的数据</tr>";
						$("#groupon_store_up_data").append(yyStr); 
					}
				}
		});
		
	   var jwsStr="";
	   doManager("strategyActivityManager","queryYestodayGmvRanking",['3','ASC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							jwsStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].ordergmv+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	   jwsStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   jwsStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   jwsStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   jwsStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   jwsStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   jwsStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   jwsStr += "</tr>";
			                   $("#groupon_store_down_data").append(jwsStr); 
	                 	}
					}else{
						jwsStr = "<tr>没有符合条件的数据</tr>";
						$("#groupon_store_down_data").append(jwsStr); 
					}
				}
		});
	}
	
	function showYestodayMemberRanking(){
		var yyStr="";
		doManager("strategyActivityManager","queryYestodayMemberRanking",['DESC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							yyStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].membernum+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	 yyStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   yyStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   yyStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   yyStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   yyStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   yyStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   yyStr += "</tr>";
			                   $("#member_store_up_data").append(yyStr); 
	                 	}
					}else{
						yyStr = "<tr>没有符合条件的数据</tr>";
						$("#member_store_up_data").append(yyStr); 
					}
				}
		});
		
	   var jwsStr="";
	   doManager("strategyActivityManager","queryYestodayMemberRanking",['ASC'],
			function(data,textStatus,XmlHttpRequest){
				if (data.result) {
					var jsonData = $.fromJSON(data.data);
					if(jsonData.length!=0){
						for(var i=0;i<jsonData.length;i++){
							jwsStr= "<tr>"
			                   +"<td>"+jsonData[i].store_name+"</td>"
			                   +"<td>"+jsonData[i].membernum+"</td>";
			                   
			                   switch(i)
			                   {
				                   case 0:
				                	   jwsStr += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
				                     break;
				                   case 1:
				                	   jwsStr += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
				                     break;
				                   case 2:
				                	   jwsStr += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
				                     break;
				                   case 3:
				                	   jwsStr += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
				                     break;
				                   case 4:
				                	   jwsStr += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
				                     break;
				                   default:
				                	   jwsStr += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
			                   }
			                   jwsStr += "</tr>";
			                   $("#member_store_down_data").append(jwsStr); 
	                 	}
					}else{
						jwsStr = "<tr>没有符合条件的数据</tr>";
						$("#member_store_down_data").append(jwsStr); 
					}
				}
		});
	}

	var array=new Array();
 	//初始化所有门店 
 	function initallstore() {
 		doManager("strategyActivityManager","queryActivityScope", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array.push(jsonData[i].store_name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].store_name+"'"+":"+"'"+jsonData[i].store_no+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].store_name+"'"+":"+"'"+jsonData[i].store_no+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].store_name+"'"+":"+"'"+jsonData[i].store_no+"'"+",";
 						}
 					}
 					storeJson=$.fromJSON(storeString);
 					var autoComplete = new AutoComplete("store_name_manual","auto",array);
					document.getElementById("store_name_manual").onkeyup = function(event){
						autoComplete.start(event);
						if($("#store_name_manual").val().trim() == ""){
							$("#store_id_manual").val("");
						}
						document.getElementById("store_name_manual").value=document.getElementById("store_name_manual").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}

 	function toIndex(){
 		window.location.href="221.html";
 	}
 	
 	function toBussiness(){
 		window.location.href="221_bussiness.html";
 	}
 	
  Date.prototype.toLocaleString = function() {
      return this.getFullYear() + "-" + (this.getMonth() + 1) + "-" + this.getDate();
  }; 
  
  function changeMoney (x) {
	    x=x/10000;
	    var y = '';
	    if(parseInt(x)/10000<=1){
	    	y=ForDight(x,2)+"万";
	    }else if(parseInt(x)/10000>1){
	    	x=x/10000+'';
	    	y=ForDight(x,2)+"亿";
	    }
	    return y;
  }
  function ForDight(str,How){  
    Dight = Math.round(str*Math.pow(10,How))/Math.pow(10,How);  
    return Dight;  
  }
</script>
</body>
</html>