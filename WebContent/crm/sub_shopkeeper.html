<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>总部首页</title>
  <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=0.3, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="bootstrap/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="bootstrap/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
  <link rel="stylesheet" href="dist/css/tTurnover-head-scoll.css">
  <!--map style-->
  <link rel="stylesheet" href="dist/css/map-style.css">
   <!-- gooey-menu -->
  <link rel="stylesheet" href="plugins/gooey_menu/gooey.min.css">
  <link rel="stylesheet" href="dist/css/onoffset.css">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="IE 9/html5shiv.min.js"></script>
  <script src="IE 9/respond.min.js"></script>
  <![endif]-->
  <style>
    
    .dl-horizontal dt{width: 100px;}
    .dl-horizontal dd{margin-left: 120px;}
    .box{width: 100%;margin-bottom:0; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.6); cursor: pointer; background: none; color: #fff; height:140px; overflow: hidden; position: absolute; z-index: 100}
    .box-header{color: #fff;}
    .box:hover{box-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);}
    .info_head .box:hover{height: auto; background-color: #11214e;}
    .navbar-custom-menu{margin-right: 20px;}
	.logo-lg img:nth-child(1){width: auto; height: 30px;}
	.logo-lg img:nth-child(2){width: auto; height: 20px; margin-top: 5px;}
    .logo-lg > ul > li:hover > a{color: #001f3f; font-weight: bold;}
    .logo-lg > ul > li:hover i{ transform: rotate(180deg); transition: all 0.3s linear; color: #001f3f;}

    #main10 div,#city_name{display: none;}
    .crumbs a{padding: 5px 10px; background-color: #3c8dbc; color: #fff; margin-right: 10px; border-radius: 5px;}
    .control-sidebar-bg{width: 100%; min-height: 100vh; background-color: rgba(0,0,0,0.5); background-size: cover; padding: 0; margin: 0; top: 0; left: 0; z-index: 2000; display: none;}
	#mapContainer {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
     } 
     
    #process_div{ 
		background-color:#292a2b; 
		display:inline; 
		z-index:100000;  
		left:0px; 
		opacity:0.3; top:0; left:0;height:100%; width:100%; z-index:999; position:fixed; _position:absolute; _left: expression_r(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); _top: expression_r(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight);
		filter:Alpha(Opacity=30); 
		opacity: 0.3; 
	} 
	
	#process_div_pic{
		position:fixed;
		top:50%;
		left:50%; 
		z-index:100000000; 
		margin:-16px 0 0 -50px; 
		width:100px; 
		height:32px;
		color: #fff;
	}
	
	 /*全屏样式*/
    #mask{width:100%; height:100%; position:fixed; top:0; left:0; display: none; z-index:9999999; background-color: rgba(0,0,0,0.7);}
    #mask-body{ position: absolute; top: 50px; left: 50px; height: 600px; opacity: 1; z-index: 99; }
    #mask-header{ position: absolute; top: 50px; left: 0px; height: 50px; opacity: 1; z-index: 999; }
    #mask-header>button{ padding: 3px 5px; position: absolute; left: 15px; top: -45px; cursor: pointer; }
    
	
	 /*黑色背景*/
    body{background: url("dist/img/home-bg.jpg") no-repeat center;background-size: cover;}
    .content-wrapper,.skin-blue .wrapper{background: none;}
    .skin-blue .main-header .navbar{background-color: #11214e;}
    .nav_dropdown{background-color: #11214e;}
    .nav_dropm,.nav_mark_bg{background-color: #0f1937;}
    .nav-mark > a,.nav-mark > i,.sidebar_active > a,.sidebar_active > a >i{color: #46a3ff!important;}
    .skin-blue .main-header li.user-header{background-color: #11214e;}

    /*翻页效果*/
    .dataStatistics{cursor: pointer; color: #fff; font-family: futura_mdcn_btmedium; text-align: center; font-size: 70px;}
    .digit_set{float: none!important; border: 1px solid #078dff; border-radius: 4px; perspective: 200px; height: 90px!important; margin: 0 -5px!important; display: inline-block; width: 57px!important;}
    .dataStatistics .digit > div.digit_top, .dataStatistics .digit > div.shadow_top{background-color: #11214e; border-radius: 4px;}
    .dataStatistics .digit > div.digit_bottom, .dataStatistics .digit > div.shadow_bottom{background-color: #11214e; border-radius: 4px; text-align: center;}
    .dataStatistics:hover .digit_set{box-shadow: 0 0 16px 2px #186ff0}
    .dataStatistics .digit > div.digit_bottom .digit_wrap, .dataStatistics .digit > div.shadow_bottom .digit_wrap{margin-top: -80%;}
   /*逗号*/
    .douhao{ display: inline-block;width: 16px; height: 21px; background: url("dist/img/douhao.png") no-repeat;margin-left: 12px;}
    
    .menu{position: absolute; bottom: 10px;  right: 6px;min-width:150px; background-color: #fff;border-radius:4px}
	.legend{font-size: 14px; padding: 15px 0 0 15px;}
	.menu_list{ width: 150px; padding-top: 0px; box-shadow: 1px 2px 1px rgba(0,0,0,.15);-webkit-transition: all .3s ease-in-out;-o-transition: all .3s ease-in-out;transition: all .3s ease-in-out;}

	.menu_list li{
/* 	line-height: 22px;  */
	font-size: 6px; 
	padding-right:0;
/* 	padding-bottom: 10px; */
	}
	.menu_list li:nth-last-child(1){border: none;}
	/*.menu_list li span{color: #0a67f2; font-weight: bold; font-size: 16px; padding-right: 5px;}*/
	.menu_list li p:nth-child(1){padding-bottom: 2px; color: #333;}
	p{margin: 0;}
	.menu_list li a{color: #999; display: inline-block; width: 100%; text-decoration: none; padding-top: 5px;}

	.no-padding{padding: 0;}
	.menu_list .col-sm-3{ height: 10px; margin: 5px 0 0 0; background-color: #00a7d0;}
	.menu_list .col-sm-9 b{padding-left: 10px;}
	
	.menu_list::-webkit-scrollbar{width: 8px; background-color: #fff;}
    .menu_list::-webkit-scrollbar-thumb{background-color: #adadad; border-radius: 5px;}
    .menu_list::-webkit-scrollbar-track{background-color: #fff;}
    
     
  </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div id="process_div" ></div>
<div id="process_div_pic" ><img style="width:50px;height: 50px;" src="dist/img/376884043677306248.png"><i class="fa fa-refresh fa-spin"></i></div>

<!-- Site wrapper -->
<div class="wrapper">
  <div id="mask" style="width: 100%;height:100%;z-index:120px">
    <div id="mask-header"><button class="btn btn-primary">退出</button></div>
    <div id="mask-body"></div>

  </div>
  <header class="main-header">
    <!-- Logo -->

    <!-- Header Navbar: style can be found in header.less -->
     <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      

        <div class="pull-left">
 		<section class="sidebar logo-lg clearfix no-padding">
            <!-- sidebar menu: : style can be found in sidebar.less -->
            <ul class="sidebar-menu">
              <li><a href="javascript:goCountry();" class="h2"> <img src="dist/img/logo1.png"> <img src="dist/img/title.png"></a></li>
              <li class="nav-mark" style="padding: 0 20px 0 40px;"><a href="javascript:goCountry();">总部首页</a> </li>
		    </ul> 
          </section>
           
        </div>

      
    </nav>
  </header>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper" >
    <!-- Main content -->
    <section class="content-header clearfix">
      <div class="info_head with-border col-lg-3 col-sm-3 col-xs-12">
        <div class="box no-border">
          <div class="box-header h4 text-yellow"><strong id="store_name_left_top">--</strong></div>
          <div class="box-body no-padding" id="mdxx">
            <dl class="dl-horizontal">
                  <dt >店长信息</dt>
                  <dd id="dz_name"><span id="dz_phone"></span></dd>
                  <dt >副店长信息</dt>
                  <dd id="fdz_name"></dd>
                  <dt>事务管理</dt>
                  <dd id="zhgl_num"></dd>
                  <dt>服务专员</dt>
                  <dd id="fwzy_num"></dd>
                  <dt>国安侠</dt>
                  <dd id="gax_num"></dd>
                  <dt>门店编号</dt>
                  <dd id="store_no"></dd>
                  <dt>门店地址</dt>
                  <dd id="address_text"></dd>
            </dl>
          </div>
        </div>
      </div>
      <!--实时数据-->
      <div class="text-muted col-lg-6 col-sm-6 col-xs-12">
        <h3 class="text-center">当日累计营业额(元)</h3>
        <div class="dataStatistics">
         <div class="data_new">
          <div class="digit_set"></div>
          <div class="digit_set"></div>
          <div class="digit_set"></div>
           <div class="douhao" id="dou1"></div>
          <div class="digit_set"></div>
          <div class="digit_set"></div>
          <div class="digit_set"></div>
           <div class="douhao" id="dou2"></div>
          <div class="digit_set"></div>
          <div class="digit_set"></div>
          <div class="digit_set set_last"></div>
          
          </div>
        </div>
        <div align="right" style="margin-top: 10px;margin-right: 0px;">动态滚动<input id="onoffset" class="mui-switch mui-switch-anim" type="checkbox" style="zoom:50%;vertical-align:-5px;" /><select style="width: 100px;color: black;background-color: #D3D3D3;width:60px;height:20px;" id="setTime"><option value="5">5分</option><option value="30">30分</option><option value="60">1小时</option><option value="240">4小时</option><option value="525600">一年</option></select></div>
      </div>
      <!--历史数据-->
      <div class="info_bottom col-lg-3 col-sm-3 col-xs-12" style="z-index:90;">
			<nav id="data_card">
				  <input type="checkbox" class="menu-open" name="menu-open1" id="menu-open1"/>
				  <label class="open-button" for="menu-open1">
				    <span class="burger burger-1"></span>
				    <span class="burger burger-2"></span>
				    <span class="burger burger-3"></span>
				  </label>
				 <a href="javascript:goToNewaddcus()" id="a_newaddcus" class="gooey-menu-item" style="line-height:24px"><p id="n_newaddcus">付费用户</p><p style="display:none" id="v_newaddcus">--</p></a>
				  <a href="javascript:goToRebuycus()" id="a_rebuycus" class="gooey-menu-item" style="line-height:24px"><p id="n_rebuycus">复购客户</p><p style="display:none" id="v_rebuycus">--</p></a>
				  <a href="javascript:goToStoretrade()" id="a_storetrade" class="gooey-menu-item" style="line-height:24px"><p id="n_storetrade">营业额</p><p style="display:none" id="v_storetrade">--</p></a>
				  <a href="javascript:goToSendorders()" id="a_sendorders" class="gooey-menu-item" style="line-height:24px"><p id="n_sendorders">订单量</p><p style="display:none" id="v_sendorders">--</p></a>
				  <a href="javascript:goToRewardtimes()" id="a_rewardtimes" class="gooey-menu-item" style="line-height:24px"><p id="n_rewardtimes">好评次数</p><p style="display:none" id="v_rewardtimes">--</p></a>
			 
			 </nav>
      </div>
    </section>

    <section class="content-header clearfix" style="position:relative;padding:50px 15px 0 15px">
      <div class="col-sm-4">
        <div id="main1" style="width: 100%;height:400px;"></div>
      </div>
      <div class="col-sm-4 no-padding">
        <div class="crumbs"><a href="javascript:goCountry()">全国</a><span style="color:#f6f6f6">&nbsp;>&nbsp;</span><a href="javascript:gopro()" id="pro_country">--</a><span style="color:#f6f6f6">&nbsp;>&nbsp;</span><a href="javascript:void()" style="cursor:default" id="pro_country_store">--</a> 
          <span class="pull-right" onclick="fullscreen()" style="z-index:200px"><img src="dist/img/fullscreen.png"> </span>
          <input id="fscreen" hidden="hidden">
        </div>
        
         <div class="box-body" style="position:relative;top:22px;height:350px;" id="mapHeight">
          <div id="mapContainer" style="background-color:rgba(0,0,0,0.5);border-radius:20px;z-index:120"></div>
          <div class="menu" id="TULI" style="display:none;z-index:120">
			  <div class="legend" ><b>--</b></div>
			  <div class="menu_list clearfix" id="test" style="max-height:300px;overflow-y:auto">
			  	<ul id="areas_ul" class="no-padding">
			  
			  	</ul>
			 </div>
		 	<div></div>
		 </div>
        </div>
      </div>
      <div class="col-sm-4">
        <div id="main2" style="width: 100%;height:400px;"></div>
      </div>
    </section>

    <section class="content-header clearfix" style="position:relative;padding:50px 15px 0 15px">
      <div class="col-sm-3 no-padding">
        <div id="main3" style="width: 100%;height:300px;"></div>
        <div id="main7" style="width: 100%;height:350px;"></div>
      </div>
      <div class="col-sm-6 no-padding">
        <div class="pull-left" style="width: 50%">
          <div id="main5" style="width: 100%;height:600px;"></div>
        </div>
        <div class="pull-left" style="width: 50%">
          <div id="main6" style="width: 100%;height:600px;"></div>
        </div>
      </div>
      <div class="col-sm-3 no-padding">
        <div id="main4" style="width: 100%;height:300px;"></div>
        <div id="main8" style="width: 100%;height:350px;"></div>
      </div>
    </section>

  </div>
  <!-- /.content-wrapper -->
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.0 -->
<script src="plugins/jQuery/jQuery-2.2.0.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="bootstrap/js/raphael-min.js"></script>
<script src="plugins/morris/morris.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<script type="text/javascript" src="../scripts/bidLibjsjquery3.0.js"></script>
<!-- page script -->
<script src="dist/js/jquery.dataStatistics.js"></script>
<!-- 引入 ECharts 文件 -->
<script type="text/javascript" src="dist/js/echarts.common.min.js"></script>
<script type="text/javascript" src="dist/js/china.js"></script>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.2&key=f52a1bb11408e8a46dc884b2aaa44edc&plugin=AMap.PolyEditor"></script>
<!-- gooey-menu -->
<script type="text/javascript" src="plugins/gooey_menu/gooey.min.js"></script>
<script type="text/javascript">
  var storeId = decode64(getUrlParamByKey("s"));//门店ID
  var cityId_ecode = getUrlParamByKey("c");//城市ID
  var proId_ecode = getUrlParamByKey("p");//省ID
  var cityName_ecode = decode64(getUrlParamByKey("cn"));//省ID
  var zm = getUrlParamByKey("zm");
  var from_store = getUrlParamByKey("f");
  layer.config({
	  extend: 'skin/crmskin/style.css' //加载新皮肤
  });
  
      $("#mask-body").width($(document.body).width()-100);
	  $("#mask-header").width($(document.body).width()-100);
	  $("#mask-header>button").click(function(){
	  $("#TULI").css("right","6px");
	  $("#mask").css('display',"none");
	  document.getElementById("mapHeight").style.height= "350px";
	  $("#mapHeight").removeAttr("style");
      $("#mapHeight").css({"position":"relative","top":"22px","height":"350px"});
      $("#mapContainer").css({"border-radius":"20px"});
	  $("#fscreen").after($("#mapHeight"));
	});
  $(document).ready(function(){
	//初始化数据卡   
	  $("#data_card").gooeymenu({
          bgColor: "#4682b4",
          contentColor: "white",
          style: "vertical",
          horizontal: {
              menuItemPosition: "Glue"
          },
          vertical: {
              menuItemPosition: "spaced",
              direction: "down"
          },
          circle: {
              radius: 100
          },
          margin: "small",
          size: 70,
          bounce: true,
          bounceLength: "medium",
          transitionStep: 100,
          hover: "#4682b4"
      });
      
         $(".sidebar-menu > li").mouseenter(function(){
    	    $(this).children(".nav_dropdown").show();
    	    $(this).addClass("sidebar_active");

    	    $(".nav_dropdown li").removeClass("nav_mark_bg");
    	  });
    	  $(".sidebar-menu > li").mouseleave(function(){
    	    $(this).children(".nav_dropdown").hide();
    	    $(this).removeClass("sidebar_active");
    	  });
    	  $(".nav_dropdown > li").mouseenter(function(){
    	    $(this).children(".nav_dropm").show();
    	  });
    	  $(".nav_dropdown > li").mouseleave(function(){
    	    $(this).children(".nav_dropm").hide();
    	  });

    	  $(".nav_dropdown li").hover(function(){
    	    $(".nav_dropdown li").removeClass("nav_mark_bg");
    	    $(this).addClass("nav_mark_bg");
    	  });

    	  window.onload=function(){
    	    //document.getElementById("lsxx").style.height = document.getElementById("mdxx").offsetHeight+"px";
    	  }
    	  $("#pro_country").html(cityName_ecode);
	      initcurruser();//初始化用户信息
		  getStorePosition();//门店地图服务范围中心坐标
		  getStorePositionAndServiceArea();//门店服务范围
		  initStoreGMV();//门店交易额
		  initStoreHistoryGMV();//门店历史交易额
		  initAreaRanking_gmv();//片区GMV排名
		  initDeptRanking_gmv();//事业部GMV排名
		  initChannelRanking_gmv();//频道GMV排名
		  initEmployeeRanking_gmv();//国安侠GMV排名
		  initEmployeeRanking_order();//国安侠片区订单排名
		  initEStoreRanking_gmv();//E-店GMV排名
		  initDeptServerRanking_gmv();//服务专员GMV排名
		  initChannelRanking_order();//频道订单排名
		  showDataCard();
		  $("#process_div").hide();
		  $("#process_div_pic").hide();
		  
  });

  jQuery(document).ready(function($) {
    $(".map_city").mouseover(function(){
      $(this).find(".wave").show();
    }).mouseout(function(){
      $(this).find(".wave").hide();

    });
  });

  

	//格式化日期格式
	Date.prototype.format=function(fmt) {        
	  var o = {        
	  "M+" : this.getMonth()+1, //月份        
	  "d+" : this.getDate(), //日        
	  "h+" : this.getHours()%12 == 0 ? 12 : this.getHours()%12, //小时        
	  "H+" : this.getHours(), //小时        
	  "m+" : this.getMinutes(), //分        
	  "s+" : this.getSeconds(), //秒        
	  "q+" : Math.floor((this.getMonth()+3)/3), //季度        
	  "S" : this.getMilliseconds() //毫秒        
	  };        
	  var week = {        
	  "0" : "\u65e5",        
	  "1" : "\u4e00",        
	  "2" : "\u4e8c",        
	  "3" : "\u4e09",        
	  "4" : "\u56db",        
	  "5" : "\u4e94",        
	  "6" : "\u516d"       
	  };        
	  if(/(y+)/.test(fmt)){        
	      fmt=fmt.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length));        
	  }        
	  if(/(E+)/.test(fmt)){        
	      fmt=fmt.replace(RegExp.$1, ((RegExp.$1.length>1) ? (RegExp.$1.length>2 ? "\u661f\u671f" : "\u5468") : "")+week[this.getDay()+""]);        
	  }        
	  for(var k in o){        
	      if(new RegExp("("+ k +")").test(fmt)){        
	          fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));        
	      }        
	  }        
	  return fmt;        
	} 
  
 
   var currentStore;
   function initStore(){
 		doManager("StoreManager", "findStore",[storeId],
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var store = JSON.parse(data.data);
 					$("#store_no").html(store.storeno);
 					$("#store_name_left_top").html(store.name);
 					$("#pro_country_store").html(store.name);
 					currentStore = store;
 				}
 		},false);
 	}
   
 jQuery(document).ready(function($) {
    $(".map_city").mouseover(function(){
      $(this).find(".wave").show();
    }).mouseout(function(){
      $(this).find(".wave").hide();

    });
  });

var curr_user;
var time_;
var onoffcount=0;
var totalcount = 100;//默认5分钟
function initcurruser(){
	   initStore();    
	   showStoreAllInfo();//展示门店信息
	   chonfu();
	   onoffcount--;
       time_ = setInterval(chonfu,3000);
       $("#onoffset").attr("checked",true);
       $("#onoffset").click(function(){
       	var onoffval = $("#onoffset").attr("checked");
       	if(onoffval=="checked"){
       		clearInterval(time_);
       		$("#onoffset").attr("checked",false);
       	}else{
       		onoffcount=0;
       		time_ = setInterval(chonfu,3000);
       		$("#onoffset").attr("checked",true);
       	}
       });
       
       $("#setTime").change(function(){
       		var setTimeCountFive = $("#setTime option:selected").val();
     		onoffcount=0;
        	totalcount=20*parseInt(setTimeCountFive);
       });
   
}
	
	
	

 

//展示门店员工等信息
function showStoreAllInfo(){
	 
	  doManager("UserManager", "queryStoreEmployeeInfo",[storeId],
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						var info = JSON.parse(data.data);
						
						$("#gax_num").html("无");
						$("#zhgl_num").html("无");
						$("#fdz_name").html("无");
						$("#fwzy_num").html("无");
						$("#store_no").html(info[0].storeNo);
						$("#address_text").html("无");
						$(info).each(function(i,t){
							if(t.zw=='国安侠'){
								$("#gax_num").html("<a href='javascript:initGaxInfo()'>"+t.total+"</a>人");
							}else if(t.zw=="事务管理"){
								$("#zhgl_num").html("<a href='javascript:initZhglInfo()'>"+t.total+"</a>人");
							}else if(t.zw=="副店长"){
								$("#fdz_name").html(t.name);
							}else if(t.zw=="服务专员"){
								$("#fwzy_num").html("<a href='javascript:initFWZYInfo()'>"+t.total+"</a>人");
							}else if(t.zw=='店长'){
								$("#dz_name").html(t.name+"<span>"+(t.phone==null?"":t.phone)+"</span>");
							}
						})
						$("#address_text").html(info[0].address);
						
						
					}
		},false);
}

function chonfu(){
	onoffcount++;
	if(onoffcount==totalcount){
		  clearInterval(time_);
  	  	  $("#onoffset").attr("checked",false);
	}   
	 //查询当日累计营业额
	var dynamicDto = {
			cityId:"",
	  		employeeId:"",
	  		storeId:storeId,
	  		target:2
	}
	doManager("dynamicManager", "getDailyOrderOfCurDay",[dynamicDto],
			function(data, textStatus, XMLHttpRequest) {
				if (data.result) {
					var resultJson= JSON.parse(data.data);
					var dailyData = JSON.parse(resultJson.daily);
					var totle_price = dailyData[0].totle_price==null?"--":dailyData[0].totle_price;
					$("#totle_price").html(totle_price);
// 					day_curr = totle_price;
					
					var totalprice = totle_price+'';
					if(totalprice.indexOf(".")>0){
						totalprice = totalprice.substring(0,totalprice.lastIndexOf("."));
					}
					if(totalprice.length>8){
						dojob(totalprice.substring(0,totalprice.length)); 
					}else{
						totalprice = "000000000"+totalprice;
						dojob(totalprice.substring(totalprice.length-9,totalprice.length)); 
					}
					
				}
		},false);
	}

var ns=[];
var changeno="";
var srcnumber = "";
function dojob(now_number){
	  	    var ths = $(".dataStatistics");//解决this指向问题
	        var el = ths.find('.set_last');
	        var html = '<div class="digit">' +
		      '  <div class="digit_top">' +
		      '    <span class="digit_wrap"></span>' +
		      '  </div>' +
		      '  <div class="shadow_top"></div>' +
		      '  <div class="digit_bottom">' +
		      '    <span class="digit_wrap"></span>' +
		      '  </div>' +
		      '  <div class="shadow_bottom"></div>' +
		      '</div>';
	          
		      var htmlactive = '<div class="digit active">' +
		      '  <div class="digit_top">' +
		      '    <span class="digit_wrap"></span>' +
		      '  </div>' +
		      '  <div class="shadow_top"></div>' +
		      '  <div class="digit_bottom">' +
		      '    <span class="digit_wrap"></span>' +
		      '  </div>' +
		      '  <div class="shadow_bottom"></div>' +
		      '</div>';
	          var htmlprevious = '<div class="digit previous active">' +
		      '  <div class="digit_top">' +
		      '    <span class="digit_wrap"></span>' +
		      '  </div>' +
		      '  <div class="shadow_top"></div>' +
		      '  <div class="digit_bottom">' +
		      '    <span class="digit_wrap"></span>' +
		      '  </div>' +
		      '  <div class="shadow_bottom"></div>' +
		      '</div>';
		      
	          var nowNums=now_number.split("");
	          changeno="";
	          for(i=0;i<9;i++){
	        	  if(nowNums[i]!=ns[i]){
	        		  ns[i]=nowNums[i];
	        		  changeno+=i+"";
	        	  }
	          }
	          
	          var isbefore = true;
	          var countsign = 1;
		      ths.find('.digit_set').each(function(index,obj) {
		    	    $(this).empty();
		            $(this).append(html);
		            
		            $(this).empty();
		    	    if(srcnumber!=now_number&&changeno.indexOf(index)>-1){//如果相等  样式不变 
		    	    	$(this).append(htmlactive);
		    	    	$(this).append(htmlprevious);
		    	    }else{
		    	    	$(this).append(html);
		    	    }
		            
		            var nowNumber = nowNums[index]; 
		            if(nowNumber==0&&isbefore){
		            	nowNumber="";
		            	$(this).hide();
		            }else{
		            	isbefore=false;
		            	$(this).show();
		            }
		            if(index==8&&nowNumber==""){
		            	nowNumber="0";
		            	$(this).show();
		            }
		            countsign++;
		            if(nowNumber!=""){
		            	$(this).find('.digit_wrap').append(nowNumber);
		            }
		      });
		      srcnumber=now_number;
	  		  if(parseInt(now_number)<1000000){
	  			  $("#dou1").hide();
	  			  if(parseInt(now_number)<1000){
	  				$("#dou2").hide();
	  			  }else{
	  				$("#dou2").show();
	  			  }
	  		  }else{
	  			$("#dou1").show();
	  			$("#dou2").show();
	  		  } 
	  	
	}

//门店营业额
function initStoreGMV(){
	//取得当前登录人的门店
	doManager("dynamicManager", "selectGMVOfStore",[storeId],
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						
						 var gmv = JSON.parse(data.data).gmv;
						 if(gmv!=null&&gmv.length>0){
							 $("#cur_month_gmv").html("当月累计营业额："+gmv[0].pesgmv);
						 }else{
							 $("#cur_month_gmv").html("当月累计营业额：0");
						 }
						
					}
			},false);
}

//门店历史营业额
function initStoreHistoryGMV(){
	//取得当前登录人的门店
	doManager("dynamicManager", "selectHistoryGmvOfStore",[storeId],
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						
						 var gmv = JSON.parse(data.data).gmv;
						 if(gmv!=null&&gmv.length>0){
							 $("#history_gmv").html("历史累计营业额："+gmv[0].order_amount);
						 }else{
							 $("#history_gmv").html("历史累计营业额：0");
						 }
						
					}
			},false);
}


function showDataCard(){
	  $("#process_div").show();
	  $("#process_div_pic").show();
	  var myDate = new Date();
	  var c_year = myDate.getFullYear(); //当前年
	  var c_month = myDate.getMonth()+1;//当前月
	  var curMonth = $("#currentMonth").val();
	  var method = "getDataCardInfo";
	 
	  var dynamicDto = {
			  cityId:"",
	  		  employeeNo:"",
	  		  year:c_year,
	  		  storeId:storeId,
	  		  month:parseInt(c_month),
	  		  target:2
	  }
	 
	  doManager("dynamicManager", method,[dynamicDto],
				function(data, textStatus, XMLHttpRequest) {
					//layer.close(loadDataCard);
					if (data.result) {
						var resultJson= JSON.parse(data.data);
						$("#newaddcus").text(resultJson.newaddcus);
						$("#rebuycus").text(resultJson.rebuycus);
						$("#storetrade").text(resultJson.storetrade);
						$("#sendorders").text(resultJson.sendorders);
						$("#rewardtimes").text(resultJson.rewardtimes);
						
						
						$("#v_newaddcus").text(resultJson.newaddcus);
						$("#v_rebuycus").text(resultJson.rebuycus);
						$("#v_storetrade").text(resultJson.storetrade);
						$("#v_sendorders").text(resultJson.sendorders);
						$("#v_rewardtimes").text(resultJson.rewardtimes);
						
						$("nav[id='data_card'] a").on("mouseover",function(){
							var pp = $(this).children();
							$(this).css({"width":"90px"});
							$(this).css({"height":"90px"});
							$(this).css({"line-height":"90px"});
							$(this).css({"margin":"-10px 0px 0px -10px"});
							$(this).css({"background-color":"#47a3ff"});
							if(typeof(pp)!="undefined"){
								$($(pp)[0]).hide();
								$($(pp)[1]).show();
							}
						});
						
						$("nav[id='data_card'] a").on("mouseout",function(){
							$("nav[id='data_card'] a").each(function(){
								$(this).css({"width":"70px"});
								$(this).css({"height":"70px"});
								$(this).css({"line-height":"70px"});
								$(this).css({"margin":"0px 0px 0px 0px"});
								$(this).css({"background-color":"#4682b4"});
								var pp = $(this).children();
								if(typeof(pp)!="undefined"){
									$($(pp)[0]).show();
									$($(pp)[1]).hide();
								}
							});
						});
					}
			});
	       
	  		
}

<!-----------------------------------------------地图-------------------------------------------------->
// autodivheight();
// function autodivheight(){ //函数：获取尺寸
//     //获取浏览器窗口高度
//     var winHeight=0;
//     if (window.innerHeight)
//         winHeight = window.innerHeight;
//     else if ((document.body) && (document.body.clientHeight))
//         winHeight = document.body.clientHeight;
//     //通过深入Document内部对body进行检测，获取浏览器窗口高度
//     if (document.documentElement && document.documentElement.clientHeight)
//         winHeight = document.documentElement.clientHeight;
//     //DIV高度为浏览器窗口的高度
//     //document.getElementById("test").style.height= winHeight +"px";
//     //DIV高度为浏览器窗口高度的一半
//     document.getElementById("mapHeight").style.height= winHeight - 345 +"px";
//  }
//  window.onresize=autodivheight; //浏览器窗口发生变化时同时变化DIV高度


 
 
   //初始化地图对象，加载地图
	var map = new AMap.Map("mapContainer", {
	      resizeEnable : true,
	      zoom : 13
	});

	map.plugin(["AMap.MapType"],function(){
	      //地图类型切换
     var type= new AMap.MapType({
        defaultType:0 //使用2D地图
     });
     map.addControl(type);
	});
 map.setMapStyle('amap://styles/light');
 var servicePositionIsExist = false;
 var servicePosition_x = "";
 var servicePosition_y = "";
 function getStorePosition(){
 	  doManager("areaManager", "getStoreServiceAreaAndPosition", [storeId], function(
 				data, textStatus, XMLHttpRequest) {
 			if (data.result) {
 				var resultJson = JSON.parse(data.data);
 				if(resultJson.code == 200){
 					var position = resultJson.position;
 					
 					//初始化地图对象，加载地图
 					map.setCenter(position)
 					servicePositionIsExist = true;
 				}else{
 					servicePositionIsExist = false;
 				}
 			}
 		});
 }


	//该数组用于该小区操作坐标
	var polygonArray = [];
	var polygonArrayCopy = [];
	//服务区域
	var polygonArea = [];
	//存放所有小区的数组
	var tinyAreaArray = [];//小区区域数组
	var lastIdx;
	var storeno="";
	var isDrawing = false;
	var coordinate;//小区坐标
	var storeService;//服务范围

	/**获取门店的服务范围以及中心点**/
    var aboutArea = {};
    var arrayObj = new Array();//片区色块数组
	var areaColor = {};//片区色块
	var colorOther = "#080000";//黑色（超出20个片区的范围的）
	var colorArrar = new Array("#007979","#00FFFF","#796400","#FFD306","#009100","#5151A2","#8F4586","#F75000","#FF0000","#FF9797","#FF0080","#600000","#820041","#4B0091","#A8FF24","#63B8FF","#5E5E5E","#bf88113d","#0000FF","#7CCD7C");
	function getStorePositionAndServiceArea(){
		 doManager("areaManager", "getTinyVillageCoord",[storeId], function(data, textStatus,XMLHttpRequest) {
		        if(data.result){
		            
		        	var resultJson= JSON.parse(data.data);
		        	if(resultJson!=null&&resultJson.code==200){
		        		$("#areas_ul").empty();		
		        		coordinate = resultJson.coordinate;//小区坐标
		        		storeService = resultJson.serviceArea;//服务范围
		        		var areas = resultJson.areas;//片区
		        		var store = resultJson.store;
		        		$(".legend").html('<b style="color:red">'+store.name+'</b>');
		        		for(var i=0;i<areas.length;i++){
		        			 
		        			//var color = getColor(i+1);
		        			if(i<20){
		        				areaColor[areas[i].area_no] = colorArrar[i];
		        			}else if(i>=20){
		        				areaColor[areas[i].area_no] =colorOther;
		        			}
		        			aboutArea[areas[i].area_no] = areas[i];
		        			arrayObj.push(areaColor);
		        			var name_a = areas[i].employee_a_name==null?"无":areas[i].employee_a_name;
	            			var name_b = areas[i].employee_b_name==null?"无":areas[i].employee_b_name;
	            			var areaName = areas[i].name;
	            			if(areaName.length>6){
	            				areaName = areaName.substring(0,6) + "..."
	            			}
	            			
            				var  areaHtml= '<li class="col-lg-12" onmouseover="lightPloygon(\''+areas[i].area_no+'\')" onmouseout="showAllTinyArea()">'+
					     				   '<div class="col-sm-3 no-padding" style="width:15%;background:'+areaColor[areas[i].area_no]+'"></div>'+
					    				   '<div class="col-sm-9 no-padding" >'+
					    					   '<p style="padding-left:10px;white-space:nowrap;"><span style="white-space:nowrap;display:inline-block">'+areaName+'</span></p>'+
					    				   '</div>'+
					    			   '</li>';
				 			$("#areas_ul").append(areaHtml);
		        		}
		        		initArea(storeService,coordinate);
		        	}else{
		        		map.clearMap();
		        		$("#areas_ul").empty();
		        		$("#TULI").hide();
		        		layer.msg(resultJson.message);
		        	}
		            
		            
		            
		        }else{
		            $$.showMessage("系统信息", "数据加载异常！");
		        }});
	}
	

	var googleLayer = null;
	//服务区域
	var  serviceRange;
	function initArea(storeService,coordinate) {
	    map.clearMap();
	    //服务区域多边形
	    serviceRange = new AMap.Polygon({
	        path: storeService,//设置多边形边界路径
	        strokeColor: "#F00", //线颜色
	        strokeOpacity: 0.9, //线透明度
	        strokeWeight: 2,    //线宽
	        fillColor: "#00DD00", //填充色
	        fillOpacity: 0//填充透明度
	    });
	    serviceRange.setMap(map);
	    
	
	    var areaTinyVillage;//小区坐标范围
	    var tinyVillageMarker;
	    var tinyVillagePolygon;
	//     var tinyVillageText;
	    for(var i=0;i<coordinate.length;i++){
	    	if(coordinate[i].areaNo!=null&&coordinate[i].areaNo!=""){
	            var $strokeColor = areaColor[coordinate[i].areaNo];
	            
	            if(typeof($strokeColor) == "undefined"){
	            	$strokeColor = "#333333cf";
	            }
	            var $fillColor = areaColor[coordinate[i].areaNo];
	            if(typeof($fillColor) == "undefined"){
	            	$fillColor = "#333333cf";
	            }
	            //绘制小区
	        	areaTinyVillage = new AMap.Polygon({
	                    path:coordinate[i].coordinate_range.coordinates[0],//设置多边形边界路径
	                    strokeColor: $strokeColor, //线颜色
	                    strokeOpacity: 1.0, //线透明度
	                    strokeWeight: 2,    //线宽
	                    fillColor: $fillColor, //填充色
	                    fillOpacity: 0.45,//填充透明度
	                    extData:{"areaNo":coordinate[i].areaNo} 
	                });
	            
	        	var tmp_tinyVillageCoordinate={
	        			area_no:coordinate[i].areaNo,
	        			tinyVillagePolygon:areaTinyVillage,
	        			strokeColor: $strokeColor,
	        			fillColor: $fillColor
	        	}
	        	polygonArray.push(tmp_tinyVillageCoordinate);
	        	polygonArrayCopy.push(tmp_tinyVillageCoordinate);
	        	areaTinyVillage.setMap(map);
	        	   
	           var $tinyVillageName = coordinate[i].name;  
	           var strLength = -(($tinyVillageName.length*14+20)/2);
	           var $position = coordinate[i].location; 
	           if($position!=null&&$position.length==2){
	//         	   tinyVillageMarker = new AMap.Marker({ //对小区添加自定义点标记
	//         		    visible:false,
	//       		        position: $position, //基点位置
	//       		        offset: new AMap.Pixel(strLength, -36), //相对于基点的偏移位置
	//       		       // draggable: true,  //是否可拖动
	//       		        content: '<div class="marker-route marker-marker-bus-from">'+$tinyVillageName+'</div>'   //自定义点标记覆盖物内容
	//       		    }); 
	//         	   tinyVillageMarker.setMap(map);
	//         	   var tinyAreaMrker={
	//         			   area_no:coordinate[i].areaNo,
	//         			   tinyAreaMarker:tinyVillageMarker
	//         	   }
	//         	   tinyAreaArray.push(tinyAreaMrker);
	        	   var bindArea = aboutArea[coordinate[i].areaNo];
	        	   var areaLength = -((bindArea.name.length*14+20)/2)+40;
	        	   var aEmployee = bindArea.employee_a_name==null?"无":bindArea.employee_a_name;
	        	   var areaName = bindArea.name;
	        	  /*  tinyVillageText = new AMap.Text({
	        		   position: $position, //基点位置
	        		   offset: new AMap.Pixel(areaLength, -2), //相对于基点的偏移位置
	        		   text:areaName+" 负责人："+aEmployee
	        	   });
	        	   tinyVillageText.setMap(map); */
	        	   
	           }
	    	}
	    }
	    
	    $("#TULI").show();
	}
	
<!--------------------------------------------------------地图------------------------------------------------>	
	
	
	//事业部gmv排名
	function  initDeptRanking_gmv(){
			//取得当前登录人的门店
			doManager("dynamicManager", "selectDeptRankingOfStore",[storeId],
					function(data, textStatus, XMLHttpRequest) {
						if (data.result) {
							var deptGmv = JSON.parse(data.data).gmv;
							var deptName = new Array();
							var deptNV = new Array();
							
							if(deptGmv!=null){
								for(var i=0;i<deptGmv.length;i++){
									var v = deptGmv[i].gmv;
									var n = deptGmv[i].career_group;
									var vnMap = {};
									vnMap["value"] = v;
									vnMap["name"] = n;
									deptName.push(n);
									deptNV.push(vnMap);
									
								}
								option2.legend.data = deptName;
								option2.series[0].data = deptNV;
								myChart2.setOption(option2);  
							}
						}
				},false);
	}
	
	//频道gmv排名
	function  initChannelRanking_gmv(){
			//取得当前登录人的门店
			doManager("dynamicManager", "selectChannelRankingOfStore",[storeId],
					function(data, textStatus, XMLHttpRequest) {
						if (data.result) {
							var channelGmv = JSON.parse(data.data).gmv;
// 							var channelName = new Array();
// 							var channelValue = new Array();
							var channelName = new Array();
 							var channelValue = new Array();
							if(channelGmv!=null){
								for(var i=0;i<channelGmv.length;i++){
									var v = channelGmv[i].gmv;
									var n = channelGmv[i].channel_name;
									channelName[i]=n;
									channelValue[i]=v;
								}
								
								option4.xAxis[0].data = channelName;
								option4.series[0].data = channelValue;
								myChart4.setOption(option4);
							}
							
						}
				},false);
	}
	
	
	//片区gmv排名
	function  initAreaRanking_gmv(){
			//取得当前登录人的门店
			doManager("dynamicManager", "selectAreaRankingOfStore",[storeId],
					function(data, textStatus, XMLHttpRequest) {
						if (data.result) {
							var areaGmv = JSON.parse(data.data).gmv;
							var areaName = new Array();
							var areaValue = new Array();
							
							if(areaGmv!=null){
								for(var i=0;i<areaGmv.length;i++){
									var v = areaGmv[i].gmv;
									var n = areaGmv[i].area_name;
									areaName[i] = n;
									areaValue[i] = v;
								}
								option1.xAxis[0].data = areaName;
								option1.series[0].data = areaValue;
								myChart1.setOption(option1);  
							}
							
							
						}
				},false);
	}
	
	//服务专员gmv
	function  initDeptServerRanking_gmv(){
		//取得当前登录人的门店
		doManager("dynamicManager", "selectDeptServerRanking",[storeId],
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						var deptGmv = JSON.parse(data.data).gmv;
// 						var deptName = new Array();
// 						var deptNV = new Array();
						var deptName = new Array();
						var deptNV = new Array();
						if(deptGmv!=null){
							for(var i=0;i<deptGmv.length;i++){
								var v = deptGmv[i].gmv;
								var n = deptGmv[i].name;
								var vnMap = {};
								vnMap["value"] = v;
								vnMap["name"] = n;
								deptName[i]=n;
								deptNV[i] = v;
								
							}
							option6.yAxis[0].data = deptName.reverse();
							option6.series[0].data = deptNV.reverse();
							myChart6.setOption(option6);  
						}
					}
			},false);
	}
	
	//国安侠gmv排名
	function  initEmployeeRanking_gmv(){
			//取得当前登录人的门店
			doManager("dynamicManager", "selectEmployeeRankingOfStore",[storeId],
					function(data, textStatus, XMLHttpRequest) {
						if (data.result) {
							var empGmv = JSON.parse(data.data).gmv;
// 							var empName = new Array();
// 							var empValue = new Array();
							var empName = new Array();
							var empValue = new Array();
							if(empGmv!=null){
								for(var i=0;i<empGmv.length;i++){
									var v = empGmv[i].gmv;
									var n = empGmv[i].employee_a_name;
									empName[i]=n;
									empValue[i]=v;
								}
								option3.xAxis[0].data = empName;
								option3.series[0].data = empValue;
								myChart3.setOption(option3); 
							}
							
							
						}
				},false);
	}
	
	//国安侠片区订单排名
	function  initEmployeeRanking_order(){
			//取得当前登录人的门店
			doManager("dynamicManager", "selectAreaOrderRanking",[storeId],
					function(data, textStatus, XMLHttpRequest) {
						if (data.result) {
							var empOrder = JSON.parse(data.data).order;
// 							var empName = new Array();
// 							var empValue = new Array();
							var empName = new Array();
							var empValue = new Array();
							if(empOrder!=null){
								for(var i=0;i<empOrder.length;i++){
									var v = empOrder[i].total;
									var n = empOrder[i].employee_a_name;
									empName[i]=n;
									empValue[i]=v;
								}
								option7.xAxis[0].data = empName;
								option7.series[0].data = empValue;
								myChart7.setOption(option7); 
							}
							
							
						}
				},false);
	}
	
	
	//E店gmv排名
	function  initEStoreRanking_gmv(){
			//取得当前登录人的门店
			doManager("dynamicManager", "selectEStoreRankingOfStore",[storeId],
					function(data, textStatus, XMLHttpRequest) {
						if (data.result) {
							var estoreGmv = JSON.parse(data.data).gmv;
// 							var estoreName = new Array();
// 							var estoreValue = new Array();
							var estoreName = new Array();
							var estoreValue = new Array();
							if(estoreGmv!=null){
								for(var i=0;i<estoreGmv.length;i++){
									var v = estoreGmv[i].gmv;
									var n = estoreGmv[i].eshop_name;
									estoreName[i]=n;
									estoreValue[i]=v;
								}
								option5.yAxis[0].data = estoreName.reverse();
								option5.series[0].data = estoreValue.reverse();
								myChart5.setOption(option5);  
							}
							
							
						}
				},false);
	}
	
	
	function initChannelRanking_order(){
		//取得当前登录人的门店
		doManager("dynamicManager", "selectChannelOrderRanking",[storeId],
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						var channelOrder = JSON.parse(data.data).order;
// 						var channelName = new Array();
// 						var channelValue = new Array();
						var channelName = new Array();
						var channelValue = new Array();
						if(channelOrder!=null){
							for(var i=0;i<channelOrder.length;i++){
								var v = channelOrder[i].total;
								var n = channelOrder[i].channel_name;
								channelName[i]=n;
								channelValue[i]=v;
							}
							option8.xAxis[0].data = channelName;
							option8.series[0].data = channelValue;
							myChart8.setOption(option8); 
						}
						
					}
			},false);
	}

	
	


  // 基于准备好的dom，初始化echarts实例
  var myChart1 = echarts.init(document.getElementById('main1'));//片区排名（GMV）
  var myChart2 = echarts.init(document.getElementById('main2'));//事业群排名（GMV）
  var myChart3 = echarts.init(document.getElementById('main3'));//国安侠排名（GMV）
  var myChart4 = echarts.init(document.getElementById('main4'));//频道排名（GMV）
  var myChart5 = echarts.init(document.getElementById('main5'));//E店排名（GMV）
  var myChart6 = echarts.init(document.getElementById('main6'));//服务专员排名（GMV）
  var myChart7 = echarts.init(document.getElementById('main7'));//国安侠排名（订单）
  var myChart8 = echarts.init(document.getElementById('main8'));//频道排名（订单）
 
  var option1 = {
		    title:[
		      {text:"片区排名TOP13（GMV）",x: '2%', y: '2%',textStyle:{color:"#fff",fontSize:"16"}},
		    ],
		    tooltip : {
		      trigger: 'axis',
		      axisPointer: { // 坐标轴指示器，坐标轴触发有效
		        "type": "shadow" // 默认为直线，可选为："line" | "shadow"
		      }
		    },
		    calculable : true,
		    grid: {
		      left: '3%',
		      right: '4%',
		      top: '20%',
		      height: 250, //设置grid高度
		      containLabel: true
		    },
		    xAxis : [
		      {
		        type : 'category',
		        data : [],
		        max:12,
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		          show: true,
		          rotate:45,//倾斜度 -90 至 90 默认为0
		          //interval: 1,
		          textStyle: {color: '#fff'}
		        }
		      }
		    ],
		    yAxis : [
		      {
		        type : 'value',
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		          "show": true,
		          rotate:45,//倾斜度 -90 至 90 默认为0
		        }
		      }
		    ],
		    series : [
		      {
		        name:'GMV',
		        type:'bar',
		        data:[],
		        barWidth : 30,//柱图宽度
		        barMaxWidth:30,//最大宽度
		        barGap: 13,
		        barCategoryGap: 13,
		        itemStyle: {
		          normal: {
		            color: function(params) {
		              // build a color map as your need.
		              var colorList = [
		            	  //'#E87C25','#27727B',
		            	  '#C1232B','#B5C334','#FCCE10',
		                  '#0399d9','#00a7de','#00c3e7','#00ddf0','#13d4b2',
		                  '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
		              ];
		              return colorList[params.dataIndex]
		            },
		            borderWidth: 0,
		            barBorderRadius: [10, 10, 10, 10],
		            label: {
		              show: true,
		              position: 'top',
		              formatter: '{c}'
		            }
		          }
		        }
		      }
		    ]
		  };

//国安侠gmv排名
var option3 = {
		    title:[
		      {text:"国安侠排名TOP13（GMV）",x: '2%', y: '0%',textStyle:{color:"#fff",fontSize:"16"}},
		    ],
		    tooltip : {
		      trigger: 'axis',
		      axisPointer: { // 坐标轴指示器，坐标轴触发有效
		        "type": "shadow" // 默认为直线，可选为："line" | "shadow"
		      }
		    },
		    calculable : true,
		    grid: {
		      left: '3%',
		      right: '4%',
		      top: '20%',
		      height: 250, //设置grid高度
		      containLabel: true
		    },
		    xAxis : [
		      {
		        type : 'category',
		        data : [],
		        max:12,
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		        	 show: true,
			         rotate:45,//倾斜度 -90 至 90 默认为0
			          //interval: 1,
			         textStyle: {color: '#fff'}
		        }
		      }
		    ],
		    yAxis : [
		      {
		        inverse: false,
		        type : 'value',
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		          /*textStyle:{
		           color:'#f00'
		           }*/
		          "show": false
		        }
		      }
		    ],
		    series : [
		      {
		        name:'GMV',
		        type:'bar',
		        data:[],
		        barWidth : 20,//柱图宽度
		        barMaxWidth:20,//最大宽度
		        barGap: 13,
		        barCategoryGap: 13,
		        itemStyle: {
		          normal: {
		            color: function(params3) {
		              // build a color map as your need.
		              var colorList3 = [
		                '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
		              ];
		              return colorList3[params3.dataIndex]
		            },
		            borderWidth: 0,
		            barBorderRadius: [10, 10, 10, 10],
		            label: {
		              show: true,
		              position: 'top',
		              formatter: '{c}'
		            }
		          }
		        }

		      }
		    ]
		  };

// 频道排名
var option4 = {
  title:[
    {text:"频道排名TOP5（GMV）",x: '2%', y: '0%',textStyle:{color:"#fff",fontSize:"16"}},
  ],
  tooltip : {
    trigger: 'axis',
    axisPointer: { // 坐标轴指示器，坐标轴触发有效
      "type": "shadow" // 默认为直线，可选为："line" | "shadow"
    }
  },
  calculable : true,
  grid: {
    left: '3%',
    right: '4%',
    top: '20%',
    height: 250, //设置grid高度
    containLabel: true
  },
  xAxis : [
  {
    type : 'category',
    data : [],
    max:4,
    splitLine: {
      show: false
    },
    axisLine: {
      show: false
    },
    axisTick:{
      show: false
    },
    axisLabel:{
  	  show: true,
        rotate:45,//倾斜度 -90 至 90 默认为0
        //interval: 1,
        textStyle: {color: '#fff'}
    }
  }
],
  yAxis : [
  {
    inverse: true,
    type : 'value',
    splitLine: {
      show: false
    },
    axisLine: {
      show: false
    },
    axisTick:{
      show: false
    },
    axisLabel:{
      /*textStyle:{
       color:'#f00'
       }*/
      "show": false
    }
  }
],
  series : [
  {
    name:'GMV',
    type:'bar',
    data:[],
    barWidth : 30,//柱图宽度
    barMaxWidth:30,//最大宽度
    barGap: 13,
    barCategoryGap: 13,
    itemStyle: {
      normal: {
        color: function(params1) {
          // build a color map as your need.
          var colorList1 = [
            //'#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
            '#0399d9','#00a7de','#00c3e7','#00ddf0','#13d4b2',
           // '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
          ];
          return colorList1[params1.dataIndex]
        },
        borderWidth: 0,
        barBorderRadius: [10, 10, 10, 10],
        label: {
          show: true,
          position: 'top',
          formatter: '{c}'
        }
      }
    }
  }
]
};

// 事业群排名
var option2 = {
  title : {
    text: '事业群排名（GMV）',
    x: '2%',
    y: '2%',
    textStyle:{color:"#fff",fontSize:"16"}
  },
  tooltip : {
    trigger: 'item',
    formatter: "{a} <br/>{b} : {c} ({d}%)"
  },
  legend: {
    x : 'right',
    y : '80%',
    //orient: 'vertical',
    data:[],
    textStyle:{color:"#fff"}
  },
  series : [
    {
      name:'gmv',
      type:'pie',
      radius : [20, 110],
      center : ['50%', '45%'],
      roseType : 'radius',
      color: ['#f3b822', '#49dff0', '#034079', '#6f81da', '#13de86','#D7504B','#C6E579',],
      label: {
        normal: {
          show: false
        },
        emphasis: {
          show: false
        }
      },
      lableLine: {
        normal: {
          show: false
        },
        emphasis: {
          show: true
        }
      },
      data:[
        
      ]
    }
  ]
};

myChart2.on('click', function (param){
	  var depname=encode64(param.name);
	  window.open("index_BU.html?depname="+depname);
});


// E店排名

var option5 = {
  title:[
    {text:"E店排名TOP5（GMV）",x: '2%', y: '1%',textStyle:{color:"#fff",fontSize:"16"}},
  ],
  grid: [
    {x: '0', y: '10%',},
  ],
  tooltip: {
    formatter: '{b} ({c})',
    show: "true",
    trigger: 'axis',
    axisPointer: { // 坐标轴指示器，坐标轴触发有效
      type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
    }
  },
  xAxis: [
    {
  	
  	axisTick: {show:false},
      axisLabel: {show:false},
      splitLine: {show:false},
      axisLine: {show:false }
      
    },
  ],
  yAxis: [
    {
      gridIndex: 0,
      interval:1,
      data:[],
      inverse: false,
      axisTick: {show:false},
      axisLabel: {show:true},
      splitLine: {show:false},
      axisLine: {
        show:false,
        lineStyle:{color:"#fff"}
      },
    }
  ],
  series: [

    {
      name: 'GMV',
      type: 'bar',xAxisIndex: 0,yAxisIndex: 0,
      barWidth : 30,//柱图宽度
      barMaxWidth:30,//最大宽度
      itemStyle:{
        normal:{
          barBorderRadius: 50,
          borderWidth: 0,
          color: function(params2) {
            // build a color map as your need.
            var colorList2 = [
              //'#ff6600','#ca702d','#418ba1','#129bd3','#a0b6a4',
             // '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
              '#ffad43','#ffa940','#ffa13a','#ff8222','#ff6600',
              //'#ff6e0a','#ff720e','#ff720e','#ff9430','#ff6600',
            ];
            return colorList2[params2.dataIndex]
          },
        },
      },
      label:{normal:{show:true, position:"right",textStyle:{color:"#9EA7C4"}}},
      data:[]
    }

  ]
};


var option7 = {
		    title:[
		      {text:"国安侠排名TOP13（订单量）",x: '2%', y: '3%',textStyle:{color:"#fff",fontSize:"16"}},
		    ],
		    tooltip : {
		      trigger: 'axis',
		      axisPointer: { // 坐标轴指示器，坐标轴触发有效
		        "type": "shadow" // 默认为直线，可选为："line" | "shadow"
		      }
		    },
		    calculable : true,
		    grid: {
		      left: '3%',
		      right: '4%',
		      top: '20%',
		      height: 250, //设置grid高度
		      containLabel: true
		    },
		    xAxis : [
		      {
		        inverse: false,
		        type : 'category',
		        data : [],
		        max:12,
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		        	 show: true,
			         rotate:45,//倾斜度 -90 至 90 默认为0
			          //interval: 1,
			         textStyle: {color: '#fff'}
		        }
		      }
		    ],
		    yAxis : [
		      {
		        type : 'value',
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		          /*textStyle:{
		           color:'#f00'
		           }*/
		          "show": false
		        }
		      }
		    ],
		    series : [
		      {
		        name:'订单量',
		        type:'bar',
		        data:[],
		        barWidth : 20,//柱图宽度
		        barMaxWidth:20,//最大宽度
		        barGap: 13,
		        barCategoryGap: 13,
		        itemStyle: {
		          normal: {
		            color: function(params3) {
		              // build a color map as your need.
		              var colorList3 = [
		                '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
		              ];
		              return colorList3[params3.dataIndex]
		            },
		            borderWidth: 0,
		            barBorderRadius: [10, 10, 10, 10],
		            label: {
		              show: true,
		              position: 'top',
		              formatter: '{c}'
		            }
		          }
		        }
		      }
		    ]
		  };


// 事业部服务专员排名
var option6 = {
  title:[
    {text:"服务专员排名（GMV）",x: '2%', y: '1%',textStyle:{color:"#fff",fontSize:"16"}},
  ],
  grid: [
    {x: '20%', y: '10%',},
  ],
  tooltip: {
    formatter: '{b} ({c})'
  },
  xAxis: [
    {
      gridIndex: 0,
      axisTick: {show:false},
      axisLabel: {show:false},
      splitLine: {show:false},
      axisLine: {show:false }
    },
  ],
  yAxis: [
    {
      gridIndex: 0,
      interval:0,
      data:[],
      axisTick: {show:false},
      axisLabel: {show:true},
      splitLine: {show:false},
      axisLine: {
        show:false,
        lineStyle:{color:"#fff"}
      },
    }
  ],
  series: [

    {
      name: 'GMV',
      type: 'bar',xAxisIndex: 0,yAxisIndex: 0,
      barWidth : 30,//柱图宽度
      barMaxWidth:30,//最大宽度
      itemStyle:{
        normal:{
          barBorderRadius: 50,
          borderWidth: 0,
          color: function(params2) {
            // build a color map as your need.
            var colorList2 = [
              '#ffad43','#ffa940','#ffa13a','#ff8222','#ff6600',
              //'#ff6e0a','#ff720e','#ff720e','#ff9430','#ff6600',
            ];
            return colorList2[params2.dataIndex]
          },
        },
      },
      label:{normal:{show:true, position:"right",textStyle:{color:"#9EA7C4"}}},
      data:[]
    },

  ]
};


var option8 = {
		    title:[
		      {text:"频道排名TOP5（订单量）",x: '2%', y: '2%',textStyle:{color:"#fff",fontSize:"16"}},
		    ],
		    tooltip : {
		      trigger: 'axis',
		      axisPointer: { // 坐标轴指示器，坐标轴触发有效
		        "type": "shadow" // 默认为直线，可选为："line" | "shadow"
		      }
		    },
		    calculable : true,
		    grid: {
		      left: '3%',
		      right: '4%',
		      top: '20%',
		      height: 250, //设置grid高度
		      containLabel: true
		    },
		    xAxis : [
		      {
		        type : 'category',
		        data : [],
		        max:4,
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		        	 show: true,
			         rotate:45,//倾斜度 -90 至 90 默认为0
			          //interval: 1,
			         textStyle: {color: '#fff'}
		        }
		      }
		    ],
		    yAxis : [
		      {
		        type : 'value',
		        splitLine: {
		          show: false
		        },
		        axisLine: {
		          show: false
		        },
		        axisTick:{
		          show: false
		        },
		        axisLabel:{
		          /*textStyle:{
		           color:'#f00'
		           }*/
		          "show": false
		        }
		      }
		    ],
		    series : [
		      {
		        name:'订单量',
		        type:'bar',
		        data:[],
		        barWidth : 30,//柱图宽度
		        barMaxWidth:30,//最大宽度
		        barGap:5,
		        barCategoryGap:5,
		        itemStyle: {
		          normal: {
		            color: function(params1) {
		              // build a color map as your need.
		              var colorList1 = [
		                //'#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
		                '#0399d9','#00a7de','#00c3e7','#00ddf0','#13d4b2',
		                // '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
		              ];
		              return colorList1[params1.dataIndex]
		            },
		            borderWidth: 0,
		            barBorderRadius: [10, 10, 10, 10],
		            label: {
		              show: true,
		              position: 'top',
		              formatter: '{c}'
		            }
		          }
		        }
		      }
		    ]
		  };



  var loadIndex;
  //初始化国安侠员工
  function initGaxInfo(){
	 
	  var user={
			  store_id:storeId,
			  zw:'国安侠'
	  }
	  var infoStr="";
	  doManager("UserManager", "getEmployeeByStore",user,
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						var result = JSON.parse(data.data);
						var dataArr = new Array();
						
						for(var i=0;i<result.length;i++){
							var employee_name = result[i].name;
							var employee_no = result[i].employee_no;
							var employee_sex = result[i].sex;
							var employee_authorizedtype = result[i].authorizedtype;
							var employee_topostdate = result[i].topostdate;
							infoStr = infoStr+"<tr style='cursor:pointer'  id='tr_"+employee_no+"' onclick='newEmployeeInfoHtml(this)'><td>"+parseInt(i+1)+"</td><td>"+employee_name+"</td><td>"+employee_sex+"</td><td>"+employee_topostdate+"</td><td>"+employee_authorizedtype+"</td></tr>"
						}
						$("#employee_detail_title").nextAll().remove();
						$("#employee_detail_title").after(infoStr);
						$("#employee_detail_title").nextAll("tr:even").css("background-color","aliceblue");
						$("#employee_detail_title").nextAll("tr:odd").css("background-color","mintcream");
						showEmployeeInfo();
					}
		},false);
  }
  //初始化综合管理员工
  function initZhglInfo(){
	  
	  var user={
			  store_id:storeId,
			  zw:'事务管理'
	  }
	  var infoStr="";
	  doManager("UserManager", "getEmployeeByStore",user,
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						var result = JSON.parse(data.data);
						var dataArr = new Array();
						
						for(var i=0;i<result.length;i++){
							
							var employee_name = result[i].name;
							var employee_no = result[i].employee_no;
							var employee_sex = result[i].sex;
							var employee_authorizedtype = result[i].authorizedtype;
							var employee_topostdate = result[i].topostdate;
							infoStr = infoStr+"<tr style='cursor:pointer' id='tr_"+employee_no+"' onclick='newEmployeeInfoHtml(this)'><td>"+parseInt(i+1)+"</td><td>"+employee_name+"</td><td>"+employee_sex+"</td><td>"+employee_topostdate+"</td><td>"+employee_authorizedtype+"</td></tr>"

						}
						$("#employee_detail_title").nextAll().remove();
						$("#employee_detail_title").after(infoStr);
						$("#employee_detail_title").nextAll("tr:even").css("background-color","aliceblue");
						$("#employee_detail_title").nextAll("tr:odd").css("background-color","mintcream");
						showEmployeeInfo();
					}
		},false);
  }
  
  
  
  var windowIndex;
  //展示员工（国安侠、综合管理）
  function showEmployeeInfo(){
	  layer.close(windowIndex);
	  windowIndex = layer.open({
		  type: 1,
   		  title:  ['员工信息','color:#fff'],
   		  shadeClose: true,
   		  shade:[0.1, '#393D49'],
   		  closeBtn:2,
   		  moveOut:false,
   		  zIndex:1000000000,
   		  skin: 'layer-ext-crmskin',
   		  area: ['600px','290px'],
   		  offset: ['100px','466px'],
   		  content:$("#employee_detail_div"),
   		  success:function(layer,index){
   			 
   		  },
   		  cancel: function(index, layero){ 
   			 layer.close(index);
   			}  
   		});  
  }
  
  
  function initFWZYInfo(){
	  
	  var user={
			  store_id:storeId,
			  zw:'服务专员'
	  }
	  var infoStr="";
	  doManager("UserManager", "getEmployeeByStore",user,
				function(data, textStatus, XMLHttpRequest) {
					if (data.result) {
						var result = JSON.parse(data.data);
						var dataArr = new Array();
						
						for(var i=0;i<result.length;i++){
							
							var employee_name = result[i].name;
							var employee_no = result[i].employee_no;
							var employee_sex = result[i].sex;
							var employee_authorizedtype = result[i].authorizedtype;
							var employee_topostdate = result[i].topostdate;
							infoStr = infoStr+"<tr style='cursor:pointer' id='tr_"+employee_no+"' onclick='newEmployeeInfoHtml(this)'><td>"+parseInt(i+1)+"</td><td>"+employee_name+"</td><td>"+employee_sex+"</td><td>"+employee_topostdate+"</td><td>"+employee_authorizedtype+"</td></tr>"

						}
						$("#employee_detail_title").nextAll().remove();
						$("#employee_detail_title").after(infoStr);
						$("#employee_detail_title").nextAll("tr:even").css("background-color","aliceblue");
						$("#employee_detail_title").nextAll("tr:odd").css("background-color","mintcream");
						showEmployeeInfo();
					}
		},false);
  }

  
  //跳转到emoloyeeInfo.html
  function newEmployeeInfoHtml(t){
	  var employeeNo =   $(t).attr("id").split("_")[1];
	  var URL="employeeInfo.html?"+"employee_no="+encode64(employeeNo)+"&flag=0"+"&#tab_1";
	  window.open(URL); 
  }
  //返回省市
  function gopro(){
	  window.location.href="index_headquarters.html?p="+proId_ecode+"&c="+cityId_ecode+"&cn="+encode64(cityName_ecode)+"&zm="+zm+"&f="+from_store;
  }
  
  function goCountry(){
	  window.location.href="index_headquarters.html";
  }
  
  function lightPloygon(area_no){
		
		
		for(var i=0;i<polygonArray.length;i++){//片区管辖小区坐标高亮显示
			var areaNo = polygonArray[i].area_no;
			if(areaNo==area_no){
				polygonArray[i].tinyVillagePolygon.show();
			}else{
				polygonArray[i].tinyVillagePolygon.hide();
			}
		}
}

//鼠标离开展示所有小区区域
function showAllTinyArea(){
	   for(var m=0;m<polygonArrayCopy.length;m++){//所有小区坐标区域重置颜色
			
			polygonArrayCopy[m].tinyVillagePolygon.show();
		} 
	   
	    for(var j=0;j<tinyAreaArray.length;j++){//片区管辖小区坐标显示小区名称
			tinyAreaArray[j].tinyAreaMarker.hide();
		}
} 
	
	

function autodivheight(){ //函数：获取尺寸
    //获取浏览器窗口高度
    var winHeight=0;
    var winWidth=0;
    if (window.innerHeight){
        winHeight = window.innerHeight;
        winWidth= window.innerWidth;}
    else if ((document.body) && (document.body.clientHeight)){
        winHeight = document.body.clientHeight;
        winWidth = document.body.clientWidth;}
    //通过深入Document内部对body进行检测，获取浏览器窗口高度
    else if (document.documentElement && document.documentElement.clientHeight){
        winHeight = document.documentElement.clientHeight;
        winWidth = document.documentElement.clientWidth;}
    //DIV高度为浏览器窗口的高度
    //document.getElementById("test").style.height= winHeight +"px";
    //DIV高度为浏览器窗口高度的一半
    document.getElementById("mapHeight").style.height= winHeight+"px";
    document.getElementById("mapHeight").style.width= winWidth+"px";
    $("#mask-body").css({"top":"-22px"});
    $("#mask-body").css({"left":"0px"});
    $("#mapContainer").css({"border-radius":"0"});
    
}	


//付费用户
function goToNewaddcus(){
	 
	  var url = "dynamicData_newaddcus_analysis.html?t="+encode64(2)+"&c=&cn="+encode64(currentStore.cityName)+"&s="+ encode64(currentStore.store_id)+"&e="+encode64(-1)+"&sn="+encode64(currentStore.name)+"&#ff";
	  window.open(url,"dynamicData_newaddcus_analysis");
}
//复购用户
function goToRebuycus(){
	  var url = "dynamicData_newaddcus_analysis.html?t="+encode64(2)+"&c=&cn="+encode64(currentStore.cityName)+"&s="+ encode64(currentStore.store_id)+"&e="+encode64(-1)+"&sn="+encode64(currentStore.name)+"&#fg";
	  window.open(url,"dynamicData_newaddcus_analysis");
}
//交易额  
function goToStoretrade(){
	  var url = "dynamicData_storetrade_analysis.html?t="+encode64(2)+"&c=&cn="+encode64(currentStore.cityName)+"&s="+ encode64(currentStore.store_id)+"&e="+encode64(-1)+"&sn="+encode64(currentStore.name)+"&#fg";
	  window.open(url,"dynamicData_storetrade_analysis");
}
//送单量
function goToSendorders(){
	  var url = "dynamicData_sendorders_analysis.html?t="+encode64(2)+"&c=&cn="+encode64(currentStore.cityName)+"&s="+ encode64(currentStore.store_id)+"&e="+encode64(-1)+"&sn="+encode64(currentStore.name)+"&#ff";
	  window.open(url,"dynamicData_sendorders_analysis");
}

//好评次数
function goToRewardtimes(){
	  var url = "dynamicData_rewardtimes_analysis.html?t="+encode64(2)+"&c=&cn="+encode64(currentStore.cityName)+"&s="+ encode64(currentStore.store_id)+"&e="+encode64(-1)+"&sn="+encode64(currentStore.name)+"&#fg";
	  window.open(url,"dynamicData_rewardtimes_analysis");
}

	
var five;
function fullscreen(){
	  
	autodivheight();
  
    $("#mask").css("display","block");
 	$("#mapHeight").show();
 	$("#TULI").css("right","19px");
 	$("#mask-body").html($("#mapHeight"));
    
}



</script>
</body>

<div id="employee_detail_div" style="height:247px;display:none">
  	<table id="employee_detail_table" style="width:100%;text-align:center;border-collapse:separate;border-spacing:2px" border="0" cellspacing="3" cellpadding="2"  >
  	<tr style="height:25px;background-color:#11214e;color:white" id="employee_detail_title">
  		<td width="30px">序号</td>
  		<td>姓名</td>
  		<td>性别</td>
  		<td>入职日期</td>
  		<td>职务性质</td>
  	</tr>
  	</table>
</div>


</html>