<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>更多每日动态</title>
    <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />
  <!-- Tell the browser to be responsive to screen width -->
<meta content="width=device-width, initial-scale=0.3, maximum-scale=1, user-scalable=yes" name="viewport">  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="bootstrap/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="bootstrap/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
  <link rel="stylesheet" href="dist/css/top_style.css">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="IE 9/html5shiv.min.js"></script>
  <script src="IE 9/respond.min.js"></script>
  <![endif]-->
  <style>
     .box-default{border-bottom: 1px solid #e1e1e1;}
    .info_head{padding: 25px 0 35px 0;}
    .info_head img{width:123px; margin-top:10px;}
    .info_head span{padding-left: 20px;}
    .info_bottom{padding: 35px 20px 0 35px; font-size: 12px;}
    .info_bottom .text-right span{padding: 6px 12px; margin:0 20px 0 3px; display: inline-block;}
    .box .h4{padding-left:20px;}
    .nav-tabs-custom{padding:0 20px;}
    .nav-tabs{border:0;}
    .logo-lg li{float: left; position: relative;}

    .logo-lg i{color: #fff;}
    .nav_dropdown{ position: absolute;z-index: 10000; top: 70px; left: -10px; line-height: 22px; padding: 15px 25px; background-color: #15b092; display: none;}
    .nav_dropdown li{padding: 5px 0; line-height: 20px; white-space: nowrap; font-size: 14px;}
    .logo-lg > ul > li:hover > a{color: #001f3f; font-weight: bold;}
    .logo-lg > ul > li:hover i{ transform: rotate(180deg); transition: all 0.3s linear; color: #001f3f;}
    .content-header{margin: 0 auto;}
	
    .real-time{margin: 10px auto;}
    .hexagon{width: 100px; height: 100px; line-height: 100px; border-radius: 50%; margin: 5px auto 15px auto; font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; font-size: 20px; font-weight: bold;}
    .real-time h4{ font-weight: bold; font-size: 16px;}
    .real-time .col-lg-3:nth-child(1) .hexagon{color: #20d8a2; border: 1px solid #20d8a2;}
    .real-time .col-lg-3:nth-child(1) h4{color: #0e5741;}
    .real-time .col-lg-3:nth-child(2) .hexagon{color: #d5a5fb; border: 1px solid #d5a5fb;}
    .real-time .col-lg-3:nth-child(2) h4{color: #430c6e;}
    .real-time .col-lg-3:nth-child(3) .hexagon{color: #288aee; border: 1px solid #288aee;}
    .real-time .col-lg-3:nth-child(3) h4{color: #10375f;}
    .real-time .col-lg-3:nth-child(4) .hexagon{color: #dd4b39; border: 1px solid #dd4b39;}
    .real-time .col-lg-3:nth-child(4) h4{color: #721105;}
    .real-time .col-lg-3:nth-child(5) .hexagon{color: #f3b786; border: 1px solid #f3b786;}
    .real-time .col-lg-3:nth-child(5) h4{color: #563011;}
    .real-time .col-lg-3:nth-child(6) .hexagon{color: #fc98ab; border: 1px solid #fc98ab;}
    .real-time .col-lg-3:nth-child(6) h4{color: #490c17;}
    .real-time .col-lg-3:nth-child(7) .hexagon{color: #61cfbf; border: 1px solid #61cfbf;}
    .real-time .col-lg-3:nth-child(7) h4{color: #15403a;}
    .real-time .col-lg-3:nth-child(8) .hexagon{color: #5a99da; border: 1px solid #5a99da;}
    .real-time .col-lg-3:nth-child(8) h4{color: #112c48;}
    .real-time .col-lg-3:nth-child(9) .hexagon{color: #e46cd5; border: 1px solid #e46cd5;}
    .real-time .col-lg-3:nth-child(9) h4{color: #e46cd5;}
    .ranking{font-size: 16px; line-height: 40px;}
    .ranking .col-lg-1{font-size: 20px; padding-left: 5px;}
    .real_pai1{background: url("dist/img/pai1.png") no-repeat 0 8px; background-size:23px 23px; height: 35px;}
    .real_pai2{background: url("dist/img/pai2.png") no-repeat 0 8px; background-size:23px 23px; height: 35px;}
    .real_pai3{background: url("dist/img/pai3.png") no-repeat 0 8px; background-size:23px 23px; height: 35px;}
	.text-blue{color:#39a3dd !important}
	#process_div{ 
		background-color:#292a2b; 
		display:inline; 
		z-index:100000;  
		left:0px; 
		opacity:0.3; top:0; left:0;height:100%; width:100%; z-index:999; position:fixed; _position:absolute; _left: expression_r(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); _top: expression_r(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight);
		filter:Alpha(Opacity=30); 
		opacity: 0.3; 
	} 
	
	#process_div_pic{
		position:fixed;
		top:50%;
		left:50%; 
		z-index:100000000; 
		margin:-16px 0 0 -50px; 
		width:100px; 
		height:32px;
		color: #fff;
	}
  </style>
 
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<div id="process_div" ></div>
	<div id="process_div_pic" ><img style="width:50px;height: 50px;" src="dist/img/376884043677306248.png"><i class="fa fa-refresh fa-spin"></i></div>
<!-- Site wrapper -->
<div class="wrapper" style="background-color:#f1f1f1">

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <div class="container">
      <!-- Main content -->
       <section class="content-header">
       <div class="box box-default" style="margin-bottom:10px;">
       <h3 class="text-light-blue text-center"><strong>每日动态</strong></h3>
        <div class="real-time ranking clearfix">
          <div class="col-lg-4">
            <h4 style="margin-bottom: 20px;text-align:center">GMV排名</h4>
            <ul class="no-padding" id="gmv_ul">
            
            </ul>
          </div>

          <div class="col-lg-4">
            <h4 style="margin-bottom: 20px;text-align:center">订单排名</h4>
            <ul class="no-padding" id="order_ul">
              
            </ul>
          </div>

          <div class="col-lg-4">
            <h4 style="margin-bottom: 20px;text-align:center">拜访记录排名</h4>
            <ul class="no-padding" id="relation_ul">
            
            </ul>
          </div>

        </div>
        </div>
      </section>

      <!-- /.content -->
    </div>
  </div>
  <!-- /.content-wrapper -->

  

  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.0 -->
<script src="plugins/jQuery/jQuery-2.2.0.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- SlimScroll -->
<script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<script type="text/javascript" src="../scripts/bidLibjsjquery2.0.js"></script>
<script type="text/javascript" src="dist/js/top_style.js"></script>
<script type="text/javascript">
  var cityId = decode64(getUrlParamByKey("c"));//城市ID
  var employeeId = decode64(getUrlParamByKey("e"));//员工编号
  
  $(function(){
	  showDailyData();
  })
  

 function showDailyData(){
	  
	  var dynamicDto = {
			  cityId:cityId,
	  		  employeeId:employeeId,
	  		  limit:"N"
	  }
	  
	  doManager("dynamicManager", "getDailyData",[dynamicDto],
				function(data, textStatus, XMLHttpRequest) {
					
					if (data.result) {
						var resultJson= JSON.parse(data.data);
						
						if(resultJson==null){
							crm_alert(5,"系统错误，请重新请求！");
							$("#process_div").hide();
							$("#process_div_pic").hide();
							return;
						}else {
							
							if(resultJson.gmv_status=="fail"){
								crm_alert(5,JSON.parse(resultJson.gmv).message);
							}else{
								var dailyData_gmv = JSON.parse(resultJson.gmv).data;
								//$("#gmv_ul").empty();   
								
								for(var i=0;i<dailyData_gmv.length;i++){
									var color='style="text-align:center;"';
									if(i<10){
										color='style="text-align:center;color:red"';
									}
									var info = '<li>';
									if(i<3){
										info = info+'<div class="col-lg-1 real_pai'+(i+1)+' no-padding" '+color+'></div>';
									}else{
										info = info+'<div class="col-lg-1  no-padding" '+color+'>'+(i+1)+'</div>';
									}
									 info = info+
								                '<div class="col-lg-5 no-padding">'+dailyData_gmv[i].store_name+'</div>'+
								                '<div class="col-lg-6 no-padding">GMV：<b class="text-blue">'+dailyData_gmv[i].order_amount+'</b></div>'+
								               '</li>';
								             
								    $("#gmv_ul").append(info);      
								               
								}
							}
							
							if(resultJson.order_status=="fail"){
								crm_alert(5,JSON.parse(resultJson.gmv).message);
							}else{
								var dailyData_order = JSON.parse(resultJson.order).data;
								//$("#order_ul").empty();  
								for(var i=0;i<dailyData_order.length;i++){
									var color='style="text-align:center;"';
									if(i<10){
										color='style="text-align:center;color:red"';
									}
									var info = '<li>';
									if(i<3){
										info = info+'<div class="col-lg-1 real_pai'+(i+1)+' no-padding" '+color+'></div>';
									}else{
										info = info+'<div class="col-lg-1  no-padding" '+color+'>'+(i+1)+'</div>';
									}
									 info = info+
								                '<div class="col-lg-5 no-padding">'+dailyData_order[i].store_name+'</div>'+
								                '<div class="col-lg-6 no-padding">订单：<b class="text-blue">'+dailyData_order[i].order_count+'</b></div>'+
								               '</li>';
								               
								    $("#order_ul").append(info);      
								               
								}
							}
							
							
							if(resultJson.relation_status=="fail"){
								crm_alert(5,JSON.parse(resultJson.gmv).message);
								
							}else{
								var dailyData_relation = JSON.parse(resultJson.relation).data;
								//$("#relation_ul").empty();   
								for(var i=0;i<dailyData_relation.length;i++){
									var color='style="text-align:center;"';
									if(i<10){
										color='style="text-align:center;color:red"';
									}
									var info = '<li>';
									if(i<3){
										info = info+'<div class="col-lg-1 real_pai'+(i+1)+' no-padding" '+color+'></div>';
									}else{
										info = info+'<div class="col-lg-1  no-padding" '+color+'>'+(i+1)+'</div>';
									}
								      info = info+'<div class="col-lg-5 no-padding">'+dailyData_relation[i].storename+'</div>'+
								                '<div class="col-lg-6 no-padding">拜访记录：<b class="text-blue">'+dailyData_relation[i].num+'</b></div>'+
								               '</li>';
								             
								    $("#relation_ul").append(info);      
								               
								}
							}
							
							$("#process_div").hide();
							$("#process_div_pic").hide();
						}
					}
			},false);
	  
  }
  

  
  
  
</script>
</body>
</html>