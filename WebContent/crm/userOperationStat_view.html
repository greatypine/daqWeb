<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>用户运营</title>
   <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=0.3, maximum-scale=1, user-scalable=yes" name="viewport">  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="bootstrap/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="bootstrap/css/ionicons.min.css">
  <!-- iCheck for checkboxes and radio inputs -->
  <link rel="stylesheet" href="plugins/iCheck/all.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
  <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker-bs3.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="plugins/select2/select2.min.css">
  <link href="../scripts/css/auto.css" rel="stylesheet">
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="IE 9/html5shiv.min.js"></script>
  <script src="IE 9/respond.min.js"></script>
  <![endif]-->
  <style>
    .box-default{border-bottom: 1px solid #e1e1e1;height:100%; width:100%;}
    .info_head{padding: 25px 0 35px 0;}
    .info_head img{width:123px; margin-top:10px;}
    .info_head span{padding-left: 20px;}
    .info_bottom{padding: 35px 20px 0 35px; font-size: 12px;}
    .info_bottom .text-right span{padding: 6px 12px; margin:0 20px 0 3px; display: inline-block;}
    .box .h4{padding-left:20px;}
    .nav-tabs-custom > .nav-tabs > li.active{border-top-color:#3c8dbc!important}
	.nav-tabs-custom > .nav-tabs > li.active > a{background-color:#fff;color:#000;}
/*  	.nav-tabs-custom > .nav-tabs > li.active:hover > a {background-color: #transparent!important;color: #000;} */
    .logo-lg li{float: left; position: relative;}

    .logo-lg i{color: #fff;}
    .nav_dropdown{ position: absolute;z-index: 10000; top: 70px; left: -10px; line-height: 22px; padding: 15px 25px; background-color: #15b092; display: none;}
    .nav_dropdown li{padding: 5px 0; line-height: 20px; white-space: nowrap; font-size: 14px;}
    .table button{padding: 3px 20px; margin: 0 5px;}
	
	.tcdPageCode{padding: 15px 20px;text-align: left;color: #ccc;text-align:center;}
	.tcdPageCode a{display: inline-block;color: #428bca;display: inline-block;height: 25px;	line-height: 25px;	padding: 0 10px;border: 1px solid #ddd;	margin: 0 2px;border-radius: 4px;vertical-align: middle;}
	.tcdPageCode a:hover{text-decoration: none;border: 1px solid #428bca;}
	.tcdPageCode span.current{display: inline-block;height: 25px;line-height: 25px;padding: 0 10px;margin: 0 2px;color: #fff;background-color: #428bca;	border: 1px solid #428bca;border-radius: 4px;vertical-align: middle;}
	.tcdPageCode span.disabled{	display: inline-block;height: 25px;line-height: 25px;padding: 0 10px;margin: 0 2px;	color: #bfbfbf;background: #f2f2f2;border: 1px solid #bfbfbf;border-radius: 4px;vertical-align: middle;}
	.audit_process{ overflow-y: auto;  background: #f9f9f9; border-radius: 5px; padding:15px 0 20px 0;}
    .audit_process .clearfix{ padding:10px 30px;}
    .audit_margin{margin-right: 15px;}
	 #process_div{ 
			background-color:#292a2b; 
			display:inline; 
			z-index:100000;  
			left:0px; 
			opacity:0.3; top:0; left:0;height:100%; width:100%; z-index:999; position:fixed; _position:absolute; _left: expression_r(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); _top: expression_r(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight);
			filter:Alpha(Opacity=30); 
			opacity: 0.3; 
		} 
		
		#process_div_pic{
			position:fixed;
			top:50%;
			left:50%; 
			z-index:100000000; 
			margin:-16px 0 0 -50px; 
			width:100px; 
			height:32px;
			color: #fff;
		}
	/*搜索框*/
    .form-control{height: 30px; line-height: 30px; border-radius: 6px; padding: 3px 8px;}
    /*更多显示*/
    .show-more-line{width: 100%; height: 40px; border-top: 1px dashed #e6e6e6; position: relative; background-color: #f5f5f5;}
    .how-more{position: absolute; top: -1px; left: 50%; background-color: #fff; border-left: 1px solid #e6e6e6; border-right: 1px solid #e6e6e6; border-bottom: 1px solid #e6e6e6;  padding: 5px 15px; margin: 0 0 0 -40px; color: #888; cursor: pointer; font-size: 12px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
    .how-more i{padding-left: 5px; font-size: 14px;}
    .fold-con,.sl-btns{display: none;}
    .selectorLine{border-top: 1px dashed #e6e6e6; padding: 10px 0 0 0; position: relative;}
    .selectorLine a{float: left; height: 18px; line-height: 18px; padding: 0 3px; margin: 2px 12px 12px 0; white-space: nowrap;}
    .selectorLine a:nth-child(1){margin-left: 15px;}
    .selectorLine a:hover{background-color: #ff7701; color: #fff;} 
    .search-title{width: 80px; color: #777; white-space: nowrap; overflow: hidden; position: absolute; top: 10px; left: 0; text-align: right;}
    .search-con{margin-left: 80px; padding-right: 80px; overflow: hidden;}
    .sl-ext {position: absolute; top: 10px; right: 10px; width: 60px; height: auto; line-height: 22px; overflow: hidden; zoom: 1;}
    .search-more{width: 60px; height: 25px; line-height: 25px; padding: 0 7px 0 0; background: #fff; color: #333; border: 1px solid #ddd; font-size: 12px; position: relative; right: 0; top: 0;}
    .search-more i{position: absolute; top: 3px; right: 0; display: block; width: 20px; height: 20px; background-position: 4px 7px; font-size: 18px;}
     .search-more:hover{color: #e4393c;} 
    .search-more-open i{ -webkit-transform: rotateX(180deg); -o-transform: rotateX(180deg); -moz-transform: rotateX(180deg);}
    .sx_type{margin-top: 5px;}
    .sx_type span{padding-right: 5px;}
    .sx_type span .icheckbox_minimal-blue{margin-right: 2px;}
     /*筛选导航*/ 
     .breadcrumb{background: none;padding: 8px 10px 0 10px; line-height: 22px; position: relative; min-height: 45px; background-color: #fafafa;} 
     .breadcrumb a{position: relative; float: left; margin: 0 10px 10px 0; padding: 0 25px 0 5px; height: 25px; line-height: 25px; overflow: hidden; border: 1px solid #DDD; background-color: #f3f3f3; color: #333; font-size: 12px;} 
     .breadcrumb a span{margin-right: 3px;} 
     .breadcrumb a i{position: absolute; width: 25px; height: 22px; right: 0; top: 0; color: #999; padding: 6px 0 0 9px; height: 25px;}
     .breadcrumb a:hover{border: 1px solid #e4393c; background-color: #fff;} 
     .breadcrumb a:hover i{background-color: #e4393c; color: #fff;} 
    /*类型*/
    .leixing div{display: inline-block; position: relative; cursor: pointer;}
    .type_con{width: 65px; height: 45px; line-height: 45px; color: #fff; display: block; position: absolute; bottom: 20px; left: -20px; display: none;}
    .gonghai .type_con{background: url("dist/img/gonghai(1).png") no-repeat; background-size: 100% 100%;}
    .yichang .type_con{background: url("dist/img/gonghai(2).png") no-repeat; background-size: 100% 100%;}
    .gonghai:hover .type_con,.yichang:hover .type_con{display: block;}
    .fold-con{display: none;}
    .auto{max-height:200px; overflow-y:scroll;}
    .sl-v-list-radio input{margin:0px 0 0}
  </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div id="process_div" style="display:none"></div>
<div id="process_div_pic" style="display:none"><img style="width:50px;height: 50px;" src="dist/img/376884043677306248.png"><i class="fa fa-refresh fa-spin"></i></div>
<!-- Site wrapper -->
<div class="">

<header class="main-header">
    <nav class="navbar navbar-static-top">
      <div class="container">
					<div class="logo_img pull-left">
						<img src="dist/img/logo.png" height="30">
						<img src="dist/img/title.png" height="20">
					</div>
					<div class="pull-left">
						<div class="logo-lg">
							<ul class="no-margin">
								<li class="current"><em>用户运营</em></li>
							</ul>
						</div>
					</div>
      </div>
    </nav>
  </header>

<!--   <header class="main-header">
    <nav class="navbar navbar-static-top">
      <div class="container" >
        <div class="pull-left">
           <nav class="navbar navbar-static-top no-margin">
            <div class="logo-lg clearfix">
              <div class="logo-lg clearfix">
	            <ul>
	              <li><a href="javascript:parent.location.reload();" class="h2"> <img src="dist/img/logo.png"> </a></li>
	              <li class="nav-mark"><a href="#">营业额统计</a> </li>
	              <li></li>
	            </ul>
	          </div>
            </div>
          </nav>
        </div>
      </div>
    </nav>
  </header> -->


  <!-- =============================================== -->

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <div >
      <!-- Main content -->
      <section class="content-header">
        <div class="">  
            
            <div class="nav-tabs-custom">
		            <ul class="nav nav-tabs">
<!-- 		              <li class="active"><a href="#tab_1" data-toggle="tab" aria-expanded="true">按月统计拉新用户</a></li> -->
<!-- 		              <li class=""><a href="#tab_2" data-toggle="tab" aria-expanded="false">按月统计消费用户</a></li> -->
		              <li class="active"><a href="#tab_3" data-toggle="tab" aria-expanded="true">1人500户（国安侠）</a></li>
		              <li class=""><a href="#tab_7" data-toggle="tab" aria-expanded="false">1人500户（片区）</a></li>
		              <li class=""><a href="#tab_4" data-toggle="tab" aria-expanded="false">拉新用户</a></li>
		              <li class=""><a href="#tab_5" data-toggle="tab" aria-expanded="false">消费用户</a></li>
					  <li class="" id="li_tab_8" style="display:none"><a href="#tab_8" data-toggle="tab" aria-expanded="false">用户留存分析</a></li>
<!--  		              <li class=""><a href="#tab_6" data-toggle="tab" aria-expanded="false">1人500户（历史数据）</a></li> -->
		            </ul>
		            <div class="tab-content">
		              	<div class="tab-pane" id="tab_1">
		              	<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
					                <div class="form-group col-lg-3">
					                	<input id="auto_date_start" type="text" likeOption="false" name="start_date" class="wicon form-control"  style="width: 40%; display: inline;" />
                                    	至
                                    	<input id="auto_date_end" type="text" likeOption="false" name="end_date" class="wicon form-control" style="width: 40%; display: inline;" />
					                </div>
					                <div class="form-group col-lg-3">
					                	<select class="form-control select2" id="citySelect"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual" name="store_id_manual" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual" />
						              <div class="auto hidden" id="auto" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetSerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_cus_button" onclick="export_manual_newcus()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_abnormalOrder(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">片区</th>
					                  <th width="9%">拉新用户</th>
					                  <th width="9%">拉新用户超10元</th>
					                  <th width="9%">拉新用户超20元</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual" name="pageRecords_manual" onchange="chnagePageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual"></div>
					       	</div>
		             	</div>
		             </div>
		              <!-- /.tab-pane -->
		              <div class="tab-pane" id="tab_2">
		              		<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
				            		<div class="form-group col-lg-3">
						                <input id="auto_date_pay_start" type="text" likeOption="false" name="start_date" class="wicon form-control"  style="width: 40%; display: inline;" />
                                    	至
                                    	<input id="auto_date_pay_end" type="text" likeOption="false" name="end_date" class="wicon form-control" style="width: 40%; display: inline;" />
					                </div>
					                <div class="form-group col-lg-3">
					                <select class="form-control select2" id="citySelectPay"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual_pay" name="store_id_manual_pay" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual_pay" />
						              <div class="auto hidden" id="auto_pay" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetPaySerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_pay_button" onclick="export_manual_pay()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_pay(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_pay">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">片区</th>
					                  <th width="9%">消费用户</th>
					                  <th width="9%">消费用户超10元</th>
					                  <th width="9%">消费用户超20元</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual_pay" name="pageRecords_manual_pay" onchange="chnagePayPageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot_pay"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual_pay"></div>
					       	</div>
		             	</div>
		              </div>
		              <div class="tab-pane" id="tab_8">
		              	<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
					            	<div class="search-title">基准月：</div>
					            	<div class="search-con" style="overflow:visible;">
					            	<div class="sl-v-list">
					            	<div class="clearfix">
						                <div class="form-group col-lg-3">
						                	<input id="auto_date_start_basic" type="text" likeOption="false" name="start_date_basic" class="wicon form-control"  style="width: 70%; display: inline;" />
						                </div>
						                <div class="form-group col-lg-3">
						                	<select class="form-control select2" id="citySelectBasic"> 
						 	              	</select> 
						                </div>
					                </div>
				              		</div>
				             		</div>
			            		</div>
			            		<div class="selectorLine clearfix">
				                  <div class="pull-left search-title">类型标签：</div>
				                  <div class="search-con">
				                  	<div class="sl-v-list-radio">
				                      <input type="radio" name="paytype" value="newpay" id="radio1" checked="checked" />新增
								      <input type="radio" name="paytype" value="repay" id="radio2" />复购
								    </div>
				                  </div>
				                </div>
				            	<div class="selectorLine clearfix">
				                  <div class="pull-left search-title">维度标签：</div>
				                  <div class="search-con">
				                    <div class="sl-v-list">
				                      <a onclick="dimensionSelect('1')" style="cursor:pointer;" class="bg-orange-active">1个月</a>
				                      <a onclick="dimensionSelect('3')" style="cursor:pointer;">3个月</a>
				                      <a onclick="dimensionSelect('6')" style="cursor:pointer;">6个月</a>
				                      <a onclick="dimensionSelect('12')" style="cursor:pointer;">12个月</a>
				                      <input type="text" style="display:none" class="form-control" placeholder="快捷维度"  id="dimension_manual" value="1"/>
				                    </div>
				                  </div>
				                </div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetBasicSerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_basic_button" onclick="export_manual_basic()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_basic(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_basic">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>	
					                  <th width="9%">基准月</th>
					                  <th width="9%">基准月下单金额</th>
					                  <th width="9%">基准月客户数</th>
					                  <th width="9%">对比日期</th>
					                  <th width="9%">对比月下单金额</th>
					                  <th width="9%">对比月客户数</th>
					                  <th width="9%">留存率</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					       	</div>
		             	</div>
		             </div>
		              <div class="tab-pane active" id="tab_3">
		              		<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
				            		<div class="form-group col-lg-3"><input type="text" class="form-control pull-right" id="auto_date_more"  placeholder="点击选择日期" readonly="readonly"></div>
					                <div class="form-group col-lg-3">
					                <select class="form-control select2" id="citySelectMore"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual_more" name="store_id_manual_more" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual_more" />
						              <div class="auto hidden" id="auto_more" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetMoreSerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_more_button" onclick="export_manual_more()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_more(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_more">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">门店编号</th>
					                  <th width="9%">国安侠编号</th>
					                  <th width="9%">消费用户</th>
					                  <th width="9%">新增消费用户</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual_more" name="pageRecords_manual_more" onchange="chnageMorePageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot_more"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual_more"></div>
					       	</div>
		             	</div>
		              </div>
		              <div class="tab-pane" id="tab_7">
		              		<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
				            		<div class="form-group col-lg-3"><input type="text" class="form-control pull-right" id="auto_date_areamore"  placeholder="点击选择日期" readonly="readonly"></div>
					                <div class="form-group col-lg-3">
					                <select class="form-control select2" id="citySelectAreamore"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual_areamore" name="store_id_manual_areamore" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual_areamore" />
						              <div class="auto hidden" id="auto_areamore" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetAreamoreSerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_areamore_button" onclick="export_manual_areamore()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_areamore(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_areamore">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">门店编号</th>
					                  <th width="9%">片区编号</th>
					                  <th width="9%">A国安侠编号</th>
					                  <th width="9%">消费用户</th>
					                  <th width="9%">新增消费用户</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual_areamore" name="pageRecords_manual_areamore" onchange="chnageAreamorePageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot_areamore"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual_areamore"></div>
					       	</div>
		             	</div>
		              </div>
		              <div class="tab-pane" id="tab_4">
		              	<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
				            		<div class="form-group col-lg-3"><input type="text" class="form-control pull-right" id="auto_date_daynewcus"  placeholder="点击选择日期" readonly="readonly"></div>
					                <div class="form-group col-lg-3">
					                <select class="form-control select2" id="citySelectDaynewcus"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual_daynewcus" name="store_id_manual_daynewcus" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual_daynewcus" />
						              <div class="auto hidden" id="auto_daynewcus" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetDaynewcusSerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_daynewcus_button" onclick="export_manual_daynewcus()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_daynewcus(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_daynewcus">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">片区编号</th>
					                  <th width="9%">拉新用户</th>
					                  <th width="9%">拉新用户超10元</th>
					                  <th width="9%">拉新用户超20元</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual_daynewcus" name="pageRecords_manual_daynewcus" onchange="chnageDaynewcusPageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot_daynewcus"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual_daynewcus"></div>
					       	</div>
		             	</div>
		             </div>
		             <div class="tab-pane" id="tab_5">
		             	<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
				            		<div class="form-group col-lg-3"><input type="text" class="form-control pull-right" id="auto_date_daypay"  placeholder="点击选择日期" readonly="readonly"></div>
					                <div class="form-group col-lg-3">
					                <select class="form-control select2" id="citySelectDaypay"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual_daypay" name="store_id_manual_daypay" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual_daypay" />
						              <div class="auto hidden" id="auto_daypay" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetDaypaySerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_daypay_button" onclick="export_manual_daypay()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_daypay(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_daypay">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">片区编号</th>
					                  <th width="9%">消费用户</th>
					                  <th width="9%">消费用户超10元</th>
					                  <th width="9%">消费用户超20元</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual_daypay" name="pageRecords_manual_daypay" onchange="chnageDaypayPageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot_daypay"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual_daypay"></div>
					       	</div>
		             	</div>
		             </div>
		             <div class="tab-pane" id="tab_6">
		             	<div class="box-body">
				          	<div class="clearfix search-criteria">
				            	<small class="text-red" style="padding-left: 10px;">注意：本页提供2018.01.01之前的数据。</small>
				            	<div class="selectorLine clearfix no-border">
				            	<div class="search-title">统计范围：</div>
				            	<div class="search-con" style="overflow:visible;">
				            	<div class="sl-v-list">
				            	<div class="clearfix">
				            		<div class="form-group col-lg-3">
						                <input id="auto_date_daymore_start" type="text" likeOption="false" name="start_date" class="wicon form-control"  style="width: 40%; display: inline;" />
                                    	至
                                    	<input id="auto_date_daymore_end" type="text" likeOption="false" name="end_date" class="wicon form-control" style="width: 40%; display: inline;" />
					                </div>
					                <div class="form-group col-lg-3">
					                <select class="form-control select2" id="citySelectDaymore"> 
					 	              	</select> 
					                </div>
					                <div class="form-group col-lg-3"><input id="store_id_manual_daymore" name="store_id_manual_daymore" type="hidden" bidTableFlag="true" value=""/>
						              <input type="text" class="form-control"  placeholder="门店" id="store_name_manual_daymore" />
						              <div class="auto hidden" id="auto_daymore" style="width: 94%;z-index: 99999;">
						              </div>
						            </div>
				                </div>
			              		</div>
			             		</div>
			            		</div>
			            	</div>
			            	<div class="clearfix">
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="resetDaymoreSerachParam(2)" style="border-color:#00a65a;background-color:#00a652" class="btn btn-block btn-primary">重置</button>
				                </div>
				                <div class="col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" id="export_manual_daymore_button" onclick="export_manual_daymore()" class="btn btn-block btn-warning">导出</button>
				                </div>
				                <div class="form-group col-lg-2 pull-right" style="padding-top: 25px;">
				                    <button type="button" onclick="search_manual_daymore(1)" class="btn btn-block btn-primary">查询</button>
				                </div>
				            </div>
				            <div class="box-body">
					            <div class="tab-content">
					              <table class="table table-striped no-margin">
					                <tbody id="manual_tbody_daymore">
					                <tr id="manual_title">
					                  <th width="9%">城市</th>
					                  <th width="9%">门店</th>
					                  <th width="9%">门店编号</th>
					                  <th width="9%">国安侠编号</th>
					                  <th width="9%">消费用户</th>
					                  <th width="9%">新增消费用户</th>
					                </tr>
					                </tbody>
					              </table>
					            
					              <!-- /.tab-pane -->
					            </div>
					            <div style="position:absolute;bottom:20px;left:27px;width:25%">显示 <select id="pageRecords_manual_daymore" name="pageRecords_manual_daymore" onchange="chnageDaymorePageRecords(2)"  style="height:25px;line-height:25px;border-radius:4px;"><option value="10" selected="selected">10</option><option value="50">50</option><option value="100">100</option></select> 条 &nbsp;&nbsp; 共  <span id="totalRecord_cannot_daymore"></span> 条</div>
					            <div class="tcdPageCode" id="page_manual_daymore"></div>
					       	</div>
		             	</div>
		             </div>
		            </div>
	          	</div>
            
            
			</div>            
          </section>
          </div>
        </div>

    </div>
  </div>
  <!-- /.content-wrapper -->


</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.0 -->
<script src="plugins/jQuery/jQuery-2.2.0.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- Select2 -->
<script src="plugins/select2/select2.full.min.js"></script>
<!-- iCheck 1.0.1 -->
<script src="plugins/iCheck/icheck.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- page script -->
<script type="text/javascript" src="plugins/jquery.page.js"></script>
<script type="text/javascript" src="plugins/moment.min.js"></script>
<script type="text/javascript" src="plugins/daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="../scripts/bidLibjsjquery3.0.js"></script>
<script type="text/javascript" src="../scripts/jedate/jedate.js"></script>
<script type="text/javascript" src="../scripts/auto.js"></script>
<script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>
<script tyle="text/javascript">
<!--target(数据查询层级) 0：总部  1:城市级别 2：门店 3:业务事业群-->
Date.prototype.format=function(fmt) {        
    var o = {        
    "M+" : this.getMonth()+1, //月份        
    "d+" : this.getDate(), //日        
    "h+" : this.getHours()%12 == 0 ? 12 : this.getHours()%12, //小时        
    "H+" : this.getHours(), //小时        
    "m+" : this.getMinutes(), //分        
    "s+" : this.getSeconds(), //秒        
    "q+" : Math.floor((this.getMonth()+3)/3), //季度        
    "S" : this.getMilliseconds() //毫秒        
    };        
    var week = {        
    "0" : "\u65e5",        
    "1" : "\u4e00",        
    "2" : "\u4e8c",        
    "3" : "\u4e09",        
    "4" : "\u56db",        
    "5" : "\u4e94",        
    "6" : "\u516d"       
    };        
    if(/(y+)/.test(fmt)){        
        fmt=fmt.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length));        
    }        
    if(/(E+)/.test(fmt)){        
        fmt=fmt.replace(RegExp.$1, ((RegExp.$1.length>1) ? (RegExp.$1.length>2 ? "\u661f\u671f" : "\u5468") : "")+week[this.getDay()+""]);        
    }        
    for(var k in o){        
        if(new RegExp("("+ k +")").test(fmt)){        
            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));        
        }        
    }        
    return fmt;        
} 


 layer.config({
	
	  extend: 'skin/crmskin/style.css' //加载新皮肤
	  
	});
 
 	var cityId = decode64(getUrlParamByKey("c"));//城市ID
 	var initCity = cityId;
	var employeeId = decode64(getUrlParamByKey("e"));//员工ID
	var storeId = decode64(getUrlParamByKey("s"));//门店ID
	var storeNo = decode64(getUrlParamByKey("so"));//门店no
	var target = decode64(getUrlParamByKey("t"));//执行人级别 
	var storeName=decode64(getUrlParamByKey("sn"));//门店名称
	var storeno = decode64(getUrlParamByKey("so"));//门店编号
	var role = decode64(getUrlParamByKey("r"));//角色 code
	var cityname = decode64(getUrlParamByKey("cn"));//城市名称
	var deptname = decode64(getUrlParamByKey("dn"));//事业部名称
	
	
  $(function () {
    $(".logo-lg > ul > li").mouseenter(function(){
      $(this).children(".nav_dropdown").show();
    });
    $(".logo-lg > ul > li").mouseleave(function(){
      $(this).children(".nav_dropdown").hide();
    });
    
    $('#auto_date_more').daterangepicker({
    	minDate:new Date('2018/01/01'),
        maxDate:new Date()
    });
    $('#auto_date_areamore').daterangepicker({
    	minDate:new Date('2018/01/01'),
        maxDate:new Date()
    });
    $('#auto_date_daynewcus').daterangepicker({
    	minDate:new Date('2018/01/01'),
        maxDate:new Date()
    });
    $('#auto_date_daypay').daterangepicker({
    	minDate:new Date('2018/01/01'),
        maxDate:new Date()
    });
    
    jeDate({
        dateCell:"#auto_date_start",//zIndex:2000
        format:"YYYY-MM",
        isinitVal:true,
        isTime:false
    });

    jeDate({
        dateCell:"#auto_date_end",//isinitVal:true,
        format:"YYYY-MM",
        isinitVal:true,
        isTime:false
    });
    
    jeDate({
        dateCell:"#auto_date_pay_start",//zIndex:2000
        format:"YYYY-MM",
        isinitVal:true,
        isTime:false
    });

    jeDate({
        dateCell:"#auto_date_pay_end",//isinitVal:true,
        format:"YYYY-MM",
        isinitVal:true,
        isTime:false
    });
    
     jeDate({
         dateCell:"#auto_date_daymore_start",//zIndex:2000
         format:"YYYY-MM",
         isinitVal:true,
         isTime:false
     });

     jeDate({
         dateCell:"#auto_date_daymore_end",//isinitVal:true,
         format:"YYYY-MM",
         isinitVal:true,
         isTime:false
     });
    
    jeDate({
        dateCell:"#auto_date_start_basic",//isinitVal:true,
        format:"YYYY-MM",
        isinitVal:true,
        isTime:false
    });
    
    var firstDate = new Date();
 	var curDate = new Date();
 	var bdate = firstDate.format('yyyy/MM/dd');
 	var cDate = curDate.format('yyyy/MM/dd');
 	$("#auto_date_more").val(bdate+" - "+cDate);
 	$("#auto_date_areamore").val(bdate+" - "+cDate);
 	$("#auto_date_daynewcus").val(bdate+" - "+cDate);
 	$("#auto_date_daypay").val(bdate+" - "+cDate);
 
    var regex_yw = new RegExp("^(YW|yw)\w*");//业务（事业部）
    if(target==0){//总部
    	var liTab=document.getElementById("li_tab_8");
    	liTab.style.display="block";
    	
    	initallcity(); 
    	initallstore();
    	initallstorePay();
    	initallstoreMore();
    	initallstoreAreamore();
    	initallstoreDaynewcus();
    	initallstoreDaypay();
     	initallstoreDaymore();
    }else if(target==1){//城市级别
    	var liTab=document.getElementById("li_tab_8");
    	liTab.style.display="block";
    	
    	initcurcity();
    	$("#citySelect").prop("disabled", true);
    	$("#citySelectPay").prop("disabled", true);
    	$("#citySelectBasic").prop("disabled", true);
    	$("#citySelectMore").prop("disabled", true);
    	$("#citySelectAreamore").prop("disabled", true);
    	$("#citySelectDaynewcus").prop("disabled", true);
    	$("#citySelectDaypay").prop("disabled", true);
    	$("#citySelectDaymore").prop("disabled", true);
    	$("#citySelect option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectPay option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectBasic option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectMore option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectAreamore option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectDaynewcus option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectDaypay option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectDaymore option[value='"+cityname+"']").attr('selected',true);
    	initStoreSelectcomplate();
    	initStoreSelectcomplatePay();
    	initStoreSelectcomplateMore();
    	initStoreSelectcomplateAreamore();
    	initStoreSelectcomplateDaynewcus();
    	initStoreSelectcomplateDaypay();
     	initStoreSelectcomplateDaymore();
    }else if(target==2) {//门店
    	var tab=document.getElementById("tab_8");
    	tab.style.display="none";	
    
    	initcurcity();
    	$("#citySelect").prop("disabled", true);
    	$("#citySelectPay").prop("disabled", true);
    	$("#citySelectMore").prop("disabled", true);
    	$("#citySelectAreamore").prop("disabled", true);
    	$("#citySelectDaynewcus").prop("disabled", true);
    	$("#citySelectDaypay").prop("disabled", true);
    	$("#citySelectDaymore").prop("disabled", true);
		$("#citySelect option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectPay option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectMore option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectAreamore option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectDaynewcus option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectDaypay option[value='"+cityname+"']").attr('selected',true);
		$("#citySelectDaymore option[value='"+cityname+"']").attr('selected',true);
		initStoreSelectcomplate();
    	initStoreSelectcomplatePay();
    	initStoreSelectcomplateMore();
    	initStoreSelectcomplateAreamore();
    	initStoreSelectcomplateDaynewcus();
    	initStoreSelectcomplateDaypay();
     	initStoreSelectcomplateDaymore();
    	$("#store_id_manual").val(storeNo);
    	$("#store_id_manual_pay").val(storeNo);
    	$("#store_id_manual_more").val(storeNo);
    	$("#store_id_manual_areamore").val(storeNo);
    	$("#store_id_manual_daynewcus").val(storeNo);
    	$("#store_id_manual_daypay").val(storeNo);
    	$("#store_name_manual").val(storeName);
    	$("#store_name_manual_pay").val(storeName);
    	$("#store_name_manual_more").val(storeName);
    	$("#store_name_manual_areamore").val(storeName);
    	$("#store_name_manual_daynewcus").val(storeName);
    	$("#store_name_manual_daypay").val(storeName);
    	$("#store_name_manual_daymore").val(storeName);
		$("#store_name_manual").attr("readonly",true);
		$("#store_name_manual_pay").attr("readonly",true);
		$("#store_name_manual_more").attr("readonly",true);
		$("#store_name_manual_areamore").attr("readonly",true);
		$("#store_name_manual_daynewcus").attr("readonly",true);
		$("#store_name_manual_daypay").attr("readonly",true);
		$("#store_name_manual_daymore").attr("readonly",true);
    }
    
      //iCheck for checkbox and radio inputs
      $('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({
        checkboxClass: 'icheckbox_minimal-blue',
        radioClass: 'iradio_minimal-blue'
      });
      //Red color scheme for iCheck
      $('input[type="checkbox"].minimal-red, input[type="radio"].minimal-red').iCheck({
        checkboxClass: 'icheckbox_minimal-red',
        radioClass: 'iradio_minimal-red'
      });
      //Flat red color scheme for iCheck
      $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
        checkboxClass: 'icheckbox_flat-green',
        radioClass: 'iradio_flat-green'
      });
    var autoComplete = new AutoComplete("store_name_manual","auto",array);
  	document.getElementById("store_name_manual").onkeyup = function(event){
  		autoComplete.start(event);
  		if($("#store_name_manual").val().trim() == ""){
			$("#store_id_manual").val("");
		}
  		for(var key in storeJson){
  			if(document.getElementById("store_name_manual").value==key){
  				document.getElementById("store_id_manual").value=storeJson[key];
  			}
  		}
  	}
  	$("#auto").on("click",function(event){
		for(var key in storeJson){
			if(document.getElementById("store_name_manual").value==key){
				document.getElementById("store_id_manual").value=storeJson[key];
			}
		}
	});
  	
  	var autoCompletePay = new AutoComplete("store_name_manual_pay","auto_pay",array_pay);
  	document.getElementById("store_name_manual_pay").onkeyup = function(event){
  		autoCompletePay.start(event);
  		if($("#store_name_manual_pay").val().trim() == ""){
			$("#store_id_manual_pay").val("");
		}
  		for(var key in storeJsonPay){
  			if(document.getElementById("store_name_manual_pay").value==key){
  				document.getElementById("store_id_manual_pay").value=storeJsonPay[key];
  			}
  		}
  	}
  	$("#auto_pay").on("click",function(event){
		for(var key in storeJsonPay){
			if(document.getElementById("store_name_manual_pay").value==key){
				document.getElementById("store_id_manual_pay").value=storeJsonPay[key];
			}
		}
	});
  	
  	var autoCompleteMore = new AutoComplete("store_name_manual_more","auto_more",array_more);
  	document.getElementById("store_name_manual_more").onkeyup = function(event){
  		autoCompleteMore.start(event);
  		if($("#store_name_manual_more").val().trim() == ""){
			$("#store_id_manual_more").val("");
		}
  		for(var key in storeJsonMore){
  			if(document.getElementById("store_name_manual_more").value==key){
  				document.getElementById("store_id_manual_more").value=storeJsonMore[key];
  			}
  		}
  	}
  	$("#auto_more").on("click",function(event){
		for(var key in storeJsonMore){
			if(document.getElementById("store_name_manual_more").value==key){
				document.getElementById("store_id_manual_more").value=storeJsonMore[key];
			}
		}
	});
  	
  	var autoCompleteAreamore = new AutoComplete("store_name_manual_areamore","auto_areamore",array_areamore);
  	document.getElementById("store_name_manual_areamore").onkeyup = function(event){
  		autoCompleteAreamore.start(event);
  		if($("#store_name_manual_areamore").val().trim() == ""){
			$("#store_id_manual_areamore").val("");
		}
  		for(var key in storeJsonAreamore){
  			if(document.getElementById("store_name_manual_areamore").value==key){
  				document.getElementById("store_id_manual_areamore").value=storeJsonAreamore[key];
  			}
  		}
  	}
  	$("#auto_areamore").on("click",function(event){
		for(var key in storeJsonAreamore){
			if(document.getElementById("store_name_manual_areamore").value==key){
				document.getElementById("store_id_manual_areamore").value=storeJsonAreamore[key];
			}
		}
	});
  	
  	var autoCompleteDaynewcus = new AutoComplete("store_name_manual_daynewcus","auto_daynewcus",array_daynewcus);
  	document.getElementById("store_name_manual_daynewcus").onkeyup = function(event){
  		autoCompleteDaynewcus.start(event);
  		if($("#store_name_manual_daynewcus").val().trim() == ""){
			$("#store_id_manual_daynewcus").val("");
		}
  		for(var key in storeJsonDaynewcus){
  			if(document.getElementById("store_name_manual_daynewcus").value==key){
  				document.getElementById("store_id_manual_daynewcus").value=storeJsonDaynewcus[key];
  			}
  		}
  	}
  	$("#auto_daynewcus").on("click",function(event){
		for(var key in storeJsonDaynewcus){
			if(document.getElementById("store_name_manual_daynewcus").value==key){
				document.getElementById("store_id_manual_daynewcus").value=storeJsonDaynewcus[key];
			}
		}
	});
  	
  	var autoCompleteDaypay = new AutoComplete("store_name_manual_daypay","auto_daypay",array_daypay);
  	document.getElementById("store_name_manual_daypay").onkeyup = function(event){
  		autoCompleteDaypay.start(event);
  		if($("#store_name_manual_daypay").val().trim() == ""){
			$("#store_id_manual_daypay").val("");
		}
  		for(var key in storeJsonDaypay){
  			if(document.getElementById("store_name_manual_daypay").value==key){
  				document.getElementById("store_id_manual_daypay").value=storeJsonDaypay[key];
  			}
  		}
  	}
  	$("#auto_daypay").on("click",function(event){
		for(var key in storeJsonDaypay){
			if(document.getElementById("store_name_manual_daypay").value==key){
				document.getElementById("store_id_manual_daypay").value=storeJsonDaypay[key];
			}
		}
	});
  	
//    	var autoCompleteDaymore = new AutoComplete("store_name_manual_daymore","auto_daymore",array_daymore);
//    	document.getElementById("store_name_manual_daymore").onkeyup = function(event){
//    		autoCompleteDaymore.start(event);
//    		if($("#store_name_manual_daymore").val().trim() == ""){
//  			$("#store_id_manual_daymore").val("");
//  		}
//    		for(var key in storeJsonDaymore){
//    			if(document.getElementById("store_name_manual_daymore").value==key){
//    				document.getElementById("store_id_manual_daymore").value=storeJsonDaymore[key];
//    			}
//    		}
//    	}
//    	$("#auto_daymore").on("click",function(event){
//  		for(var key in storeJsonDaymore){
//  			if(document.getElementById("store_name_manual_daymore").value==key){
//  				document.getElementById("store_id_manual_daymore").value=storeJsonDaymore[key];
//  			}
//  		}
//  	});
  	
  	$(".sl-v-list a").click(function(){
        if($(this).hasClass('bg-orange-active')){
         	$(this).removeClass('bg-orange-active');
	        var curValue = $(this).text();
	        var name = curValue.substring(0,curValue.length-2);
	  		var deptName = $("#dimension_manual").val();
	  		$("#dimension_manual").val(deptName.replace(name,""));
        }else {
        	$(".sl-v-list a").removeClass("bg-orange-active");
        	$("#dimension_manual").val("");
          	$(this).addClass("bg-orange-active");
          	var curValue = $(this).text();
	        var name = curValue.substring(0,curValue.length-2);
	  		$("#dimension_manual").val(name);
        }
    });
  	
  });
	
  /**
   * 访问系统功能统计
   * @businessType
   * @modulefunc
   * @returnCitySN
   * @usertype
   * @token
   */
  function saveAccessModuleLog(businessType,modulefunc,returnCitySN,usertype,token){
  		var loguser={};
  		loguser.citynames=returnCitySN.cname;
  		loguser.loginip=returnCitySN.cip;
  		loguser.token=token;
  		loguser.businessType=businessType;
  		loguser.modulefunc=modulefunc;
  		loguser.usertype=usertype;
  		doManager("UserAccessModuleLogManager","saveAccessModuleLog",[loguser], function(data, textStatus, XMLHttpRequest){
  		},false); 
  	}
	
     function initallcity(){
 		doManager("DistCityCodeManager","queryAllDistCityList",null,
 		    function(data,textStatus,XmlHttpRequest){
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					$("#citySelect").append("<option value=''>全部城市</option>");
 					$("#citySelectPay").append("<option value=''>全部城市</option>");
 					$("#citySelectBasic").append("<option value=''>全部城市</option>");
 					$("#citySelectMore").append("<option value=''>全部城市</option>");
 					$("#citySelectAreamore").append("<option value=''>全部城市</option>");
 					$("#citySelectDaynewcus").append("<option value=''>全部城市</option>");
 					$("#citySelectDaypay").append("<option value=''>全部城市</option>");
 					$("#citySelectDaymore").append("<option value=''>全部城市</option>");
 					$(jsonData).each(function(index,element){
 						$("#citySelect").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectPay").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectBasic").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectMore").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectAreamore").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectDaynewcus").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectDaypay").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectDaymore").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
                     });
 				}
 		});
 	} 
     
    var array=new Array();
    var array_pay=new Array();
    var array_more=new Array();
    var array_areamore=new Array();
    var array_daynewcus=new Array();
    var array_daypay=new Array();
    var array_daymore=new Array();
 	//初始化所有门店 
 	function initallstore() {
 		doManager("StoreManager", "findStoreAll", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array.push(jsonData[i].name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}
 					}
 					storeJson=$.fromJSON(storeString);
 					var autoComplete = new AutoComplete("store_name_manual","auto",array);
					document.getElementById("store_name_manual").onkeyup = function(event){
						autoComplete.start(event);
						if($("#store_name_manual").val().trim() == ""){
							$("#store_id_manual").val("");
						}
						document.getElementById("store_name_manual").value=document.getElementById("store_name_manual").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}
 	
 	function initallstorePay() {
 		doManager("StoreManager", "findStoreAll", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array_pay = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array_pay.push(jsonData[i].name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}
 					}
 					storeJsonPay=$.fromJSON(storeString);
 					var autoCompletePay = new AutoComplete("store_name_manual_pay","auto_pay",array_pay);
					document.getElementById("store_name_manual_pay").onkeyup = function(event){
						autoCompletePay.start(event);
						if($("#store_name_manual_pay").val().trim() == ""){
							$("#store_id_manual_pay").val("");
						}
						document.getElementById("store_name_manual_pay").value=document.getElementById("store_name_manual_pay").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}
 	
 	function initallstoreMore() {
 		doManager("StoreManager", "findStoreAll", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array_more = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array_more.push(jsonData[i].name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}
 					}
 					storeJsonMore=$.fromJSON(storeString);
 					var autoCompleteMore = new AutoComplete("store_name_manual_more","auto_more",array_more);
					document.getElementById("store_name_manual_more").onkeyup = function(event){
						autoCompleteMore.start(event);
						if($("#store_name_manual_more").val().trim() == ""){
							$("#store_id_manual_more").val("");
						}
						document.getElementById("store_name_manual_more").value=document.getElementById("store_name_manual_more").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}
 	
 	function initallstoreAreamore() {
 		doManager("StoreManager", "findStoreAll", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array_areamore = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array_areamore.push(jsonData[i].name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}
 					}
 					storeJsonAreamore=$.fromJSON(storeString);
 					var autoCompleteAreamore = new AutoComplete("store_name_manual_areamore","auto_areamore",array_areamore);
					document.getElementById("store_name_manual_areamore").onkeyup = function(event){
						autoCompleteAreamore.start(event);
						if($("#store_name_manual_areamore").val().trim() == ""){
							$("#store_id_manual_areamore").val("");
						}
						document.getElementById("store_name_manual_areamore").value=document.getElementById("store_name_manual_areamore").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}
 	
 	function initallstoreDaynewcus() {
 		doManager("StoreManager", "findStoreAll", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array_daynewcus = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array_daynewcus.push(jsonData[i].name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}
 					}
 					storeJsonDaynewcus=$.fromJSON(storeString);
 					var autoCompleteDaynewcus = new AutoComplete("store_name_manual_daynewcus","auto_daynewcus",array_daynewcus);
					document.getElementById("store_name_manual_daynewcus").onkeyup = function(event){
						autoCompleteDaynewcus.start(event);
						if($("#store_name_manual_daynewcus").val().trim() == ""){
							$("#store_id_manual_daynewcus").val("");
						}
						document.getElementById("store_name_manual_daynewcus").value=document.getElementById("store_name_manual_daynewcus").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}
 	
 	function initallstoreDaypay() {
 		doManager("StoreManager", "findStoreAll", null,
 			function(data, textStatus, XMLHttpRequest) {
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					array_daypay = new Array();
 					var storeString = "";
 					for(i=0;i<jsonData.length;i++){
 						array_daypay.push(jsonData[i].name);
 						if(i == 0){
 							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}else if(i == jsonData.length-1){
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
 						}else{
 							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
 						}
 					}
 					storeJsonDaypay=$.fromJSON(storeString);
 					var autoCompleteDaypay = new AutoComplete("store_name_manual_daypay","auto_daypay",array_daypay);
					document.getElementById("store_name_manual_daypay").onkeyup = function(event){
						autoCompleteDaypay.start(event);
						if($("#store_name_manual_daypay").val().trim() == ""){
							$("#store_id_manual_daypay").val("");
						}
						document.getElementById("store_name_manual_daypay").value=document.getElementById("store_name_manual_daypay").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
					}
 				}
 			}, false);
 	}
 	
  	function initallstoreDaymore() {
  		doManager("StoreManager", "findStoreAll", null,
  			function(data, textStatus, XMLHttpRequest) {
  				if (data.result) {
  					var jsonData = $.fromJSON(data.data);
  					array_daymore = new Array();
  					var storeString = "";
  					for(i=0;i<jsonData.length;i++){
  						array_daymore.push(jsonData[i].name);
  						if(i == 0){
  							storeString = "{'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
  						}else if(i == jsonData.length-1){
  							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+"}";
  						}else{
  							storeString = storeString+"'"+jsonData[i].name+"'"+":"+"'"+jsonData[i].storeno+"'"+",";
  						}
  					}
  					storeJsonDaymore=$.fromJSON(storeString);
  					var autoCompleteDaymore = new AutoComplete("store_name_manual_daymore","auto_daymore",array_daymore);
 					document.getElementById("store_name_manual_daymore").onkeyup = function(event){
 						autoCompleteDaymore.start(event);
 						if($("#store_name_manual_daymore").val().trim() == ""){
 							$("#store_id_manual_daymore").val("");
 						}
 						document.getElementById("store_name_manual_daymore").value=document.getElementById("store_name_manual_daymore").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
 					}
  				}
  			}, false);
  	}
 	
     function initcurcity(){
 		doManager("userManager","getCurrentUserCity",null,
 		    function(data,textStatus,XmlHttpRequest){
 				if (data.result) {
 					var jsonData = $.fromJSON(data.data);
 					$(jsonData).each(function(index,element){
 						$("#citySelect").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectPay").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectBasic").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectMore").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectAreamore").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectDaynewcus").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectDaypay").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
 						$("#citySelectDaymore").append('<option value="'+element.cityname+'">'+element.cityname+'</option>');
                     });
 					
 				}
 		},false);
 	}
    
     $("#citySelect").change(function(){
 		$("#store_id_manual").val("");
 		$("#store_name_manual").val("");
 		initStoreSelectcomplate();
 	});
     
     $("#citySelectPay").change(function(){
  		$("#store_id_manual_pay").val("");
  		$("#store_name_manual_pay").val("");
  		initStoreSelectcomplatePay();
  	});
     
     $("#citySelectMore").change(function(){
   		$("#store_id_manual_more").val("");
   		$("#store_name_manual_more").val("");
   		initStoreSelectcomplateMore();
   	});
     
     $("#citySelectAreamore").change(function(){
    	$("#store_id_manual_areamore").val("");
    	$("#store_name_manual_areamore").val("");
    	initStoreSelectcomplateAreamore();
    });
     
     $("#citySelectDaynewcus").change(function(){
   		$("#store_id_manual_daynewcus").val("");
   		$("#store_name_manual_daynewcus").val("");
   		initStoreSelectcomplateDaynewcus();
    });
     
     $("#citySelectDaypay").change(function(){
    		$("#store_id_manual_daypay").val("");
    		$("#store_name_manual_daypay").val("");
    		initStoreSelectcomplateDaypay();
     });
     
     $("#citySelectDaymore").change(function(){
 		$("#store_id_manual_daymore").val("");
 		$("#store_name_manual_daymore").val("");
 		initStoreSelectcomplateDaymore();
  	 });
     
     var storeJson;
 	function initStoreSelectcomplate(){
 		var citySelect = $("#citySelect  option:selected").val();
 		if(citySelect==""){
 			initallstore();
 		}else{
 			//根据城市查询门店 信息
 			var cityname = "'"+citySelect+"'";
 			doManager("StoreManager","findStoreByCityData",[cityname],
 			    function(data,textStatus,XmlHttpRequest){
 					if (data.result) {
 						var jsonData = $.fromJSON(data.data);
 						array=new Array();
 						var storeString = "";
 						$(jsonData).each(function(index,element){
 							var storeName = element.name;
 							var storeid = element.storeno;
 							array.push(storeName);
 							if(index == 0){
	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}else if(index == jsonData.length-1){
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
	 						}else{
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}
 						});
 						storeJson=$.fromJSON(storeString);
 						var autoCompleteStore = new AutoComplete("store_name_manual","auto",array);
						document.getElementById("store_name_manual").onkeyup = function(event){
							autoCompleteStore.start(event);
							if($("#store_name_manual").val().trim() == ""){
								$("#store_id_manual").val("");
							}
							document.getElementById("store_name_manual").value=document.getElementById("store_name_manual").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
						}
 					}
 			});
 		}
 	}
 	
 	var storeJsonPay;
 	function initStoreSelectcomplatePay(){
 		var citySelect = $("#citySelectPay  option:selected").val();
 		if(citySelect==""){
 			initallstorePay();
 		}else{
 			//根据城市查询门店 信息
 			var cityname = "'"+citySelect+"'";
 			doManager("StoreManager","findStoreByCityData",[cityname],
 			    function(data,textStatus,XmlHttpRequest){
 					if (data.result) {
 						var jsonData = $.fromJSON(data.data);
 						array_pay=new Array();
 						var storeString = "";
 						$(jsonData).each(function(index,element){
 							var storeName = element.name;
 							var storeid = element.storeno;
 							array_pay.push(storeName);
 							if(index == 0){
	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}else if(index == jsonData.length-1){
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
	 						}else{
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}
 						});
 						storeJsonPay=$.fromJSON(storeString);
 						var autoCompletePay = new AutoComplete("store_name_manual_pay","auto_pay",array_pay);
						document.getElementById("store_name_manual_pay").onkeyup = function(event){
							autoCompletePay.start(event);
							if($("#store_name_manual_pay").val().trim() == ""){
								$("#store_id_manual_pay").val("");
							}
							document.getElementById("store_name_manual_pay").value=document.getElementById("store_name_manual_pay").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
						}
 					}
 			});
 		}
 	}
 	
 	var storeJsonMore;
 	function initStoreSelectcomplateMore(){
 		var citySelect = $("#citySelectMore  option:selected").val();
 		if(citySelect==""){
 			initallstoreMore();
 		}else{
 			//根据城市查询门店 信息
 			var cityname = "'"+citySelect+"'";
 			doManager("StoreManager","findStoreByCityData",[cityname],
 			    function(data,textStatus,XmlHttpRequest){
 					if (data.result) {
 						var jsonData = $.fromJSON(data.data);
 						array_more=new Array();
 						var storeString = "";
 						$(jsonData).each(function(index,element){
 							var storeName = element.name;
 							var storeid = element.storeno;
 							array_more.push(storeName);
 							if(index == 0){
	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}else if(index == jsonData.length-1){
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
	 						}else{
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}
 						});
 						storeJsonMore=$.fromJSON(storeString);
 						var autoCompleteMore = new AutoComplete("store_name_manual_more","auto_more",array_more);
						document.getElementById("store_name_manual_more").onkeyup = function(event){
							autoCompleteMore.start(event);
							if($("#store_name_manual_more").val().trim() == ""){
								$("#store_id_manual_more").val("");
							}
							document.getElementById("store_name_manual_more").value=document.getElementById("store_name_manual_more").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
						}
 					}
 			});
 		}
 	}
 	
 	var storeJsonAreamore;
 	function initStoreSelectcomplateAreamore(){
 		var citySelect = $("#citySelectAreamore  option:selected").val();
 		if(citySelect==""){
 			initallstoreAreamore();
 		}else{
 			//根据城市查询门店 信息
 			var cityname = "'"+citySelect+"'";
 			doManager("StoreManager","findStoreByCityData",[cityname],
 			    function(data,textStatus,XmlHttpRequest){
 					if (data.result) {
 						var jsonData = $.fromJSON(data.data);
 						array_areamore=new Array();
 						var storeString = "";
 						$(jsonData).each(function(index,element){
 							var storeName = element.name;
 							var storeid = element.storeno;
 							array_areamore.push(storeName);
 							if(index == 0){
	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}else if(index == jsonData.length-1){
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
	 						}else{
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}
 						});
 						storeJsonAreamore=$.fromJSON(storeString);
 						var autoCompleteAreamore = new AutoComplete("store_name_manual_areamore","auto_areamore",array_areamore);
						document.getElementById("store_name_manual_areamore").onkeyup = function(event){
							autoCompleteAreamore.start(event);
							if($("#store_name_manual_areamore").val().trim() == ""){
								$("#store_id_manual_areamore").val("");
							}
							document.getElementById("store_name_manual_areamore").value=document.getElementById("store_name_manual_areamore").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
						}
 					}
 			});
 		}
 	}
 	
 	var storeJsonDaynewcus;
 	function initStoreSelectcomplateDaynewcus(){
 		var citySelect = $("#citySelectDaynewcus  option:selected").val();
 		if(citySelect==""){
 			initallstoreDaynewcus();
 		}else{
 			//根据城市查询门店 信息
 			var cityname = "'"+citySelect+"'";
 			doManager("StoreManager","findStoreByCityData",[cityname],
 			    function(data,textStatus,XmlHttpRequest){
 					if (data.result) {
 						var jsonData = $.fromJSON(data.data);
 						array_daynewcus=new Array();
 						var storeString = "";
 						$(jsonData).each(function(index,element){
 							var storeName = element.name;
 							var storeid = element.storeno;
 							array_daynewcus.push(storeName);
 							if(index == 0){
	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}else if(index == jsonData.length-1){
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
	 						}else{
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}
 						});
 						storeJsonDaynewcus=$.fromJSON(storeString);
 						var autoCompleteDaynewcus = new AutoComplete("store_name_manual_daynewcus","auto_daynewcus",array_daynewcus);
						document.getElementById("store_name_manual_daynewcus").onkeyup = function(event){
							autoCompleteDaynewcus.start(event);
							if($("#store_name_manual_daynewcus").val().trim() == ""){
								$("#store_id_manual_daynewcus").val("");
							}
							document.getElementById("store_name_manual_daynewcus").value=document.getElementById("store_name_manual_daynewcus").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
						}
 					}
 			});
 		}
 	}
 	
 	var storeJsonDaypay;
 	function initStoreSelectcomplateDaypay(){
 		var citySelect = $("#citySelectDaypay  option:selected").val();
 		if(citySelect==""){
 			initallstoreDaypay();
 		}else{
 			//根据城市查询门店 信息
 			var cityname = "'"+citySelect+"'";
 			doManager("StoreManager","findStoreByCityData",[cityname],
 			    function(data,textStatus,XmlHttpRequest){
 					if (data.result) {
 						var jsonData = $.fromJSON(data.data);
 						array_daypay=new Array();
 						var storeString = "";
 						$(jsonData).each(function(index,element){
 							var storeName = element.name;
 							var storeid = element.storeno;
 							array_daypay.push(storeName);
 							if(index == 0){
	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}else if(index == jsonData.length-1){
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
	 						}else{
	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
	 						}
 						});
 						storeJsonDaypay=$.fromJSON(storeString);
 						var autoCompleteDaypay = new AutoComplete("store_name_manual_daypay","auto_daypay",array_daypay);
						document.getElementById("store_name_manual_daypay").onkeyup = function(event){
							autoCompleteDaypay.start(event);
							if($("#store_name_manual_daypay").val().trim() == ""){
								$("#store_id_manual_daypay").val("");
							}
							document.getElementById("store_name_manual_daypay").value=document.getElementById("store_name_manual_daypay").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
						}
 					}
 			});
 		}
 	}
 	
 	var storeJsonDaymore;
  	function initStoreSelectcomplateDaymore(){
  		var citySelect = $("#citySelectDaymore  option:selected").val();
  		if(citySelect==""){
  			initallstoreDaymore();
  		}else{
  			//根据城市查询门店 信息
  			var cityname = "'"+citySelect+"'";
  			doManager("StoreManager","findStoreByCityData",[cityname],
  			    function(data,textStatus,XmlHttpRequest){
  					if (data.result) {
  						var jsonData = $.fromJSON(data.data);
  						array_daymore=new Array();
  						var storeString = "";
  						$(jsonData).each(function(index,element){
  							var storeName = element.name;
  							var storeid = element.storeno;
  							array_daymore.push(storeName);
  							if(index == 0){
 	 							storeString = "{'"+storeName+"'"+":"+"'"+storeid+"'"+",";
 	 						}else if(index == jsonData.length-1){
 	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+"}";
 	 						}else{
 	 							storeString = storeString+"'"+storeName+"'"+":"+"'"+storeid+"'"+",";
 	 						}
  						});
  						storeJsonDaymore=$.fromJSON(storeString);
  						var autoCompleteDaymore = new AutoComplete("store_name_manual_daymore","auto_daymore",array_daymore);
 						document.getElementById("store_name_manual_daymore").onkeyup = function(event){
 							autoCompleteDaymore.start(event);
 							if($("#store_name_manual_daymore").val().trim() == ""){
 								$("#store_id_manual_daymore").val("");
 							}
 							document.getElementById("store_name_manual_daymore").value=document.getElementById("store_name_manual_daymore").value.replace(/(\s*)|(\s*)/g,'').replace(/[ ]/g,'');
 						}
  					}
  			});
  		}
  	}
 	
 	function isCityStore(sname){
		var cityStore = false;
		$(array).each(function(index,element){
			if(element==sname){
				cityStore=true;
			}
		});
		return cityStore;
	}
     
   var isCreatePage=false;
   function search_manual_abnormalOrder(cur_page){
  		isCreatePage=false;
  		search_manual_abnormalOrder1(cur_page);
   }
  
  //查询上
  var currentPage_manual= 1;
  var totalPage_manual = 1;
  function   search_manual_abnormalOrder1(cur_page){
	  	
	    var begin_month = $('#auto_date_start').val();
	    var end_month = $('#auto_date_end').val();
	    if(begin_month=="" || end_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
            return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    if(end_month!=""){
	    	end_month = end_month.replace("-","");
	    }
	    if(begin_month>end_month){
	    	crm_alert(5,"选择日期错误 ！请重新选择！");
            return;
        } 
	    
 	 	var number_str = $("#store_id_manual").val(); 
  	    var storeName = $("#store_name_manual").val();
  	  	if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
  	    if(number_str==""&&storeName!=""){
  	    	number_str=-10000;
  	    }
  	   
  	    $("#process_div").show();
 	 	$("#process_div_pic").show();
	    var cityName = $("#citySelect  option:selected").val();
	    var userOperationStatDto=null;
	    userOperationStatDto = {
				beginDate:begin_month,
				endDate:end_month,
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordes;
	    $("#totalRecord_cannot").html("0");
	    doManager('userOperationStatManager','queryNewCustomerStat',[userOperationStatDto,pageInfo],function(data){
         if(data.result){
         	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual = result.total_pages;
	        	   $("#totalRecord_cannot").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePage){
	        		   
	        		   $("#page_manual").createPage({
	        	 	  	    pageCount:totalPage_manual,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    	search_manual_abnormalOrder1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePage=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
       			    var city_name = jData[i].city_name==null?'':jData[i].city_name;
       			    var store_name = jData[i].store_name==null?'':jData[i].store_name;
       			    
	        		infoStr= "<tr>";
       			    infoStr= infoStr
                    	+"<td>"+city_name+"</td>"
                    	+"<td>"+store_name+"</td>"
                    	+"<td>"+jData[i].area_name+"</td>"
                    	+"<td>"+jData[i].new_count+"</td>"
                    	+"<td>"+jData[i].new_10_count+"</td>"
                    	+"<td>"+jData[i].new_20_count+"</td>"
	                    +"</tr>";
		                       
		            $("#manual_tbody").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
         
         }else{
      	   crm_alert(5,"请稍后重新请求！");
         }
        $("#process_div").hide();
   	    $("#process_div_pic").hide();
     }); 
  }
  
  //导出
  function export_manual_newcus(){
	  	var begin_month = $('#auto_date_start').val();
	    var end_month = $('#auto_date_end').val();
	    if(begin_month=="" || end_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
            return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    if(end_month!=""){
	    	end_month = end_month.replace("-","");
	    }
	    if(begin_month>end_month){
	    	crm_alert(5,"选择日期错误 ！请重新选择！");
            return;
        } 
	    
	 	var number_str = $("#store_id_manual").val(); 
  	    var storeName = $("#store_name_manual").val();
  	  	if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
  	    if(number_str==""&&storeName!=""){
  	    	number_str=-10000;
  	    }
  	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelect  option:selected").val();
	    var userOperationStatDto=null;
	    userOperationStatDto = {
			beginDate:begin_month,
			endDate:end_month,
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportNewCustomerStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
	  }
  
	
  var isCreatePagePay=false;
  function search_manual_pay(cur_page){
 		isCreatePagePay=false;
 		search_manual_pay1(cur_page);
  }
 
 //查询上
 var currentPage_manual_pay= 1;
 var totalPage_manual_pay = 1;
 function   search_manual_pay1(cur_page){
	  	
	 	var begin_month = $('#auto_date_pay_start').val();
	    var end_month = $('#auto_date_pay_end').val();
	    if(begin_month=="" || end_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
            return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    if(end_month!=""){
	    	end_month = end_month.replace("-","");
	    }
	    if(begin_month>end_month){
	    	crm_alert(5,"选择日期错误 ！请重新选择！");
            return;
        } 
	    
	 	var number_str = $("#store_id_manual_pay").val(); 
 	    var storeName = $("#store_name_manual_pay").val();
 	   	if(storeName!=""){
	  	  	if($.inArray(storeName, array_pay) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
 	    if(number_str==""&&storeName!=""){
 	    	number_str=-10000;
 	    }
 	   
 	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectPay  option:selected").val();
	    var userOperationStatDto=null;
	    userOperationStatDto = {
				beginDate:begin_month,
				endDate:end_month,
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordesPay;
	    $("#totalRecord_cannot_pay").html("0");
	    doManager('userOperationStatManager','queryPayStat',[userOperationStatDto,pageInfo],function(data){
        if(data.result){
        	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_pay").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual_pay").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual_pay = result.total_pages;
	        	   $("#totalRecord_cannot_pay").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePagePay){
	        		   
	        		   $("#page_manual_pay").createPage({
	        	 	  	    pageCount:totalPage_manual_pay,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    	search_manual_pay1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePagePay=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
      			    var city_name = jData[i].city_name==null?'':jData[i].city_name;
      			    var store_name = jData[i].store_name==null?'':jData[i].store_name;
      			    
	        		infoStr= "<tr>";
      			    infoStr= infoStr
                   	+"<td>"+city_name+"</td>"
                   	+"<td>"+store_name+"</td>"
                   	+"<td>"+jData[i].area_name+"</td>"
                   	+"<td>"+jData[i].pay_count+"</td>"
                   	+"<td>"+jData[i].pay_10_count+"</td>"
                   	+"<td>"+jData[i].pay_20_count+"</td>"
	                +"</tr>";
		                       
		            $("#manual_tbody_pay").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
        
        }else{
     	   crm_alert(5,"请稍后重新请求！");
        }
       $("#process_div").hide();
  	    $("#process_div_pic").hide();
    }); 
 }
 
//导出
 function export_manual_pay(){
	 	var begin_month = $('#auto_date_pay_start').val();
	    var end_month = $('#auto_date_pay_end').val();
	    if(begin_month=="" || end_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
            return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    if(end_month!=""){
	    	end_month = end_month.replace("-","");
	    }
	    if(begin_month>end_month){
        	crm_alert(5,"选择日期错误 ！请重新选择！");
            return;
        } 
	    
	 	var number_str = $("#store_id_manual_pay").val(); 
	    var storeName = $("#store_name_manual_pay").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array_pay) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectPay  option:selected").val();
	    var userOperationStatDto=null;
	    userOperationStatDto = {
			beginDate:begin_month,
			endDate:end_month,
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportPayStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
 }
 
//维度快速选择
 function dimensionSelect(dimension){
 	$("#dept_manual").val("");
 	var deptName = $("#dimension_manual").val();
 	if(deptName.indexOf(dimension)>=0){
 		$("#dimension_manual").val($("#dimension_manual").val());
 	}else{
 		$("#dimension_manual").val($("#dimension_manual").val()+dimension+",");
 	}
 } 
 
 //用户留存分析
 function search_manual_basic(){
	 var paytype = $("input[type='radio']:checked").val();
	 var begin_month = $('#auto_date_start_basic').val();
	    if(begin_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
         	return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    var dimension =  $('#dimension_manual').val();
	    if(dimension==""){
	    	crm_alert(5,"请选择维度标签！");
         	return;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	 	var cityName = $("#citySelectBasic  option:selected").val();
	 	if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}else{
	    		cityName=cityName+"市";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
				beginDate:begin_month,
				cityName:cityName,
				paytype:paytype,
				dimension:dimension
			}
	   
	    doManager('userOperationStatManager','queryPayBasicStat',[userOperationStatDto],function(data){
     	if(data.result){
     	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_basic").find("tr:gt(0)").remove(); 
	        	   var jData = result.order_ym;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	 var infoStr="";
	        	 for(var i=0;i<result.comparelist.length;i++){
   			    	var compareTemp = result.customers;
   			    	var rate = 0;
   			    	if(compareTemp!=0){
   			    		rate = Math.round(result.comparelist[i].customers/result.customers * 10000) / 100.00;
   			    	}
   			    	var city_name = result.city_name==undefined?'':result.city_name;
		        	infoStr= "<tr>";
	   			    infoStr= infoStr
	   			 		+"<td>"+city_name+"</td>"
	                	+"<td>"+result.order_ym+"</td>"
	                	+"<td>"+result.trading_price+"</td>"
	                	+"<td>"+result.customers+"</td>"
	                	+"<td>"+result.comparelist[i].order_ym+"</td>"
	                	+"<td>"+result.comparelist[i].trading_price+"</td>"
	                	+"<td>"+result.comparelist[i].customers+"</td>"
	                	+"<td>"+ rate.toFixed(2) + "%"+"</td>"
		                +"</tr>";
		                       
		            $("#manual_tbody_basic").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
     
     }else{
  	   crm_alert(5,"请稍后重新请求！");
     }
    $("#process_div").hide();
	$("#process_div_pic").hide();
 	}); 
 }
 
 function export_manual_basic(){
	 var paytype = $("input[type='radio']:checked").val();
	 var begin_month = $('#auto_date_start_basic').val();
	    if(begin_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
	        	return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    var dimension =  $('#dimension_manual').val();
	    if(dimension==""){
	    	crm_alert(5,"请选择维度标签！");
	        	return;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	 	var cityName = $("#citySelectBasic  option:selected").val();
	 	if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}else{
	    		cityName=cityName+"市";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
				beginDate:begin_month,
				cityName:cityName,
				paytype:paytype,
				dimension:dimension
			}
	   
	    doManager('userOperationStatManager','exportPayBasicStat',[userOperationStatDto],function(data){
          if(data.result){
          	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   window.location.href=result.data;
	           }else if(result.status=='more'){
	        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
	        	   $("#process_div").hide();
        	       $("#process_div_pic").hide();
	        	   return;
	           }else{
	        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
	        	   $("#process_div").hide();
        	       $("#process_div_pic").hide();
	        	   return;
	           }
          
          }else{
       	   crm_alert(5,"请稍后重新请求！");
          }
         $("#process_div").hide();
    	 $("#process_div_pic").hide();
     });
 }
 
 var isCreatePageMore=false;
 function search_manual_more(cur_page){
		isCreatePageMore=false;
		search_manual_more1(cur_page);
 }

//查询上
var currentPage_manual_more= 1;
var totalPage_manual_more = 1;
function   search_manual_more1(cur_page){
	  	
		var sdate = $("#auto_date_more").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_more").val(); 
	    var storeName = $("#store_name_manual_more").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array_more) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectMore  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    		beginDate:begin_end_date[0].trim(),
				endDate:begin_end_date[1].trim(),
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordesMore;
	    $("#totalRecord_cannot_more").html("0");
	    doManager('userOperationStatManager','queryEmployeeMoreStat',[userOperationStatDto,pageInfo],function(data){
       if(data.result){
       	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_more").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual_more").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual_more = result.total_pages;
	        	   $("#totalRecord_cannot_more").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePageMore){
	        		   
	        		   $("#page_manual_more").createPage({
	        	 	  	    pageCount:totalPage_manual_more,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    	search_manual_more1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePageMore=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
     			    var city_name = jData[i].city_name==null?'':jData[i].city_name;
     			    var store_name = jData[i].store_name==null?'':jData[i].store_name;
     			    
	        		infoStr= "<tr>";
     			    infoStr= infoStr
                  	+"<td>"+city_name+"</td>"
                  	+"<td>"+store_name+"</td>"
                  	+"<td>"+jData[i].store_code+"</td>"
                  	+"<td>"+jData[i].employee_a_no+"</td>"
                  	+"<td>"+jData[i].cus_count+"</td>"
                  	+"<td>"+jData[i].new_cus_count+"</td>"
	                +"</tr>";
		                       
		            $("#manual_tbody_more").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
       
       }else{
    	   crm_alert(5,"请稍后重新请求！");
       }
      $("#process_div").hide();
 	    $("#process_div_pic").hide();
   }); 
}
 
//导出
function export_manual_more(){
		var sdate = $("#auto_date_more").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_more").val(); 
	    var storeName = $("#store_name_manual_more").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array_more) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectMore  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    	beginDate:begin_end_date[0].trim(),
			endDate:begin_end_date[1].trim(),
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportEmployeeMoreStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
	  }

var isCreatePageAreamore=false;
function search_manual_areamore(cur_page){
		isCreatePageAreamore=false;
		search_manual_areamore1(cur_page);
}

//查询上
var currentPage_manual_areamore= 1;
var totalPage_manual_areamore = 1;
function   search_manual_areamore1(cur_page){
	  	
		var sdate = $("#auto_date_areamore").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_areamore").val(); 
	    var storeName = $("#store_name_manual_areamore").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array_areamore) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectAreamore  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    		beginDate:begin_end_date[0].trim(),
				endDate:begin_end_date[1].trim(),
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordesAreamore;
	    $("#totalRecord_cannot_areamore").html("0");
	    doManager('userOperationStatManager','queryEmployeeAreamoreStat',[userOperationStatDto,pageInfo],function(data){
      if(data.result){
      	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_areamore").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual_areamore").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual_areamore = result.total_pages;
	        	   $("#totalRecord_cannot_areamore").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePageAreamore){
	        		   
	        		   $("#page_manual_areamore").createPage({
	        	 	  	    pageCount:totalPage_manual_areamore,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    	search_manual_areamore1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePageAreamore=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
    			    var city_name = jData[i].city_name==null?'':jData[i].city_name;
    			    var store_name = jData[i].store_name==null?'':jData[i].store_name;
    			    
	        		infoStr= "<tr>";
    			    infoStr= infoStr
                 	+"<td>"+city_name+"</td>"
                 	+"<td>"+store_name+"</td>"
                 	+"<td>"+jData[i].store_code+"</td>"
                 	+"<td>"+jData[i].area_code+"</td>"
                 	+"<td>"+jData[i].employee_a_no+"</td>"
                 	+"<td>"+jData[i].cus_count+"</td>"
                 	+"<td>"+jData[i].new_cus_count+"</td>"
	                +"</tr>";
		                       
		            $("#manual_tbody_areamore").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
      
      }else{
   	   crm_alert(5,"请稍后重新请求！");
      }
     $("#process_div").hide();
	 $("#process_div_pic").hide();
  }); 
}

//导出
function export_manual_areamore(){
		var sdate = $("#auto_date_areamore").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_areamore").val(); 
	    var storeName = $("#store_name_manual_areamore").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array_areamore) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectAreamore  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    	beginDate:begin_end_date[0].trim(),
			endDate:begin_end_date[1].trim(),
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportEmployeeAreamoreStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
	  }

var isCreatePageDaynewcus=false;
function search_manual_daynewcus(cur_page){
		isCreatePageDaynewcus=false;
		search_manual_daynewcus1(cur_page);
}

//查询上
var currentPage_manual_daynewcus= 1;
var totalPage_manual_daynewcus = 1;
function   search_manual_daynewcus1(cur_page){
	  	
		var sdate = $("#auto_date_daynewcus").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_daynewcus").val(); 
	    var storeName = $("#store_name_manual_daynewcus").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectDaynewcus  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    		beginDate:begin_end_date[0].trim(),
				endDate:begin_end_date[1].trim(),
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordesDaynewcus;
	    $("#totalRecord_cannot_daynewcus").html("0");
	    doManager('userOperationStatManager','queryMassNewCusStat',[userOperationStatDto,pageInfo],function(data){
      if(data.result){
      	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_daynewcus").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual_daynewcus").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual_daynewcus = result.total_pages;
	        	   $("#totalRecord_cannot_daynewcus").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePageDaynewcus){
	        		   
	        		   $("#page_manual_daynewcus").createPage({
	        	 	  	    pageCount:totalPage_manual_daynewcus,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	search_manual_daynewcus1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePageDaynewcus=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
    			    var city_name = jData[i].city_name==null?'':jData[i].city_name;
    			    var store_name = jData[i].store_name==null?'':jData[i].store_name;
    			    
    			    var areaid = "areatips"+i;
    			    
	        		infoStr= "<tr>";
    			    infoStr= infoStr
                 	+"<td>"+city_name+"</td>"
                 	+"<td>"+store_name+"</td>";
                 	if(jData[i].area_code==null || jData[i].area_code==''){
                 		infoStr= infoStr
                     	+"<td>无</td>"
                 	}else{
                 		infoStr= infoStr
                     	+"<td><a href=\"#\" onmouseover=\"showarea('"+jData[i].area_code+"','"+areaid+"');\" id=\""+areaid+"\">"+jData[i].area_code+"</a></td>"
                 	}
                 	infoStr= infoStr
                 	+"<td>"+jData[i].new_count+"</td>"
                 	+"<td>"+jData[i].new_10_count+"</td>"
                 	+"<td>"+jData[i].new_20_count+"</td>"
	                +"</tr>";
		                       
		            $("#manual_tbody_daynewcus").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
      
      }else{
   	   crm_alert(5,"请稍后重新请求！");
      }
     $("#process_div").hide();
	 $("#process_div_pic").hide();
  }); 
}

//导出
function export_manual_daynewcus(){
		var sdate = $("#auto_date_daynewcus").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_daynewcus").val(); 
	    var storeName = $("#store_name_manual_daynewcus").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectDaynewcus  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    	beginDate:begin_end_date[0].trim(),
			endDate:begin_end_date[1].trim(),
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportMassNewCusStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
	  }
 
var isCreatePageDaypay=false;
function search_manual_daypay(cur_page){
		isCreatePageDaypay=false;
		search_manual_daypay1(cur_page);
}

//查询上
var currentPage_manual_daypay= 1;
var totalPage_manual_daypay = 1;
function   search_manual_daypay1(cur_page){
	  	
		var sdate = $("#auto_date_daypay").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_daypay").val(); 
	    var storeName = $("#store_name_manual_daypay").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectDaypay  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    		beginDate:begin_end_date[0].trim(),
				endDate:begin_end_date[1].trim(),
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordesDaypay;
	    $("#totalRecord_cannot_daypay").html("0");
	    doManager('userOperationStatManager','queryMassPayCusStat',[userOperationStatDto,pageInfo],function(data){
      if(data.result){
      	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_daypay").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual_daypay").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual_daypay = result.total_pages;
	        	   $("#totalRecord_cannot_daypay").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePageDaypay){
	        		   
	        		   $("#page_manual_daypay").createPage({
	        	 	  	    pageCount:totalPage_manual_daypay,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    	search_manual_daypay1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePageDaypay=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
    			    var city_name = jData[i].city_name==null?'':jData[i].city_name;
    			    var store_name = jData[i].store_name==null?'':jData[i].store_name;
    			    
    			    var areaid = "areatips"+i;
    			    
	        		infoStr= "<tr>";
    			    infoStr= infoStr
                 	+"<td>"+city_name+"</td>"
                 	+"<td>"+store_name+"</td>";
                 	if(jData[i].area_code==null || jData[i].area_code==''){
                 		infoStr= infoStr
                     	+"<td>无</td>"
                 	}else{
                 		infoStr= infoStr
                 		+"<td><a href=\"#\" onmouseover=\"showarea('"+jData[i].area_code+"','"+areaid+"');\" id=\""+areaid+"\">"+jData[i].area_code+"</a></td>"
                 	}
                 	infoStr= infoStr
                 	+"<td>"+jData[i].pay_count+"</td>"
                 	+"<td>"+jData[i].pay_10_count+"</td>"
                 	+"<td>"+jData[i].pay_20_count+"</td>"
	                +"</tr>";
		                       
		            $("#manual_tbody_daypay").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
      
      }else{
   	   crm_alert(5,"请稍后重新请求！");
      }
     $("#process_div").hide();
	 $("#process_div_pic").hide();
  }); 
}
 
//导出
function export_manual_daypay(){
		var sdate = $("#auto_date_daypay").val();
	    var begin_end_date=["",""];
	  	if(sdate!=""){
	  		 begin_end_date = sdate.split("-");
	   	}
	  	
	 	var number_str = $("#store_id_manual_daypay").val(); 
	    var storeName = $("#store_name_manual_daypay").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectDaypay  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    	beginDate:begin_end_date[0].trim(),
			endDate:begin_end_date[1].trim(),
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportMassPayCusStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
	  } 

	var isCreatePageDaymore=false;
	function search_manual_daymore(cur_page){
			isCreatePageDaymore=false;
			search_manual_daymore1(cur_page);
	}
	
	//查询上
	var currentPage_manual_daymore= 1;
	var totalPage_manual_daymore = 1;
	function   search_manual_daymore1(cur_page){
		var begin_month = $('#auto_date_daymore_start').val();
	    var end_month = $('#auto_date_daymore_end').val();
	    if(begin_month=="" || end_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
            return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    if(end_month!=""){
	    	end_month = end_month.replace("-","");
	    }
	    if(begin_month>end_month){
	    	crm_alert(5,"选择日期错误 ！请重新选择！");
            return;
        } 
	  	
	 	var number_str = $("#store_id_manual_daymore").val(); 
	    var storeName = $("#store_name_manual_daymore").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectDaymore  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}else{
	    		cityName=cityName+"市";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    		beginDate:begin_month,
				endDate:end_month,
				storeNo:number_str,
				cityName:cityName
			}
	   
	    var pageInfo = new Object();
	    pageInfo.currentPage = cur_page;
	    pageInfo.recordsPerPage = manualPageRecordesDaymore;
	    $("#totalRecord_cannot_daymore").html("0");
	    doManager('userOperationStatManager','queryEmployeeCustomerStat',[userOperationStatDto,pageInfo],function(data){
      	if(data.result){
      	   var result= JSON.parse(data.data);
	           if(result.status=='success'){
	        	   $("#manual_tbody_daymore").find("tr:gt(0)").remove(); 
	        	   var jData = result.data;
	        	   if(jData==null||jData.length==0){
	        		   crm_alert(5,"系统查无此条件的数据");
	        		   $("#page_manual_daypay").createPage({
	        	 	  	    pageCount:0,
	        	 	  	    current:0,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    }
	        	 	  	});
	        		   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
	        		   return;
	        	   }
	        	   totalPage_manual_daymore = result.total_pages;
	        	   $("#totalRecord_cannot_daymore").html(result.pageinfo.totalRecords);
	        	   if(!isCreatePageDaymore){
	        		   
	        		   $("#page_manual_daymore").createPage({
	        	 	  	    pageCount:totalPage_manual_daymore,
	        	 	  	    current:1,
	        	 	  	    backFn:function(p){
	        	 	  	    	
	        	 	  	    	search_manual_daymore1(p);
	        	 	  	    }
	        	 	  	});
	        		   isCreatePageDaymore=true;
	        	   }
	        	  
	        	   var infoStr="";
	        	   for(var i=0;i<jData.length;i++){
    			    var areaid = "areatips"+i;
    			    
	        		infoStr= "<tr>";
    			    infoStr= infoStr
                 	+"<td>"+jData[i].city_name+"</td>"
                 	+"<td>"+jData[i].store_name+"</td>"
                 	+"<td>"+jData[i].store_no+"</td>"
                 	+"<td>"+jData[i].employee_a_no+"</td>"
                 	+"<td>"+jData[i].pay_count+"</td>"
                 	+"<td>"+jData[i].new_pay_count+"</td>"
	                +"</tr>";
		                       
		            $("#manual_tbody_daymore").append(infoStr);     
	        	   }
	           }else{
	        	   crm_alert(5,"请稍后重新请求！");
	        	   return;
	           }
      
	      }else{
	   	   crm_alert(5,"请稍后重新请求！");
	      }
	     $("#process_div").hide();
		 $("#process_div_pic").hide();
	  }); 
	}
	
	//导出
	function export_manual_daymore(){
		var begin_month = $('#auto_date_daymore_start').val();
	    var end_month = $('#auto_date_daymore_end').val();
	    if(begin_month=="" || end_month==""){
	    	crm_alert(5,"日期不能为空 ！请重新选择！");
            return;
	    }
	    if(begin_month!=""){
	    	begin_month = begin_month.replace("-","");
	    }
	    if(end_month!=""){
	    	end_month = end_month.replace("-","");
	    }
	    if(begin_month>end_month){
	    	crm_alert(5,"选择日期错误 ！请重新选择！");
            return;
        } 
	  	
	 	var number_str = $("#store_id_manual_daypay").val(); 
	    var storeName = $("#store_name_manual_daypay").val();
	    if(storeName!=""){
	  	  	if($.inArray(storeName, array) == -1){
				crm_alert(0,"该门店不存在！");
				return;
			}
	    }
	    if(number_str==""&&storeName!=""){
	    	number_str=-10000;
	    }
	   
	    $("#process_div").show();
	 	$("#process_div_pic").show();
	    var cityName = $("#citySelectDaypay  option:selected").val();
	    if(cityName!=""){
	    	if(cityName=="黔东南苗族侗族自治州"){
	    		cityName="黔东南州";
	    	}else{
	    		cityName=cityName+"市";
	    	}
	    }
	    var userOperationStatDto=null;
	    userOperationStatDto = {
	    	beginDate:begin_month,
			endDate:end_month,
			storeNo:number_str,
			cityName:cityName
		}
	    
	    doManager('userOperationStatManager','exportEmployeeCustomerStat',[userOperationStatDto],function(data){
	          if(data.result){
	          	   var result= JSON.parse(data.data);
		           if(result.status=='success'){
		        	   window.location.href=result.data;
		           }else if(result.status=='more'){
		        	   crm_alert(0,"单次导出不能超过5万条记录，请调整搜索条件，确认结果条数后再试。");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }else{
		        	   crm_alert(0,"请先确认是否有符合条件的数据，重新请求！");
		        	   $("#process_div").hide();
	        	       $("#process_div_pic").hide();
		        	   return;
		           }
	          
	          }else{
	       	   crm_alert(5,"请稍后重新请求！");
	          }
	         $("#process_div").hide();
	    	 $("#process_div_pic").hide();
	     });
	}

	//片区信息显示
	function showarea(code,areaid){
	  doManager('userOperationStatManager','queryAreaInfoByCode',[code],function(data){
		  if(data.result){
		   	  var result= JSON.parse(data.data);
		   	  if(result!=null){
			   	   var area = "<strong>片区名：</strong>"+result.area_name+"<br>";
			   	   var areacode = "<strong>片区编号：</strong>"+result.area_no+"<br>";
			   	   var areacontent = area+areacode;
				   	  
			  	   layer.tips(areacontent, '#'+areaid, {
			 		   tips: [4, '#0FA6D8'], //还可配置颜色
			 		   time:5000
			 	   });	
		   	  }
		  }
	  });
	}
	
  function resetSerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual").val("");
	   		var a = document.getElementById("citySelect");
	   	  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual").val("");
	  	}
   	    $('#auto_date_start').val(new Date().format('yyyy-MM'));
   	    $('#auto_date_end').val(new Date().format('yyyy-MM'));
  }
  
  function resetPaySerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual_pay").val("");
	 		var a = document.getElementById("citySelectPay");
	 	  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual_pay").val("");
	  	}
	  	$('#auto_date_pay_start').val(new Date().format('yyyy-MM'));
   	    $('#auto_date_pay_end').val(new Date().format('yyyy-MM'));
  }
  
  function resetBasicSerachParam(t){
  		$("#dimension_manual").val("");
  		document.getElementById('radio1').checked=true;
	  	$(".sl-v-list a").removeClass("bg-orange-active");
 	    $('#auto_date_start_basic').val(new Date().format('yyyy-MM'));
 }
  
  function resetMoreSerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual_more").val("");
			var a = document.getElementById("citySelectMore");
		  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual_more").val("");
	  	}		
	  	$('#auto_date_more').data('daterangepicker').setStartDate(new Date());
		$('#auto_date_more').data('daterangepicker').setEndDate(new Date());
  }
  
  function resetAreamoreSerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual_areamore").val("");
			var a = document.getElementById("citySelectAreamore");
		  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual_areamore").val("");
	  	}		
	  	$('#auto_date_areamore').data('daterangepicker').setStartDate(new Date());
		$('#auto_date_areamore').data('daterangepicker').setEndDate(new Date());
  }
  
  function resetDaynewcusSerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual_daynewcus").val("");
			var a = document.getElementById("citySelectDaynewcus");
		  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual_daynewcus").val("");
	  	}		
	  	$('#auto_date_daynewcus').data('daterangepicker').setStartDate(new Date());
		$('#auto_date_daynewcus').data('daterangepicker').setEndDate(new Date());
 }
  
  function resetDaypaySerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual_daypay").val("");
			var a = document.getElementById("citySelectDaypay");
		  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual_daypay").val("");
	  	}		
	  	$('#auto_date_daypay').data('daterangepicker').setStartDate(new Date());
		$('#auto_date_daypay').data('daterangepicker').setEndDate(new Date());
 }
  
  function resetDaymoreSerachParam(t){
	  	if(target==0){
	  		$("#store_name_manual_daymore").val("");
			var a = document.getElementById("citySelectDaymore");
		  	a.options[0].selected = true;
	  	}else if(target==1){
	  		$("#store_name_manual_daymore").val("");
	  	}		
	  	$('#auto_date_daymore_start').val(new Date().format('yyyy-MM'));
   	    $('#auto_date_daymore_end').val(new Date().format('yyyy-MM'));
 }
  
  var autoPageRecordes=10;
  var manualPageRecordes=10;
  //切换每页显示的数据量
 function chnagePageRecords(t){
	 $("#page_manual").empty();
	 manualPageRecordes  = $("#pageRecords_manual").val();
	 search_manual_abnormalOrder(1);
 }
  
 var autoPageRecordesPay=10;
 var manualPageRecordesPay=10;
 //切换每页显示的数据量
function chnagePayPageRecords(t){
	 $("#page_manual_pay").empty();
	 manualPageRecordesPay  = $("#pageRecords_manual_pay").val();
	 search_manual_pay(1);
}
 
var autoPageRecordesMore=10;
var manualPageRecordesMore=10;
//切换每页显示的数据量
function chnageMorePageRecords(t){
	 $("#page_manual_more").empty();
	 manualPageRecordesMore  = $("#pageRecords_manual_more").val();
	 search_manual_more(1);
}

var autoPageRecordesAreamore=10;
var manualPageRecordesAreamore=10;
//切换每页显示的数据量
function chnageAreamorePageRecords(t){
	 $("#page_manual_areamore").empty();
	 manualPageRecordesAreamore  = $("#pageRecords_manual_areamore").val();
	 search_manual_areamore(1);
}

var autoPageRecordesDaynewcus=10;
var manualPageRecordesDaynewcus=10;
//切换每页显示的数据量
function chnageDaynewcusPageRecords(t){
	 $("#page_manual_daynewcus").empty();
	 manualPageRecordesDaynewcus  = $("#pageRecords_manual_daynewcus").val();
	 search_manual_daynewcus(1);
}

var autoPageRecordesDaypay=10;
var manualPageRecordesDaypay=10;
//切换每页显示的数据量
function chnageDaypayPageRecords(t){
	 $("#page_manual_daypay").empty();
	 manualPageRecordesDaypay  = $("#pageRecords_manual_daypay").val();
	 search_manual_daypay(1);
}

var autoPageRecordesDaymore=10;
var manualPageRecordesDaymore=10;
//切换每页显示的数据量
function chnageDaymorePageRecords(t){
	 $("#page_manual_daymore").empty();
	 manualPageRecordesDaymore  = $("#pageRecords_manual_daymore").val();
	 search_manual_daymore(1);
}
 
</script>
</body>

 <div class="audit_process" id="taskDetailDiv" style="display:none">
 </div>
 
 
 <div id="errorOrder_detail_div" style="height:247px;display:none">
  
</div>
</html>