<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>国安优易产品</title>
    <!-- Tell the browser to be responsive to screen width -->
    <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />
    <meta content="width=device-width, initial-scale=0.3, maximum-scale=1, user-scalable=yes" name="viewport">  <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="plugins/gooey_menu/gooey.min_mem.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="bootstrap/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="bootstrap/css/ionicons.min.css">
    <!-- Morris charts -->
    <link rel="stylesheet" href="plugins/morris/morris.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker-bs3.css">
    <!-- Select2 -->
    <link rel="stylesheet" href="plugins/select2/select2.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="IE 9/html5shiv.min.js"></script>
    <script src="IE 9/respond.min.js"></script>
    <![endif]-->
    <style>
        .box-body img{width: 100%}
        .report{font-size: 16px;background-color: #367fa9;color: #fff; padding-bottom: 20px;}
        .report .box-header{color: #fff;}
        .report em{width: 70px; position: absolute; right: 0; bottom: 0;}
        .report img{height: 100%;}
        .report li{float:left; line-height: 28px; color: #ffffff; margin-top: 5px;}
        .report i{margin-right: 5px; opacity: 0.6;}
        .report span{font-size: 24px; color: #ffb959; font-weight: bold;}
        .report p i{color: #fff;}
        .report p small{font-size: 16px;}
        .report p:nth-child(2),.report p:nth-child(2n){font-size: 18px; margin: 10px 0 5px 0; color: rgba(255,255,255,0.7);}
        .report p:nth-child(2n+1){font-size: 34px; padding-left: 20px;}
        .report dt{border-bottom: 1px dashed rgba(255,255,255,1); padding: 0 5px 5px 5px; position: relative; margin: 0 10px;}
        .report dt:after{content: ''; width: 7px; height: 8px; background-color: rgba(255,255,255,.8); border-radius: 50%; position: absolute; bottom: -5px; left: -7px;}
        .report dt:before{content: ''; width: 7px; height: 8px; background-color: rgba(255,255,255,.8); border-radius: 50%; position: absolute; bottom: -5px; right: -7px;}
        .report_jr li{width: 23%; background-color: rgba(0,0,0,0.2); box-shadow: 0 1px 1px rgba(0,0,0,1); border-radius: 5px; margin: 15px 1% 0 1%; padding: 15px 0; line-height: 30px;}
        .report_jr li i{font-size: 50px; color: rgba(255, 255, 255, 0.4); padding-top: 5px;}
        .report_jr li span{font-size: 22px; color: #ffde00;}

        .vertical-example{
            position: absolute;
            top: 140px;
            right: 5px;
            width: 70px;}
        .navimenu{min-height: 800px;width: 70px; padding-top: 0;}
        #gooey-v .open-button, #gooey-v .gooey-menu-item{margin-top: 0; margin-bottom: 15em;}
        #process_div{
            background-color:#292a2b;
            display:inline;
            z-index:100000;
            left:0px;
            opacity:0.3; top:0; left:0;height:100%; width:100%; z-index:999; position:fixed; _position:absolute; _left: expression_r(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); _top: expression_r(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight);
            filter:Alpha(Opacity=30);
            opacity: 0.3;
        }

        #process_div_pic{
            position:fixed;
            top:50%;
            left:50%;
            z-index:100000000;
            margin:-16px 0 0 -50px;
            width:100px;
            height:32px;
            color: #fff;
        }
        .download{position: fixed; right: 20px; top: 120px; height: 100px; overflow: hidden; z-index: 1000;}
        .download p{font-size: 12px;}
        .download_icon{font-size: 36px; position:relative;animation-name:myfirst;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;animation-direction:alternate;animation-play-state:running;
            /* Firefox: */
            -moz-animation-name:myfirst; -moz-animation-duration:2s;-moz-animation-timing-function:linear;-moz-animation-iteration-count:infinite;-moz-animation-direction:alternate;-moz-animation-play-state:running;
            /* Safari and Chrome: */
            -webkit-animation-name:myfirst;-webkit-animation-duration:2s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:infinite;-webkit-animation-direction:alternate;-webkit-animation-play-state:running;
            /* Opera: */
            -o-animation-name:myfirst;-o-animation-duration:2s;-o-animation-timing-function:linear;-o-animation-delay:2s;-o-animation-iteration-count:infinite;-o-animation-direction:alternate;-o-animation-play-state:running;}
        .add_citymember{wposition: absolute;}
        .show_cmBig{wposition: absolute;}
        .add_TestMember{wposition: absolute;}
        .toast{
            width:450px;
            height:240px;
            background:transparent;
            background-color:rgba(241,241,241,1);
            box-shadow: 0 1px 1px rgba(0,0,0,1);
            border-radius:10px;
            position: fixed;
            z-index: 1;
        }
        .toast li{float:left; line-height: 28px; color: #0096BB; margin-top: 5px;}
        .bigtoast{
            width:350px;
            height:240px;
            background:transparent;
            background-color:rgba(241,241,241,1);
            box-shadow: 0 1px 1px rgba(0,0,0,1);
            border-radius:10px;
            position: absolute;
            /*margin:auto;left:25%; top:60%;*/
            z-index: 1;
        }

        .trytoast{
            width:450px;
            height:240px;
            background:transparent;
            background-color:rgba(241,241,241,1);
            box-shadow: 0 1px 1px rgba(0,0,0,1);
            border-radius:10px;
            position: fixed;
            z-index: 1;
        }
        .trytoast li{float:left; line-height: 28px; color: #0096BB; margin-top: 5px;}
    </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<!-- Site wrapper -->
<div id="process_div" ></div>
<div id="process_div_pic" ><img style="width:50px;height: 50px;" src="dist/img/376884043677306248.png"><i class="fa fa-refresh fa-spin"></i></div>
<div class="wrapper">
    <!-- 新header -->
    <div class="download text-center" id="showDown" style="display:none"><div class="download_icon" style="cursor: pointer;" id="downloadPdf"><i class="fa fa-download" ></i></div><p>下载报告</p></div>
    <header class="main-header">
        <nav class="navbar navbar-static-top">
            <div class="container">
                <div class="logo_img pull-left">
                    <img src="dist/img/logo.png" height="30">
                    <img src="dist/img/title.png" height="20">
                </div>
                <div class="pull-left">
                    <div class="logo-lg">
                        <ul class="no-margin">
                            <li class="current"><em>国安优易产品</em></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <!-- Content Wrapper. Contains page content -->
    <div id="page">
        <div class="content-wrapper">
            <div class="container" style="width: 1300px;">
                <input type="hidden" id="selDay" value="1"/>
                <input type="hidden" id="setadd" value="0"/>
                <input type="hidden" id="setBig" value="0"/>
                <input type="hidden" id="setTry" value="0"/>
                <!-- Main content -->
                <section class="content-header">
                    <div class="box box-default report">
                        <div class="box-header h4"><strong>国安优易产品(</strong><strong id="selyear"></strong><strong>)运营简报</strong></div>
                        <div class="box-body">
                            <div class="col-sm-12">
                                <ul class="clearfix">
                                    <li class="col-sm-2 no-padding"></li>
                                    <li class="col-sm-4 no-padding"><i class="glyphicon glyphicon-home"></i>SKU总数：<span id="skuAll"></span></li>
                                    <!--<li class="col-sm-6 no-padding"><i class="glyphicon glyphicon-list-alt"></i>上新SKU：<span id="newSku"></span></li>-->
                                    <li class="col-sm-1 no-padding"></li>
                                    <li class="col-sm-5 no-padding"><i class="glyphicon glyphicon-list-alt"></i>订单量：<span id="orderCou"></span></li>

                                </ul>
                                <ul class="clearfix">
                                    <li class="col-sm-2 no-padding"></li>
                                    <li class="col-sm-4 no-padding"><i class="glyphicon glyphicon-equalizer"></i>SKU动销：<span id="skuMove"></span></li>
                                    <li class="col-sm-1 no-padding"></li>
                                    <li class="col-sm-5 no-padding"><i class="fa fa-database"></i>SKU动销率： <span id="movePercent"></span></li>

                                </ul>
                                <ul class="clearfix">
                                    <li class="col-sm-2 no-padding"></li>
                                    <li class="col-sm-4 no-padding"><i class="glyphicon glyphicon-yen"></i>GMV：<small>￥</small> <span id="youyiGmv"></span></li>
                                    <li class="col-sm-1 no-padding"></li>
                                    <li class="col-sm-5 no-padding"><i class="glyphicon glyphicon-yen"></i>订单均价：<small>￥</small> <span id="avgPrice"></span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="box box-default">
                        <div class="box-body">
                            <div class="col-sm-8">
                                <div class="form-group col-lg-6" style="padding: 0 25px;">
                                    <div class="box-header h4 text-light-blue" ><strong id="memDayFrom">动销率走势</strong>
                                    </div></div>
                                <div id="tab-content">
                                    <div class="col-sm-12 no-padding" id="main1" style="height: 350px;"></div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="box-header h4 text-light-blue"><strong id="chanMov">频道动销率</strong></div>
                                <div class="col-sm-12 no-padding" id="main2" style="height: 350px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="box box-default">
                        <div class="box-body">
                            <div class="col-sm-12">
                                <div class="form-group col-lg-6" style="padding: 0 25px;">
                                    <div class="box-header h4 text-light-blue" ><strong id="cityFrom">分城市动销率</strong>
                                    </div></div>
                                    <div class="col-sm-12 no-padding" id="main4" style="height: 350px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="box box-default">
                        <div class="box-body">
                            <div class="col-sm-7 no-padding">
                                <h4 class="box-header h4 text-light-blue"><strong>国安优易(本年度)销量TOP10</strong></h4>
                                <table class="table table-bordered">
                                    <tbody id="pro_data">
                                    <tr>
                                        <th>排名</th>
                                        <th>商品名称</th>
                                        <th>成交量</th>
                                        <th>部门</th>
                                        <th>频道</th>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-sm-5">
                                <div class="box-header h4 text-light-blue"><strong id="chanCount">本年度频道销量</strong></div>
                                <div class="col-sm-12 no-padding" id="main3" style="height: 400px;"></div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
            <div class="vertical-example" id="citySelect" style="display:none">
                <nav id="gooey-v">
                    <input type="checkbox" class="menu-open" name="menu-open4" id="menu-open4"/>
                    <label class="open-button" for="menu-open4" style="font-size: 16px;font-weight: normal;">城市</label>
                    <div id="showcitys"></div>
                </nav>
            </div>
        </div>
    </div>
    <!-- ./wrapper -->
    <div id="city_detail_div" style="height:350px;display:none">
        <div class="col-sm-12 no-padding" id="mainTry" style="height: 260px;"></div>
    </div>

    <!-- jQuery 2.2.0 -->
    <script src="plugins/jQuery/jQuery-2.2.0.min.js"></script>
    <!-- Bootstrap 3.3.6 -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="plugins/fastclick/fastclick.js"></script>
    <!-- AdminLTE App -->
    <script src="dist/js/app.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="dist/js/demo.js"></script>
    <script src="dist/js/jquery.dataStatistics.js"></script>
    <!-- Select2 -->
    <script src="plugins/select2/select2.full.min.js"></script>
    <!-- iCheck 1.0.1 -->
    <script src="plugins/iCheck/icheck.min.js"></script>
    <!-- page script -->
    <script type="text/javascript" src="plugins/jquery.page.js"></script>
    <script type="text/javascript" src="plugins/moment.min.js"></script>
    <script type="text/javascript" src="plugins/daterangepicker/daterangepicker.js"></script>
    <script src="dist/js/utils/htmlToPdf/html2canvas.js"></script>
    <script src="dist/js/utils/htmlToPdf/jspdf.debug.js"></script>
    <script type="text/javascript" src="../scripts/bidLibjsjquery3.0.js"></script>
    <script type="text/javascript" src="../scripts/auto.js"></script>


    <script src="dist/js/jquery.dataStatistics.js"></script>

    <!-- Morris.js charts -->
    <script src="bootstrap/js/raphael-min.js"></script>
    <script src="plugins/morris/morris.min.js"></script>
    <!-- FastClick -->
    <!-- AdminLTE App -->
    <!-- AdminLTE for demo purposes -->
    <script src="dist/js/nav-scroll.js"></script>
    <!-- 引入 ECharts 文件 -->
     <script src="dist/js/echarts.common.min.js"></script>
    <script src="dist/js/nav-scroll.js"></script>
    <script src="dist/js/demo.js"></script>
    <script src="dist/js/nav-scroll.js"></script>
    <script src="dist/js/base64.js"></script>
    <script src="plugins/gooey_menu/gooey.min.js"></script>
    <script type="text/javascript">
        debugger;
        var target = decode64(getUrlParamByKey("t"));//target 0：总部  1:城市级别 2：门店
        var cityId = decode64(getUrlParamByKey("c"));//城市ID
        var cityName = decode64(getUrlParamByKey("cn"));//城市名称
        var employeeId = decode64(getUrlParamByKey("e"));//员工编号/id
        var screenlogin=getUrlParamByKey("su");
        var loadIndex = null;
        var option1_1 = null;
        var option1 = null;
        var mem_all = 0;
        var mem_big = 0;
        function rebateMoney(x) {
            var y = '';
            if(x>10000){
                x=x/10000;
                if(parseInt(x)/10000<=1){
                    y=ForDight(x,2)+"万";
                }else if(parseInt(x)/10000>1){
                    x=x/10000+'';
                    y=ForDight(x,2)+"亿";
                }
            }else{
                y=x;
            }
            return y;
        }
        function ForDight(str,How){
            Dight = Math.round(str*Math.pow(10,How))/Math.pow(10,How);
            return Dight;
        }
        document.addEventListener('click',function (e) {
            var parent=$(e.target).parents('.add_citymember,.add_TestMember,.show_cmBig');
            if(parent.length===0){
                $("#setadd").val("0");
                $("#cityMember").hide();
                $("#setTry").val("0");
                $("#try_Member").hide();
                $("#setBig").val("0");
                $("#bigMember2").hide();
            }
        });

        //设置加载中图标
        var setLoadingMark = function (bShow) {
            if (bShow == true) {
                $("#process_div").show();
                $("#process_div_pic").show();
            } else {
                $("#process_div").hide();
                $("#process_div_pic").hide();
            }
        };

        function loginShow(){

            if(screenlogin!=null&&screenlogin!=''&&screenlogin!=undefined){
                var b = new Base64();
                screenlogin=b.decode(screenlogin);
                var obj=JSON.parse(screenlogin);
                var reObj = new PMSRequestObject("userManager", "isAppScreenUser", [obj.code,obj.employeeId,obj.password]);
                var callback = function callback(data, textStatus, XMLHttpRequest) {
                    //window.parent.location=getRootPath() + "/crm/index_K.html?pls=0";
                    var stateObject = {};
                    var newUrl = "/daqWeb/crm/youyi_product?ta=0";
                    target = null;
                    //showCitys();
                    getUser();
                    doYouyiInfo1();
                    doYouyiInfo2();
                    doYouyiInfo3();
                    doYouyiInfo4();
                    doYouyiInfo5();
                    doYouyiInfo6();
                    //最新方式

                    history.pushState(stateObject,null,newUrl);
                };
                var failureCallback = function failureCallback(data, textStatus, XMLHttpRequest) {
                    alert("登录信息错误，请确认输入或联系管理员!");
                    return false;
                }
                var url = "../login.do";
                $$.ajax(url, "requestString=" + reObj.toJsonString(), callback, failureCallback);
            }else{

                //下载报告
                $("#showDown").show();
                var downPdf = document.getElementById("downloadPdf");
                var pagedom = $("#page");
                downPdf.onclick = function() {
                    $("#process_div").show();
                    $("#process_div_pic").show();
                    scrollTo(0,0);
                    html2canvas(pagedom, {
                        onrendered : function(canvas) {
                            var contentWidth = canvas.width;
                            var contentHeight = canvas.height;
                            //一页pdf显示html页面生成的canvas高度;
                            var pageHeight = contentWidth / 592.28 * 841.89;
                            //未生成pdf的html页面高度
                            var leftHeight = contentHeight;
                            //页面偏移
                            var position = 0;
                            //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高
                            var imgWidth = 595.28;
                            var imgHeight = 592.28 / contentWidth
                                * contentHeight;
                            var pageData = canvas.toDataURL('image/jpeg', 1.0);
                            var pdf = new jsPDF('', 'pt', 'a4');
                            //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)
                            //当内容未超过pdf一页显示的范围，无需分页
                            if (leftHeight < pageHeight) {
                                pdf.addImage(pageData, 'JPEG', 0, 0, imgWidth,
                                    imgHeight);
                            } else {
                                while (leftHeight > 0) {
                                    pdf.addImage(pageData, 'JPEG', 0, position,
                                        imgWidth, imgHeight)
                                    leftHeight -= pageHeight;
                                    position -= 841.89;
                                    //避免添加空白页
                                    if (leftHeight > 0) {
                                        pdf.addPage();
                                    }
                                }
                            }
                            pdf.save('国安优易社运营简报.pdf');
                            $("#process_div_pic").hide();
                            $("#process_div").hide();
                        }
                    })
                }

                //showCitys();
                getUser();
                doYouyiInfo1();
                doYouyiInfo2();
                doYouyiInfo3();
                doYouyiInfo4();
                doYouyiInfo5();
                doYouyiInfo6();
            }

        }
        function showCitys(){
            doManager('communeMember','getCityCode',"0000",function(data) {
                if (data.result) {
                    var resultJson = JSON.parse(data.data);
                    if(resultJson != null){
                        showCityInfo(resultJson);
                        $("#gooey-v").gooeymenu({
                            bgColor: "#68d099",
                            contentColor: "white",
                            style: "vertical",
                            horizontal: {
                                menuItemPosition: "glue"
                            },
                            vertical: {
                                menuItemPosition: "glue",
                                direction: "down"
                            },
                            circle: {
                                radius: 90
                            },
                            margin: "small",
                            size: 60,
                            bounce: true,
                            bounceLength: "small",
                            transitionStep: 100,
                            hover: "#68d099"
                        });
                        $('#citySelect').css('display','block');

                    }
                }
            },false);
        }

        var showCityInfo = function (dataServer){
            var cityName = dataServer.jsonCityName;
            var cityCode = dataServer.jsonCityCode;
            var cityStr="";
            for(var i=0;i<cityCode.length;i++){
                cityStr += "<a href=\"javascript:doCityMem('"+cityCode[i]+"')\"  class='gooey-menu-item'>"+cityName[i]+"</a>";
            }
            $("#showcitys").append(cityStr);
        };
        function getUser(){
            doManager("UserManager", "getCurrentUserDTO",null,function(data, textStatus, XMLHttpRequest) {
                if (data.result) {
                    var employeeID="";
                    var curr_user = JSON.parse(data.data);
                    if(curr_user == null){
                        urlStr = "../logout.do";
                        window.location.href = urlStr;
                    }
                }
            },false);
        }
        $(function () {
            loginShow();
        });



        ////////////////////////////////////////数据信息///////////////////////////////////////
        function doYouyiInfo1(){
            //直接赋值---基本信息加载
            doManager('youyiProduct','selectYouyiSku',"0000",function(data){
                if(data.result){
                    var resultJson= JSON.parse(data.data);
                    showDataInfo(resultJson);
                    setLoadingMark(false);
                }else{
                }
            });
        }

        var showDataInfo = function (dataServer) {
            //SKU总数
            $("#skuAll").html(parseInt(dataServer.skuAll==null?'0':dataServer.skuAll));
            //SKU动销
            $("#skuMove").html(parseInt(dataServer.skuMove==null?'0':dataServer.skuMove));
            //上新SKU
            //$("#newSku").html(parseInt(dataServer.newSku==null?'0':dataServer.newSku));
            //动销率
            $("#movePercent").html((dataServer.skuMove/dataServer.skuAll==null?'0':(dataServer.skuMove/dataServer.skuAll)*100).toFixed(1)+"%");
            //GMV
            //$("#youyiGmv").html(parseInt(dataServer.oldCmCount==null?'0':dataServer.oldCmCount));
            //订单均价
            // $("#avgPrice").html(changeMoney(parseInt(dataServer.yesEshopSum==null?'0':dataServer.yesEshopSum)));
        };

        function doYouyiInfo2(){
            //直接赋值---基本信息加载
            doManager('youyiProduct','selectMovingByMonth',"0000",function(data){
                if(data.result){
                    var resultJson= JSON.parse(data.data);
                    showChannelMove(resultJson);
                }else{
                }
            });
        }
        var showChannelMove = function (dataServer){

            var myChart1= echarts.init(document.getElementById('main1'));
            option1 = {
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                    ,formatter: function (params)
                    {
                        return params[0].name + '<br/>'
                            + params[0].marker+params[0].seriesName + ' : ' + (params[0].value) + '%<br/>'
                            + params[1].marker+params[1].seriesName + ' : ' + (params[1].value) + '%<br/>'
                            + params[2].marker+params[2].seriesName + ' : ' + params[2].value+'%';
                    }
                },
                legend: {
                    data:['特产频道','生鲜频道','日用百货']
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    containLabel: true
                },
                calculable : true,
                xAxis : [
                    {
                        type : 'category',
                        data: dataServer.jsonMonth
                    }
                ],
                yAxis : [
                    {
                        type: 'value',
                        name:'动销率',
                        axisLabel: {
                            show: true,
                            interval: 'auto',
                            formatter: '{value} %'
                        },
                        show: true
                    }
                ],
                series : [
                    {
                        name:'特产频道',
                        type:'line',
                        barWidth: 40,                   // 系列级个性化，柱形宽度
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                borderRadius: 5,
                                color :'#00a65a',
                                label : {
                                    show : true,
                                    position: 'top',
                                    formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        // fontWeight : 'bold'
                                    }
                                }
                            }
                        },
                        data:dataServer.jsonTechan,
                        markPoint : {
                      /*      data : [
                                {type : 'max',name:'最大值'},
                                {type : 'min',name:'最小值'}
                            ]*/
                        }
                    },
                    {
                        name:'生鲜频道',
                        type:'line',
                        barWidth: 40,                   // 系列级个性化，柱形宽度
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                borderRadius: 5,
                                color : '#ffae00',
                                label : {
                                    show : true,
                                    position: 'bottom',
                                    formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        // fontWeight : 'bold'
                                    }
                                }
                            }
                        },
                        data:dataServer.jsonShengxian,
                        markPoint : {
                     /*       data : [
                                {type : 'max',name:'最大值'},
                                {type : 'min',name:'最小值'}
                            ]*/
                        }
                    },
                    {
                        name:'日用百货',
                        type:'line',
                        barWidth: 40,                   // 系列级个性化，柱形宽度
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                borderRadius: 5,
                                color :'#B03A5B',
                                label : {
                                    show : true,
                                    position: 'top',
                                    formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        // fontWeight : 'bold'
                                    }
                                }
                            }
                        },
                        data:dataServer.jsonRiyong,
                        markPoint : {
/*                            data : [
                                {type : 'max',name:'最大值'},
                                {type : 'min',name:'最小值'}
                            ]*/
                        }
                    }
                ]
            };
            myChart1.setOption(option1);
            var myChart2= echarts.init(document.getElementById('main2'));
            option2 = {
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                    formatter: function (params)
                    {
                        return params[0].name + '<br/>'
                            + params[0].marker+params[0].seriesName + ' : ' + (params[0].value) + '%<br/>'
                            + params[1].marker+params[1].seriesName + ' : ' + (params[1].value) + '%<br/>'
                            + params[2].marker+params[2].seriesName + ' : ' + params[2].value+'%';
                    }
                },
                legend: {
                    data: ['特产频道', '生鲜频道','日用百货']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    axisLabel: {
                        show: true,
                        interval: 'auto',
                        formatter: '{value} %'
                    },
                    boundaryGap: [0, 0.01]
                },
                yAxis: {
                    type: 'category',
                    data: ['']
                },
                series: [
                    {
                        name: '特产频道',
                        type: 'bar',
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                color :'#00a65a',
                                label : {
                                    show : true,
                                    position: 'inside',
                                     formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        fontWeight : 'bold',
                                        color:'#ffffff'
                                    }
                                }
                            }
                        },
                        data: [ dataServer.jsonAllTechan ]
                    },
                    {
                        name: '生鲜频道',
                        type: 'bar',
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                color :'#ffae00',
                                label : {
                                    show : true,
                                    position: 'inside',
                                     formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        fontWeight : 'bold',
                                        color:'#ffffff'
                                    }
                                }
                            }
                        },
                        data:[ dataServer.jsonAllRiyong]
                    },
                    {
                        name: '日用百货',
                        type: 'bar',
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                color :'#B03A5B',
                                label : {
                                    show : true,
                                    position: 'inside',
                                     formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        color:'#ffffff',
                                        fontWeight : 'bold'
                                    }
                                }
                            }
                        },
                        data:[ dataServer.jsonAllShengxian]
                    }
                ]
            };
            myChart2.setOption(option2);
        }

        function doYouyiInfo3(){
            //直接赋值---基本信息加载
            doManager('youyiProduct','selectCityMoving',"0000",function(data){
                if(data.result){
                    var resultJson= JSON.parse(data.data);
                    showCityMove(resultJson);
                }else{
                }
            });
        }
        var showCityMove = function (dataServer){

            var myChart4= echarts.init(document.getElementById('main4'));
            option4 = {
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    },
                    formatter: function (params)
                    {
                        return params[0].name + '<br/>'
                            + params[0].marker+params[0].seriesName + ' : ' + (params[0].value) + '%';
                    }
                },
                legend: {
                    data:['城市']
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    containLabel: true
                },
                calculable : true,
                xAxis : [
                    {
                        type : 'category',
                        axisLabel: {
                            interval:0,
                            rotate:40
                        },
                        data: dataServer.jsonCityName
                    }
                ],
                yAxis : [
                    {
                        type: 'value',
                        name:'动销率',
                        axisLabel: {
                            show: true,
                            interval: 'auto',
                            formatter: '{value} %'
                        },
                        show: true
                    }
                ],
                series : [
                    {
                        name:'城市',
                        type:'bar',
                        barWidth: 40,                   // 系列级个性化，柱形宽度
                        itemStyle: {
                            normal: {                   // 系列级个性化，横向渐变填充
                                borderRadius: 5,
                                color :'#27727B',
                                label : {
                                    show : true,
                                    position: 'top',
                                     formatter: '{c}%',
                                    textStyle : {
                                        fontSize : '14',
                                        fontFamily : '微软雅黑',
                                        fontWeight : 'bold'
                                    }
                                }
                            }
                        },
                        data:dataServer.jsonCityMove
                    }
                ]
            };
            myChart4.setOption(option4);
        }

        function doYouyiInfo4(){
            //查询top10商品
            doManager('youyiProduct','selectSkuTop',"0000",function(data){
                if(data.result){
                    var resultJson= JSON.parse(data.data);
                    showPro(resultJson);
                }else{
                }
            });
        }
        var showPro = function (dataServer) {
            var josnProName = dataServer.josnProName;
            var josnProCount = dataServer.josnProCount;
            var josnProChannel = dataServer.josnProChannel;
            var strPro="";
            if(josnProName==null||josnProName.length==0){
                strPro = "<tr>没有符合条件的数据</tr>"
            }else{
                for(var i=0;i<josnProName.length;i++){
                    strPro= "<tr>";
                    switch(i)
                    {
                        case 0:
                            strPro += "<td><span class='badge bg-red'>"+(i+1)+"</span></td>";
                            break;
                        case 1:
                            strPro += "<td><span class='badge bg-yellow'>"+(i+1)+"</span></td>";
                            break;
                        case 2:
                            strPro += "<td><span class='badge bg-blue'>"+(i+1)+"</span></td>";
                            break;
                        case 3:
                            strPro += "<td><span class='badge bg-green'>"+(i+1)+"</span></td>";
                            break;
                        case 4:
                            strPro += "<td><span class='badge bg-purple'>"+(i+1)+"</span></td>";
                            break;
                        default:
                            strPro += "<td><span class='badge bg-brown'>"+(i+1)+"</span></td>";
                    }

                    strPro +="<td>"+josnProName[i]+"</td>"+"<td>"+josnProCount[i]+"</td>" +"<td>国安优易</td>" +"<td>"+josnProChannel[i]+"</td>";


                    strPro += "</tr>";
                    $("#pro_data").append(strPro);
                }
            }
        }

        function doYouyiInfo5(){
            //加载频道销量占比
            doManager('youyiProduct','selectChannelSell',"0000",function(data){
                if(data.result){
                    var resultJson= JSON.parse(data.data);
                    showChanPie(resultJson);
                }else{
                }
            });
        }
        var showChanPie = function (dataServer) {
            var myChart3 = echarts.init(document.getElementById('main3'));
            option3 = {
                tooltip: {
                    trigger: 'item',
                    formatter: "{b} : {c} ({d}%)"
                },
                legend: {
                    selectedMode:false,
                    right:10,
                    top: 10,
                    orient:'vertical',
                    data:['特产频道', '生鲜频道','日用百货']
                }
                ,series: [
                    {
                        type: 'pie',
                        radius: '75%',
                        center: ['50%', '60%'],
                        //clockwise: false,
                        data: [{
                            value: dataServer.cTechanCou==null?'0':dataServer.cTechanCou,
                            name: '特产频道'
                        }, {
                            value: dataServer.cShengxianCou==null?'0':dataServer.cShengxianCou,
                            name: '生鲜频道'
                        }, {
                            value: dataServer.cRiyongCou==null?'0':dataServer.cRiyongCou,
                            name: '日用百货'
                        }],
                        label: {
                            normal: {
                                position: 'out', //标签的位置
                                formatter: '{b}\n{d}%',
                                color: '#59ADF3'

                            }
                        },
                        labelLine: {
                            normal: {
                                show: true
                            }
                        },
                        itemStyle: {
                            normal: {
                                borderWidth: 4,
                                borderColor: '#FFCC67',
                                labelLine: {
                                    show: true
                                }
                            },
                            emphasis: {
                                borderWidth: 0,
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }] ,
                color: [
                    '#00acee',
                    '#f39c12',
                    '#00a65a'
                ],
            };
            myChart3.setOption(option3);
        }
        function doYouyiInfo6(){
            var d = new Date();
            var years = d.getFullYear();
            $("#selyear").html(years);
            //直接赋值---基本信息加载
            doManager('youyiProduct','selectYouyiGmv',"0000",function(data){
                if(data.result){
                    var resultJson= JSON.parse(data.data);
                    showOrderInfo(resultJson);
                }else{
                }
            });
        }

        var showOrderInfo = function (dataServer) {
            //订单量
            $("#orderCou").html(rebateMoney(dataServer.orderCou==null?'0':dataServer.orderCou));
            //GMV
            $("#youyiGmv").html(rebateMoney(dataServer.youyiGmv==null?'0':dataServer.youyiGmv));
            //订单均价
             $("#avgPrice").html(rebateMoney(dataServer.youyiGmv/dataServer.orderCou==null?'0':(dataServer.youyiGmv/dataServer.orderCou)).toFixed(1));
        };
    </script>
</body>
</html>