<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>片区数据</title>
  <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="../crm/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../crm/bootstrap/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="../crm/bootstrap/css/ionicons.min.css">
  <!-- Morris charts -->
  <link rel="stylesheet" href="../crm/plugins/morris/morris.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../crm/dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="../crm/dist/css/skins/_all-skins.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="IE 9/html5shiv.min.js"></script>
  <script src="IE 9/respond.min.js"></script>
  <![endif]-->
  <style>
  html,body,.skin-blue .wrapper{background-color: #f1f1f1; min-height: 100%;}
  p{margin: 0;}
  /*tab切换*/
  .nav-tabs > li{line-height: 40px; float: none; display: inline-block;}
  .nav-tabs > li > a{color: #666;}
  .nav-tabs > li > a:hover{border-color: transparent}
  .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover{border: 0; border-bottom: 2px solid #1874ef; color: #1874ef}
  /*tab切换 end*/
  .nav_l{box-shadow: 2px 0 5px rgba(0,0,0,0.5); background-color: #fff; overflow-y: scroll;}
  .nav_l::-webkit-scrollbar{width: 8px; background-color: #fff;}
  .nav_l::-webkit-scrollbar-thumb{background-color: #adadad; border-radius: 3px;}
  .nav_l::-webkit-scrollbar-track{background-color: #fff;}
  .bg-light-blue-gradient{border-radius: 5px; margin-top: 10px;}
  .dl-horizontal dt{width: 90px;}
  .dl-horizontal dd{margin-left: 110px;}
  .dl-horizontal span{padding-left: 20px;}
  .bg-light-blue-gradient .col-sm-3{background-color: #0045a0; border-radius: 5px; color: #ffee00; line-height: 36px; padding-top: 15px; padding-bottom: 15px;}
  .bg-light-blue-gradient .col-sm-3 p:nth-child(1){font-size: 28px; font-weight: bold;}
  
  #mapContainer {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
     } 
     
     
     .marker-route {
          position: absolute;
          padding: 5px 10px;
          color: #e90000;
          background:#4598e0;
          cursor: pointer;
          white-space:nowrap;
          position: relative;
          color: #fff;
          border-radius: 3px;
          font-size:14px;
        }
     .marker-route:after {
       	content:'';
        position: absolute;
       	width: 0;
	    height: 0;
	    border-left: 5px solid transparent;
	    border-right: 5px solid transparent;
	    border-top: 6px solid #4598e0;
      	bottom: -6px;
       	left:50%;
       	margin-left:-5px;
      }
    #process_div{ 
		background-color:#292a2b; 
		display:inline; 
		z-index:100000;  
		left:0px; 
		opacity:0.3; top:0; left:0;height:100%; width:100%; z-index:999; position:fixed; _position:absolute; _left: expression_r(documentElement.scrollLeft + documentElement.clientWidth - this.offsetWidth); _top: expression_r(documentElement.scrollTop + documentElement.clientHeight - this.offsetHeight);
		filter:Alpha(Opacity=30); 
		opacity: 0.3; 
	} 
	
	#process_div_pic{
		position:fixed;
		top:50%;
		left:50%; 
		z-index:100000000; 
		margin:-16px 0 0 -50px; 
		width:100px; 
		height:32px;
		color: #fff;
	}
	
	
	.menu{position: absolute; bottom: 10px;  right: 20px; width: 550px; background-color: rgba(73,73,72,.6); border-radius: 10px; box-shadow: 1px 2px 1px rgba(0,0,0,.15);-webkit-transition: all .3s ease-in-out;-o-transition: all .3s ease-in-out;transition: all .3s ease-in-out;}
	.legend{font-size: 16px; color: #fff;}
	.menu_list{ width: 535px; padding: 10px 0 0 15px; color: #dfdfdf;}
	.menu_list_bg{height: 10px; width: 100%; background: -webkit-linear-gradient(#ffee0000,#f6ff01,#ffc001,#ff9c01,#ff6701,#ff1901); /* Safari 5.1 - 6.0 */ background: -o-linear-gradient(#ffee0000,#f6ff01,#ffc001,#ff9c01,#ff6701,#ff1901); /* Opera 11.1 - 12.0 */ background: -moz-linear-gradient(#ffee0000,#f6ff01,#ffc001,#ff9c01,#ff6701,#ff1901); /* Firefox 3.6 - 15 */ background: linear-gradient(to right, #ffee0000,#f6ff01,#ffc001,#ff9c01,#ff6701,#ff1901); /* 标准的语法（必须放在最后） */}
	.menu_list li{float: left; width: 20%; text-align: right; 
/* 	padding: 5px 0 10px 0; */
	}
	
	 .menu_1{position: absolute; top:30px;  right: 20px; width: 180px; background-color: #fff;}
	.legend_1{font-size: 15px; padding: 15px 0 0 15px;}
	.menu_list_1{ width: 180px; padding-top: 10px; box-shadow: 1px 2px 1px rgba(0,0,0,.15);-webkit-transition: all .3s ease-in-out;-o-transition: all .3s ease-in-out;transition: all .3s ease-in-out;}

	.menu_list_1 li{line-height: 22px; font-size: 12px; padding-bottom: 10px;}
	.menu_list_1 li:nth-last-child(1){border: none;}
	.menu_list_1 li p:nth-child(1){padding-bottom: 2px; color: #333;}
	p{margin: 0;}
    .menu_list_1 li a{color: #999; display: inline-block; width: 100%; text-decoration: none; padding-top: 5px;}

	.no-padding{padding: 0;}
    .menu_list_1 .col-sm-3{ height: 15px; margin: 5px 0 0 0;}
	.menu_list_1 .col-sm-9 b{padding-left: 10px;}
	
	  	/*弹窗蓝色title样式*/	
  	div.amap-info-content{
  		padding:0 0 0 0;
  	}
  	div.amap-info-outer{
  		padding:0px;
  	}
  	a.amap-info-close{
  		top:10px
  	}
  	/*弹窗X样式*/
  	A:link{
  		font-size: 14px;
	    color: #eee;
	    text-decoration: none;
  	}
  	
  	A:visited{
  		font-size: 14px;
	    color: #eee;
	    text-decoration: none;
  	}
  	
  	.layui-layer-btn a{
  	   font-size:12px;
  	}
	
  </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">
  <div id="process_div" ></div>
  <div id="process_div_pic" ><img style="width:50px;height: 50px;" src="../crm/dist/img/376884043677306248.png"><i class="fa fa-refresh fa-spin"></i></div>
  <header class="main-header">
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <div class="container">
        <div class="logo_img pull-left"><img src="../crm/dist/img/logo1.png" height="30"><img src="../crm/dist/img/title.png" height="20"></div>
        <div class="pull-left">
          <div class="logo-lg">
<!--             <ul class="no-margin"> -->
<!--               <li class="current"> -->
<!--                 <em class="logo_cs">数据运营<i class="glyphicon glyphicon-triangle-bottom"></i></em> -->
<!--                 <div class="TDsec-nav"> -->
<!--                   <div class="secNav-box"> -->
<!--                     <dl class="col-sm-3"> -->
<!--                       <dt><i></i>运营数据</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-money"></span>营业额统计</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-user-plus"></span>用户运营</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-cubes"></span>产品运营</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-institution"></span>门店运营</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-comments-o"></span>混片情况</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-3"> -->
<!--                       <dt><i></i>绩效数据</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-line-chart"></span>门店GMV</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-pie-chart"></span>国安侠GMV</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-area-chart"></span>门店拉新</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-bar-chart"></span>国安侠拉新</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-thumbs-o-up"></span>国安侠好评次数</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-3"> -->
<!--                       <dt><i></i>档案数据</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-file-o"></span>订单档案</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-newspaper-o"></span>员工档案</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-copy"></span>片区档案</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-clipboard"></span>小区档案</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-3"> -->
<!--                       <dt><i></i>排名数据</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-signal"></span>XX排名</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-signal"></span>XX排名</a></dd> -->
<!--                     </dl> -->
<!--                   </div> -->
<!--                 </div> -->
<!--               </li> -->
<!--               <li> -->
<!--                 <em>数据模型<i class="glyphicon glyphicon-triangle-bottom"></i></em> -->
<!--                 <div class="TDsec-nav"> -->
<!--                   <div class="secNav-box"> -->
<!--                     <dl class="col-sm-4"> -->
<!--                       <dt><i></i>社区模型</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-sitemap"></span>基础数据模型</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-4"> -->
<!--                       <dt><i></i>订单模型</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-server"></span>公海订单</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-warning "></span>异常订单</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-4"> -->
<!--                       <dt><i></i>用户模型</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-street-view"></span>用户画像</a></dd> -->
<!--                     </dl> -->
<!--                   </div> -->
<!--                 </div> -->
<!--               </li> -->
<!--               <li> -->
<!--                 <em>数据地图<i class="glyphicon glyphicon-triangle-bottom"></i></em> -->
<!--                 <div class="TDsec-nav"> -->
<!--                   <div class="secNav-box"> -->
<!--                     <dl class="col-sm-4"> -->
<!--                       <dt><i></i>热力图</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-money"></span>订单热力图</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-user-secret"></span>用户人力图</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-4"> -->
<!--                       <dt><i></i>覆盖范围</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-object-group"></span>门店覆盖范围</a></dd> -->
<!--                       <dd><a href="#"><span class="fa fa-map-o"></span>片区分布图</a></dd> -->
<!--                     </dl> -->
<!--                     <dl class="col-sm-4"> -->
<!--                       <dt><i></i>动态图</dt> -->
<!--                       <dd><a href="#"><span class="fa fa-group"></span>国安侠分布图</a></dd> -->
<!--                     </dl> -->
<!--                   </div> -->
<!--                 </div> -->
<!--               </li> -->

<!--             </ul> -->


          </div>
        </div>
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">

<!--             <li class="dropdown user user-menu"> -->
<!--               <a href="#" class="dropdown-toggle" data-toggle="dropdown"> -->
<!--                 <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image"> -->
<!--                 <span class="hidden-xs">王春</span> -->
<!--               </a> -->
<!--               <ul class="dropdown-menu"> -->
<!--                 User image -->
<!--                 <li class="user-header"> -->
<!--                   <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image"> -->

<!--                   <p><strong>王春</strong></p> -->
<!--                   <p>店长<span>A77777</span></p> -->
<!--                   <p>呼家楼店</p> -->
<!--                 </li> -->

<!--                 Menu Footer -->
<!--                 <li class="user-footer"> -->
<!--                   <div class="pull-left"> -->
<!--                     <a href="#" class="btn btn-default btn-flat">个人中心</a> -->
<!--                   </div> -->
<!--                   <div class="pull-right"> -->
<!--                     <a href="#" class="btn btn-default btn-flat">退出</a> -->
<!--                   </div> -->
<!--                 </li> -->
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
      <!-- Main content -->
      <section>
        <div class="col-sm-5 nav_l" id="nav_l">
          <div class="bg-light-blue-gradient">
            <div class="box-body"style="padding-right: 20px;">
              <dl class="dl-horizontal col-sm-9 no-padding">
                <dt>片区名称</dt>
                <dd id="area_name"></dd>
                <dt>片区编号</dt>
                <dd id="area_no"></dd>
                <dt>片区总户数</dt>
                <dd id="house_total">102</dd>
                <!-- <dt>已服务户数</dt>
                <dd>敬请期待...</dd> -->
                <dt>片区管家</dt>
                <dd id="area_manager"></dd>
<!--                 <dt>片区范围</dt> -->
<!--                 <dd id="area_info">关东店社区<span>向军南里-5</span><span><a id="to_detail" class="text-light-blue" href="#">详情</a></span><br></dd> -->
              </dl>
              <div class="col-sm-3 text-center">
                <p id="order_amount"></p>
                <p id="order_date"></p>
              </div>
            </div>
          </div>
          <!-- Tabs within a box -->
          <ul class="nav nav-tabs no-border text-center">
            <li class="active"><a href="#revenue-chart" onclick="javascript:showTinyVillageHeat('gmv')" data-toggle="tab">营业额</a></li>
            <li>|</li>
            <li><a href="#sales-chart" data-toggle="tab" onclick="javascript:chartresize()">用户量</a></li>
          </ul>
          <div class="tab-content no-padding" id="tab-content">
            <!-- Morris chart - Sales -->
            <div class="chart tab-pane active" id="revenue-chart">
              <div class="col-sm-12 no-padding" id="main1" style="height: 300px; margin-top: 20px;"></div>
              <div class="col-sm-6" id="main2" style="height: 300px; margin-top: 20px;"></div>
              <div class="col-sm-6" id="main3" style="height: 300px; margin-top: 20px;"></div>
            </div>
            <div class="chart tab-pane" id="sales-chart">
              <div class="col-sm-12 no-padding">
                <div id="main4" style="width: 100%; height: 300px; margin-top: 20px;"></div>
              </div>
              <div class="col-sm-6" id="main5" style="height: 300px; margin-top: 20px;"></div>
              <div class="col-sm-6" id="main6" style="height: 300px; margin-top: 20px;"></div>
            </div>
          </div>

        </div>
        <div class="col-sm-7"  style="padding-left:0px;padding-right:0px;">
          	<div class="box-body"  style="position:relative" id="mapHeight">
          		<div id="mapContainer" style="background-color:rgba(0,0,0,0.5)"></div>
          		<div class="menu" id="heat_legend_color" style="display:none">
				   <div class="menu_list clearfix" id="test">
					   <div class="legend">小区营业额(元)</div>
					   <div class="menu_list_bg"></div>
					   <ul id="heat_legend_title">
					   </ul>
				   </div>
				   <div></div>
			   </div>
			   <div class="menu_1">
			   <div class="legend_1"><b>图例：</b></div>
			   <div class="menu_list_1 clearfix">
				   <ul  id="example" class='no-padding'>
				   </ul>
			   </div>
			  
		   </div>
        </div>
      </section>
  </div>
  <!-- /.content-wrapper -->

</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.0 -->
<script src="../crm/plugins/jQuery/jQuery-2.2.0.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="../crm/bootstrap/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="../crm/plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../crm/dist/js/app.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../crm/dist/js/demo.js"></script>
<!-- <script src="dist/js/nav-scroll.js"></script> -->
<!-- 引入 ECharts 文件 -->
<script src="../crm/dist/js/echarts.common.min.js"></script>
<script type="text/javascript" src="../scripts/bidLibjsjquery3.0.js"></script>
<script src="https://webapi.amap.com/maps?v=1.4.2&key=f52a1bb11408e8a46dc884b2aaa44edc&plugin=AMap.PolyEditor,AMap.CircleEditor"></script>
<script language="javascript" src="../scripts/common/heatMap_color.js"></script>
<script type="text/javascript" src="js/current_shopkeeper_demo.js"></script>
<script type="text/javascript" src="js/index_area_demo.js"></script>
<script>
  var myChart1 = echarts.init(document.getElementById('main1'));
  var myChart2 = echarts.init(document.getElementById('main2'));
  var myChart3 = echarts.init(document.getElementById('main3'));

  var areaNo = decode64(getUrlParamByKey("ao"));//片区编号
  
  
  
  
//初始化地图对象，加载地图
  var map = new AMap.Map("mapContainer", {
      resizeEnable : true,
      zoom : 15
  });


  map.plugin(["AMap.ToolBar"],function(){
      //加载工具条
      var toolBaropt = {
          offset :new AMap.Pixel(20,55),//相对于地图容器左上角的偏移量，正数代表向右下偏移。默认为AMap.Pixel(10,10)
          /*
           *控件停靠位置
           *LT:左上角;
           *RT:右上角;
           *LB:左下角;
           *RB:右下角;
           *默认位置：LT
           */
          position : 'LT',
          ruler : true,//标尺键盘是否可见，默认为true
          noIpLocate : false,//定位失败后，是否开启IP定位，默认为false
          locate : true,//是否显示定位按钮，默认为false
          liteStyle : false,//是否使用精简模式，默认为false
          direction : true,//方向键盘是否可见，默认为true
          autoPosition : false,//是否自动定位，即地图初始化加载完成后，是否自动定位的用户所在地，在支持HTML5的浏览器中有效，默认为false

          /**
           *是否使用高德定位sdk用来辅助优化定位效果，默认：false.
           *仅供在使用了高德定位sdk的APP中，嵌入webview页面时使用
           *注：如果要使用辅助定位的功能，除了需要将useNative属性设置为true以外，
           *还需要调用高德定位idk中，AMapLocationClient类的startAssistantLocation()方法开启辅助H5定位功能；
           *不用时，可以调用stopAssistantLocation()方法停止辅助H5定位功能。具体用法可参考定位SDK的参考手册
           */
          useNative : false
      }
      var tool = new AMap.ToolBar(toolBaropt);
      map.addControl(tool);
  });
  
  
  $(function(){
	  initArea();
	  setExample();
	  getStorePosition();
	  showTinyVillageHeat("gmv");//小区热力图
	  showEmployeeDriverRecord();
	  queryCurMonthPerformanceOfArea("gmv");
	  $("#order_amount").html(AREA_ORDER_AMOUNT);
	  var curDate = new Date();
	  var c_month = curDate.getMonth()+1;
	  $("#order_date").html(c_month+"月订单量")
  })
  
  
  var setExample = function(){
	    $("#example").empty();
		$("#example").append("<li class='col-lg-12'><div class='col-sm-3' style='width:60px;margin:7px 0px 0px -15px'><img style='width:100%;' src='../aboutMap/dist/img/storelogo.png'/></div><div class='col-sm-9' style='margin:6px 0px 0px -9px'><p>门店位置</p></div></li><li class='col-lg-12'><div class='col-sm-3' style='border:2px solid #5c69cc;'></div><div class='col-sm-9'><p>门店服务区</p></div></li>"
		+"<li class='col-lg-12'><div class='col-sm-3' style='border:2px solid #ab50d0;'></div><div class='col-sm-9'><p>小区</p></div></li>");
  }
  
    autodivheight();
    function autodivheight(){ //函数：获取尺寸
        //获取浏览器窗口高度
        var winHeight=0;
        if (window.innerHeight)
            winHeight = window.innerHeight;
        else if ((document.body) && (document.body.clientHeight))
            winHeight = document.body.clientHeight;
        //通过深入Document内部对body进行检测，获取浏览器窗口高度
        if (document.documentElement && document.documentElement.clientHeight)
            winHeight = document.documentElement.clientHeight;
        //DIV高度为浏览器窗口的高度
        //document.getElementById("test").style.height= winHeight +"px";
        //DIV高度为浏览器窗口高度的一半
        document.getElementById("mapHeight").style.height= winHeight-60 +"px";
    }
    window.onresize=autodivheight; //浏览器窗口发生变化时同时变化DIV高度
  
  //初始化片区信息
  var cur_area;
  var chartData_severalDay = {}; 
  var chartData_curMonth = {};
  function initArea(){
	  for(var i=0;i<areas.length;i++){
		  var area_no = areas[i].area_no;
		  if(area_no==areaNo){
			  cur_area = areas[i];
			  break;
		  }
	  }
	  
	  $('#area_name').html(cur_area.name);
      $("#area_no").html(cur_area.area_no);
      var employee_a_name = cur_area.employee_a_name==null?"无":cur_area.employee_a_name;
      var employee_b_name = cur_area.employee_b_name==null?"无":cur_area.employee_b_name;
      var employee_a_no = cur_area.employee_a_no==null?"":cur_area.employee_a_no;
      var employee_b_no = cur_area.employee_b_no==null?"":cur_area.employee_b_no;
      var userStr= "<a style='text-decoration:underline' href=\"javaScript:goToUser('"+employee_a_no+"')\">"+employee_a_name+"</a>(A)&nbsp;&nbsp;&nbsp;&nbsp;<a style='text-decoration:underline' href=\"javaScript:goToUser('"+employee_b_no+"')\">"+employee_b_name+"</a>(B)";
      $("#area_manager").html(userStr); 

  }
  
  function goToUser(no){
	  if(no!=null&&no!=""){
		  window.open("user_demo.html?employee_no="+encode64(no));
	  }
	  
	 
  }
  
  
  
  //获取门店中心点
  function getStorePosition(){
		
			//初始化地图对象，加载地图
			
			var storeMarker = new AMap.Marker({ //添加自定义点标记
	        map: map,
	        visible:true,
	        position:[117.23533,39.093887], //基点位置
		        //icon:"../aboutMap/dist/img/splogo.png",
			//offset: new AMap.Pixel(-10, -10), //相对于基点的偏移位置
	        extData:{"storeName":store.name},
	       // draggable: true,  //是否可拖动
	           content:'<div style="width:40px"><img  style="width:100%" src="../aboutMap/dist/img/storelogo.png"></div>',
	        });
			
			storeMarker.on("mouseover",function(e){
				var storeName = e.target.getExtData().storeName;
				e.target.setTitle(storeName);
		    });
		    map.setCenter([117.23533,39.093887]);
			getMapData();
 }
  
  //获取片区小区信息
  var coordinate;
  var tiny_gmv = [];
  var tiny_consumer = [];
  function getMapData(){
	var coordinate_tiny = [];
	for(var i=0;i<STORE_COORDINATE.length;i++){
		var tem_coor = STORE_COORDINATE[i];
		if(tem_coor["areaNo"]==areaNo){
			 coordinate_tiny.push(tem_coor);
			 var temp_gmv = (1.1-Math.random())*10000; 
       	     var code_gmv = {"gmv":temp_gmv,"code":tem_coor["code"]};
       	     var temp_consumer = Math.round((1.1-Math.random())*50); 
       	     var code_consumer = {"consumer":temp_consumer,"code":tem_coor["code"]};
       	     tiny_gmv.push(code_gmv);
       	     tiny_consumer.push(code_consumer);
		}
	
	}
	initTinyVillage(storeService,coordinate_tiny);//绘制地图
  }


  var googleLayer = null;
  //服务区域
  var  serviceRange;
  var polygonArray = [];
  var polygonMap={};
  
  function initTinyVillage(storeService,coordinate) {
     
      //服务区域多边形
      serviceRange = new AMap.Polygon({
          path: storeService,//设置多边形边界路径
          strokeColor: "#5c69cc", //线颜色
          strokeOpacity: 0.9, //线透明度
          strokeWeight: 2,    //线宽
          fillColor: "#00DD00", //填充色
          fillOpacity: 0//填充透明度
      });
      serviceRange.setMap(map);
      serviceRange.on("click", function () {
          setNavListVisible(false);
      });

      var areaTinyVillage;//小区坐标范围
      var tinyVillageMarker;
      var tinyVillagePolygon;
     
      for(var i=0;i<coordinate.length;i++){
             
              //绘制小区
          	areaTinyVillage = new AMap.Polygon({
                      path:coordinate[i].coordinate_range.coordinates[0],//设置多边形边界路径
                      strokeColor:"#ab50d0", //线颜色
                      strokeOpacity:0.8, //线透明度
                      strokeWeight: 1,    //线宽
                      fillColor: "#6d6969", //填充色
                      fillOpacity:0.5,//填充透明度
                      extData:{"tinyVillageNo":coordinate[i].code,"tinyVillageName":coordinate[i].name} 
                  });
              
              areaTinyVillage.setMap(map);
              polygonMap[coordinate[i].code] = areaTinyVillage;
//               var tmp_tinyVillageCoordinate={
// 	        			code:coordinate[i].code,
// 	        			tinyVillagePolygon:areaTinyVillage
// 	        	}  
//               polygonArray.push(tmp_tinyVillageCoordinate);
//           	  areaTinyVillage.on("click",function(e){
//                   var code= e.target.getExtData().tinyVillageNo;
// 					var url = "../crm/dynamicData_tinyvillage.html?e=&code="+encode64(code);
// 	   				window.open(url,"dynamicData_tinyvillage");
					
// 	        	});
                var $tinyVillageName = coordinate[i].name;  
          	    areaTinyVillage.on("mouseover", function (e) {
          	    	var code= e.target.getExtData().tinyVillageNo;       
                    var name = e.target.getExtData().tinyVillageName;         
          	   
					var info="";
					info = info+"<div style=\"padding:0 0 10px 0;\"><div style=\"background-color:#00c0ef;padding:5px 18px 5px 10px;color:#fff\"><span>小区信息</span></div>";
					info = info+"<div style=\"padding:10px 18px 0px 14px;line-height:24px;\">";
			        info = info+"<b>小区名称："+(name==null?"无":name)+"</b></br>";
			        
			        if(dataModel=="gmv"){
			        	 for(var i=0;i<tiny_gmv.length;i++){
			        		 if(tiny_gmv[i].code==code){
			        			 var dataInfo =  "<b>小区营业额："+tiny_gmv[i].gmv.toFixed(2)+"</b></div></div>";
			        			 break;
			        		 }
			        	 }
			       	     
			       	   
			        }else if(dataModel=="consumer"){
			        	
			        	 for(var i=0;i<tiny_consumer.length;i++){
			        		 if(tiny_consumer[i].code==code){
			        			 var dataInfo = "<b>小区消费用户量："+tiny_consumer[i].consumer+"</b></div></div>";
			        			 break;
			        		 }
			        	 }
			        	 
			        	
			        }
			        info = info+dataInfo;
			        infoWindow1 = new AMap.InfoWindow({ 
			             content: info  //使用默认信息窗体框样式，显示信息内容
			         });
			         infoWindow1.open(map, e.target.getBounds().getCenter());
                 });
          	     
            }
      }


  function showEmployeeDriverRecord(){
	  
	     var locations =[[117.229424,39.093169],[117.229424,39.09317],[117.229477,39.093142],[117.229483,39.093138],[117.229423,39.093223],[117.229375,39.093261],[117.229387,39.093226],[117.229393,39.093226],[117.229397,39.093234],[117.229344,39.093243],[117.229381,39.09324],[117.229382,39.093227],[117.229361,39.093241],[117.22939,39.093227],[117.229424,39.093216],[117.229506,39.09325],[117.229497,39.093238],[117.226827,39.09341],[117.225904,39.09658],[117.224266,39.097047],[117.220365,39.099229],[117.219223,39.099817],[117.219153,39.099858],[117.219226,39.099291],[117.219025,39.099577],[117.219086,39.099634],[117.219063,39.099543],[117.219122,39.099301],[117.219124,39.0993],[117.219124,39.0993],[117.21916,39.099622],[117.219007,39.099732],[117.22079,39.099222],[117.223504,39.098088],[117.225947,39.095899],[117.227424,39.093282],[117.229502,39.093151],[117.2295,39.093151],[117.229591,39.093174],[117.229591,39.093174],[117.229425,39.093216],[117.229424,39.093216],[117.229424,39.093216],[117.229424,39.093216],[117.229392,39.093224],[117.22939,39.093224],[117.229393,39.093224],[117.229425,39.093212],[117.229423,39.093212],[117.229424,39.093212],[117.229424,39.093212],[117.229413,39.093204],[117.229423,39.09321],[117.229401,39.093227],[117.229462,39.093188],[117.229395,39.093217],[117.229396,39.093213],[117.229401,39.093216],[117.229423,39.093212],[117.229441,39.09322],[117.229387,39.093228],[117.229429,39.093223],[117.22942,39.093213],[117.229374,39.093217],[117.229399,39.093215],[117.229399,39.093234],[117.229401,39.093235],[117.229401,39.093235],[117.202682,39.099804],[117.235619,39.09547],[117.229574,39.095869],[117.229576,39.095867],[117.229576,39.095867],[117.229576,39.095867],[117.229576,39.095867],[117.229576,39.095867],[117.229576,39.095867],[117.229576,39.095867],[117.229576,39.095867],[117.229443,39.093206],[117.229446,39.093204],[117.229446,39.093204],[117.229434,39.093225],[117.229431,39.093224],[117.229431,39.093224],[117.229431,39.093224],[117.229431,39.093224],[117.229489,39.093126],[117.229492,39.093128],[117.229492,39.093128],[117.229492,39.093128],[117.229492,39.093128],[117.229492,39.093128],[117.229492,39.093128],[117.229452,39.093162],[117.229454,39.093163],[117.229454,39.093163],[117.229454,39.093163],[117.229454,39.093163],[117.229458,39.093188],[117.22972,39.094245],[117.229007,39.093478],[117.229332,39.093941],[117.229362,39.09398],[117.229378,39.093227],[117.229378,39.093227],[117.230099,39.095848],[117.230095,39.095848],[117.230095,39.095848],[117.230095,39.095848],[117.230095,39.095848],[117.230095,39.095848],[117.22946,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229462,39.09322],[117.229455,39.093218],[117.229454,39.09322],[117.229454,39.09322],[117.229342,39.093251],[117.22934,39.09325],[117.229507,39.093174],[117.229515,39.093214],[117.22855,39.094058],[117.227972,39.094218],[117.228904,39.093555],[117.229166,39.093561],[117.229164,39.093563],[117.259193,39.108242],[117.259001,39.108073],[117.258998,39.108068],[117.247683,39.108362],[117.24512,39.106537],[117.243272,39.104743],[117.240879,39.102506],[117.238386,39.100541],[117.235209,39.098914],[117.231964,39.096821],[117.233049,39.094131],[117.230636,39.09304],[117.229377,39.093104],[117.229378,39.093105],[117.229424,39.093212],[117.229424,39.093212],[117.229706,39.093182],[117.227242,39.093426],[117.229648,39.09416],[117.229645,39.094162],[117.229645,39.094162],[117.229576,39.093201],[117.229576,39.093201],[117.229576,39.093201],[117.229576,39.093201],[117.230091,39.095531],[117.230087,39.095531],[117.235672,39.094196],[117.229408,39.093212],[117.229408,39.093212],[117.229453,39.093184],[117.229492,39.093182],[117.229492,39.093182],[117.229516,39.093331],[117.229284,39.093542],[117.229262,39.093709],[117.229469,39.093197],[117.229469,39.093197],[117.229308,39.093749],[117.22945,39.093176],[117.229683,39.09304],[117.229694,39.093024],[117.229647,39.093021],[117.229417,39.093071],[117.22944,39.093173],[117.229439,39.093174],[117.229439,39.093174],[117.229439,39.093174],[117.229439,39.093174],[117.229495,39.09312],[117.22924,39.093749],[117.229629,39.094102],[117.227083,39.093727],[117.226059,39.09372],[117.22045,39.092533],[117.21846,39.092152],[117.217695,39.093182],[117.217626,39.094096],[117.217666,39.095283],[117.217662,39.095351],[117.217474,39.09382],[117.216256,39.093482],[117.215689,39.093259],[117.215691,39.093258],[117.215783,39.09322],[117.215782,39.09322],[117.229103,39.093415],[117.229602,39.093056],[117.229395,39.093209],[117.229403,39.093218],[117.22955,39.092895],[117.229853,39.092224],[117.229935,39.093098],[117.229935,39.093098],[117.229515,39.093182],[117.229515,39.093182],[117.229515,39.093182],[117.229488,39.093184],[117.229485,39.093185],[117.22945,39.093179],[117.229563,39.093132],[117.229553,39.093173],[117.229487,39.093201],[117.229535,39.09363],[117.229429,39.093466],[117.229388,39.09314],[117.229417,39.092694],[117.228554,39.093753],[117.228653,39.09366],[117.228653,39.093658],[117.228653,39.093658],[117.228866,39.093764],[117.228867,39.093765],[117.228867,39.093765],[117.229523,39.093231],[117.235825,39.094181],[117.229507,39.093227],[117.229507,39.093227],[117.229507,39.093227],[117.229702,39.092782],[117.229698,39.092781],[117.229698,39.092781],[117.229698,39.092781],[117.229702,39.095189],[117.228783,39.093327],[117.228783,39.093327],[117.228783,39.093327],[117.228783,39.093327],[117.228449,39.093409],[117.230122,39.095673],[117.230125,39.095673],[117.230125,39.095673],[117.229378,39.093655],[117.229378,39.093655],[117.229439,39.093216],[117.229439,39.093216],[117.229063,39.093828],[117.229482,39.093226],[117.229426,39.093408],[117.229515,39.093246],[117.229422,39.093255],[117.229385,39.092887],[117.229261,39.093433],[117.226413,39.093215],[117.226397,39.09243],[117.225606,39.092226],[117.224696,39.091861],[117.223857,39.091824],[117.223854,39.091824],[117.223854,39.091824],[117.227924,39.095602],[117.227921,39.0956],[117.227921,39.0956],[117.229897,39.093109],[117.229718,39.09315],[117.229721,39.093151],[117.229414,39.093231],[117.229475,39.093185],[117.229435,39.093216],[117.229679,39.09318],[117.229466,39.093219],[117.229575,39.093738],[117.229786,39.092443],[117.229507,39.094867],[117.229507,39.094868],[117.229538,39.093117],[117.229607,39.093117],[117.229607,39.093117],[117.20266,39.099773],[117.202809,39.098889],[117.208939,39.100872],[117.202589,39.09965],[117.202589,39.09965],[117.202589,39.09965],[117.202589,39.09965],[117.202589,39.09965],[117.202589,39.09965],[117.202539,39.099687],[117.202705,39.09954],[117.202549,39.099758],[117.20248,39.0995],[117.202478,39.099487],[117.202614,39.099775],[117.202703,39.099906],[117.202573,39.099797],[117.202563,39.099778],[117.202563,39.099778],[117.202559,39.099796],[117.203078,39.097441],[117.203079,39.097439],[117.203079,39.097439],[117.20265,39.09976],[117.202651,39.099759],[117.202652,39.099758],[117.202652,39.099758],[117.229378,39.093227],[117.229378,39.093227],[117.229411,39.093179],[117.229436,39.093231],[117.229439,39.093231],[117.229439,39.093231]];
		 var cur_loaction = [117.229439,39.093231];
		 var diverPolyline = new AMap.Polyline({
	         path:locations,          //设置线覆盖物路径
	         strokeColor: "#f00", //线颜色
	         strokeOpacity: 0.8,       //线透明度
	         strokeWeight: 0.8,        //线宽
	         strokeStyle: "solid"   //线样式
	     });
		 diverPolyline.setMap(map);
		 
		 var marker = new AMap.Marker({
			 map:map,
			 icon:"../aboutMap/dist/img/gaxlogo.png",
			 position:cur_loaction,
			 offset: new AMap.Pixel(-10, -20)
		 });
	
  }
  
  //查询当月的数据
  function queryCurMonthPerformanceOfArea(dataType){

	  showDeptChartData(null,dataType)//事业部
	  showChannelChartData(null,dataType);//频道
	  showTrendChartData(null,null,dataType)
	  $("#process_div").hide();
      $("#process_div_pic").hide();
  }
  
  //展示图例
//   function showMapLegend(p1,p2,p3){
// 	 var colorArray =  getHeatMapColorLegend(p1,p2);
// 	 if("gmv"==p3){
// 		 $(".legend").html("小区营业额（元）");
// 	 }else if("consumer"==p3){
// 		 $(".legend").html("小区消费用户（人）");
// 	 }
// 	 getDynamicLegend(colorArray);
	 
	  
//   }
  
    function showMapLegend(p1,p2){
	 var colorArray =  getHeatColorLegend(p1);
	 if("gmv"==p2){
		 $(".legend").html("小区营业额（元）");
	 }else if("consumer"==p2){
		 $(".legend").html("小区消费用户（人）");
	 }
	 getDynamicLegend(colorArray);
	 
	  
  }
  
  //展示小区数据热度
  var dataModel;
  function showTinyVillageHeat(dataType){
	      dataModel = dataType;
		  var minV;
		  var maxV;
		  
		  if("gmv"==dataType){
// 			 minV = data[data.length-1].gmv;
// 			 maxV = data[0].gmv;
// 			 showMapLegend(minV,maxV,dataType);
			  
			  var sum=0;
			  for(var i=0;i<tiny_gmv.length;i++){
			  	sum+=tiny_gmv[i].gmv;
			  }
			  var avgV=sum/tiny_gmv.length;
			  showMapLegend(avgV,dataType);
			 
			  for(var j=0;j<tiny_gmv.length;j++){
				  var code_j = tiny_gmv[j].code;
				  var gmv = tiny_gmv[j].gmv;
				  
				  var color = getHeatMapColorLocation(avgV,tiny_gmv[j].gmv);
				  var tinyVillage = polygonMap[code_j];
				 
				  if(tinyVillage!=null){
					  tinyVillage.setOptions({
						  fillColor:color,
						  fillOpacity:0.7,
						  strokeColor: "#ab50d0", //线颜色
		  		          strokeOpacity: 1, //线透明度
		  		          strokeWeight: 0    //线宽
						});
				  }
			 }
		  }else if("consumer"==dataType){
// 			  minV = data[data.length-1].consumer;
// 			  maxV = data[0].consumer;
// 			  showMapLegend(minV,maxV,dataType);
			  
			  var sum=0;
			  for(var i=0;i<tiny_consumer.length;i++){
			  	sum+=tiny_consumer[i].consumer;
			  }
			  var avgV=sum/tiny_consumer.length;
			  showMapLegend(avgV,dataType);
			 
			  for(var j=0;j<tiny_consumer.length;j++){
				  var code_j = tiny_consumer[j].code;
				  var color = getHeatMapColorLocation(avgV,tiny_consumer[j].consumer);
				  var tinyVillage = polygonMap[code_j];
				  if(tinyVillage!=null){
					  tinyVillage.setOptions({
						  fillColor:color,
						  fillOpacity:0.7,
						  strokeColor: "#ab50d0", //线颜色
		  		          strokeOpacity: 1, //线透明度
		  		          strokeWeight: 0    //线宽
						});
				  }
			  }
		  }

	  
  }
  
	//展示走势图chart
	function showTrendChartData(data1,data2,dataType){
		var c_name1 = new Array();
		var c_value1 = new Array();
		
		
		var c_value2 = new Array();
		
		if("gmv"==dataType){
	        var kv = getRecentlySevenDay_gmv();
			option1.xAxis.data = kv["xAxis"];
			option1.series[0].data = kv["series"];
			option1.title.text = "营业额（近七日）";
		    myChart1.setOption(option1);
		}else if("consumer"==dataType){
			var kv = getRecentlySevenDay_customer();
		    chart4_option.xAxis.data = kv["xAxis"];
		    chart4_option.series[0].data = kv["series0"];
		    chart4_option.series[1].data = kv["series1"];
			chart4.setOption(chart4_option);
		}
	}	
	//展示事业群chart
	function showDeptChartData(deptData,dataType){
		
		var myDate = new Date();
  	  	var c_month = myDate.getMonth()+1;//当前月
		if("gmv"==dataType){
			
			option2.title.text = "事业群营业额（"+c_month+"月）";
			option2.series[0].data = getDepartment_gmv();
			myChart2.setOption(option2);
		}else if("consumer"==dataType){
			
			chart5_option.title.text = "事业群消费用户（"+c_month+"月）";
			chart5_option.series[0].data = getDepartment_consumer();
			chart5.setOption(chart5_option);
		}
		 
	}
	
	//展示频道chart
	function showChannelChartData(channelData,dataType){
		
		var myDate = new Date();
  	  	var c_month = myDate.getMonth()+1;//当前月
		if("gmv"==dataType){
			
			option3.title.text = "频道营业额（"+c_month+"月）";
			option3.series[0].data = getChannel_gmv();	
			myChart3.setOption(option3);
		}else if("consumer"==dataType){//用户
			
			chart6_option.title.text = "频道消费用户（"+c_month+"月）";
			chart6_option.series[0].data = getChannel_consumer();
			chart6.setOption(chart6_option);
		}
		
		
	}
		
	 //营业额
	  var option1 = {
	    title: {
	      text:"营业额（近七日）",x: '1%', y: '1%',textStyle:{color:"#444",fontSize:"16"},
	    },
	    tooltip : {
	      trigger: 'axis',
	    },
	    grid: {
	      top: '25%',
	      left: '5%',
	      right: '5%',
	      bottom: '3%',
	      containLabel: true
	    },
	    xAxis: {
	      type: 'category',
	      data: [],
	      boundaryGap: false,
	      splitLine: {
	        show: false
	      },
	      axisLine: {
	        show: true,
	        lineStyle:{color:'#ffc203'},
	      },
	      axisTick:{
	        show: false
	      },
	      axisLabel:{
	        show: true,
	        rotate:45,//倾斜度 -90 至 90 默认为0
	        textStyle: {color:'#444'}
	      },
	    },
	    yAxis: {
	      type: 'value',
	      splitLine: {
	        show: false
	      },
	      axisLine: {
	        show: true,
	        lineStyle:{color:'#ffc203'},
	      },
	      axisTick:{
	        show: false
	      },
	      axisLabel:{
	        show: true,
	        textStyle: {color:'#444'}
	      },
	    },
	    series: [
	      {
	        name:'营业额',
	        data: [],
	        type: 'line',
	        itemStyle: {
	          normal:{
	            color:'#ffc203',
	            label: {
	              show: true,
	              position: 'top',
	              formatter: '{c} ',
	            },
	          }
	        },
	        //areaStyle: {normal: {}}

	      },

	    ]
	  };

  //事业部
  var option2 = {
    title: {
      text:"事业部",x: '1%', y: '1%',textStyle:{color:"#444",fontSize:"16"},
    },
    tooltip: {
      trigger: 'item',
      formatter: "{b}<br/>{c} ({d}%)",
      position: ['50%', '50%']
    },
    series: [{
     
      type: 'pie',
      radius: '90%',
      center: ['50%', '55%'],
      clockwise: false,
      cursor: 'default',
      data: [],
      label: {
        normal: {
          show: false
        }
      },
      labelLine: {
        normal: {
          show: false
        }
      },
      itemStyle: {
        normal: {
          borderWidth: 4,
          borderColor: '#ffffff',
        },
        emphasis: {
          borderWidth: 0,
          shadowBlur: 10,
          shadowOffsetX: 0,
          shadowColor: 'rgba(0, 0, 0, 0.5)'
        }
      }
    }],
    color: [
      '#00acee',
      '#52cdd5',
      '#79d9f1',
      '#a7e7ff',
      '#c8efff'
    ],
  };

  //频道
  var option3 = {
    title: {
      text:"频道",x: '1%', y: '1%',textStyle:{color:"#444",fontSize:"16"},
    },
    tooltip: {
      trigger: 'item',
      formatter: "{a} <br/>{b}: {c} ({d}%)"
    },
    series: [
      {
        name:'频道',
        type:'pie',
        cursor: 'default',
        center: ['50%', '55%'],
        radius: ['60%', '90%'],
        color: ['#e062ae', '#37a2da', '#67e0e3', '#ffdb5c', '#ff9f7f'],
        avoidLabelOverlap: false,
        label: {
          normal: {
            show: false,
            position: 'center'
          },
          emphasis: {
            show: true,
            textStyle: {
              fontSize: '20',
              fontWeight: 'bold'
            }
          }
        },
        labelLine: {
          normal: {
            show: false
          }
        },
        data:[
        
        ],
        itemStyle: {
          emphasis: {
            shadowBlur: 10,
            shadowOffsetX: 0,
            shadowColor: 'rgba(0, 0, 0, 0.5)'
          }
        }


      }
    ]
  };

 

</script>
<script>
  var chart4;
  var chart4_option;
  var chart5;
  var chart5_option;
  var chart6;
  var chart6_option;
  function chartresize(){
	showTinyVillageHeat("consumer");//小区热力图
    //console.log("chartresize");
    var temp = new initchart();
    temp.resize();
    
  }
  var initchart = function(){
	
    chart4 = echarts.init(document.getElementById('main4'));
    chart5 = echarts.init(document.getElementById('main5'));
    chart6 = echarts.init(document.getElementById('main6'));
    chart4_option={
      title: {
        text:"用户量（近七日）",x: '1%', y: '1%',textStyle:{color:"#444",fontSize:"16"},
      },
      tooltip : {
        trigger: 'axis',
      },
      legend: {
        data:['拉新客户量','消费客户量'],
        textStyle:{color:"#444",fontSize:"12"},
        right:0,
        orient:'vertical',
      },
      grid: {
        top: '25%',
        left: '5%',
        right: '5%',
        bottom: '3%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: [],
        boundaryGap: false,
        splitLine: {
          show: false
        },
        axisLine: {
          show: true,
          lineStyle:{color:'#ffc203'},
        },
        axisTick:{
          show: false
        },
        axisLabel:{
          show: true,
          rotate:45,//倾斜度 -90 至 90 默认为0
          textStyle: {color:'#444'}
        },
      },
      yAxis: {
        type: 'value',
        splitLine: {
          show: false
        },
        axisLine: {
          show: true,
          lineStyle:{color:'#ffc203'},
        },
        axisTick:{
          show: false
        },
        axisLabel:{
          show: true,
         
          textStyle: {color:'#444'}
        },
      },
      series: [
        {
          name:"拉新客户量",
          data: [],
          type: 'line',
          lineStyle: {
            color:'#ffc203'
          },
          itemStyle: {
            normal:{
              color:'#ffc203',
              label: {
                show: true,
                position: 'top',
                formatter: '{c} ',
              },
            }

          }

        },
        {
          name:"消费客户量",
          data: [],
          type: 'line',
          
          label: {
            show: true,
            position: 'top',
            formatter: '{c} ',
            textStyle:{
              color:"#ff3064"
            }
          },
          itemStyle: {
            normal: {
              color: "#ff3064",
              label: {
                show: true,
                textStyle: {
                  color: "#444"
                },
                position: "insideTop",

              }
            }
          }
        }

      ]
    }
   
  
	showTrendChartData(null,null,"consumer");//趋势图
	
    chart5_option={
      title: {
        text:"事业部",x: '1%', y: '1%',textStyle:{color:"#444",fontSize:"16"},
      },
      tooltip: {
        trigger: 'item',
        formatter: "{b}<br/>{c} ({d}%)",
        position: ['50%', '50%']
      },
      series: [{
       
        type: 'pie',
        radius: '90%',
        cursor: 'default',
        center: ['50%', '55%'],
        clockwise: false,
        data: [],
        label: {
          normal: {
            show: false
          }
        },
        labelLine: {
          normal: {
            show: false
          }
        },
        itemStyle: {
          normal: {
            borderWidth: 4,
            borderColor: '#ffffff',
          },
          emphasis: {
            borderWidth: 0,
            shadowBlur: 10,
            shadowOffsetX: 0,
            shadowColor: 'rgba(0, 0, 0, 0.5)'
          }
        }
      }],
      color: [
        '#00acee',
        '#52cdd5',
        '#79d9f1',
        '#a7e7ff',
        '#c8efff'
      ],
    }

    chart6_option={
      title: {
        text:"频道",x: '1%', y: '0%',textStyle:{color:"#444",fontSize:"16"},
      },
      tooltip: {
        trigger: 'item',
        formatter: "{a} <br/>{b}: {c} ({d}%)"
      },
      series: [
        {
          name:'频道',
          type:'pie',
          cursor: 'default',
          radius: ['60%', '90%'],
          center: ['50%', '55%'],
          color: ['#e062ae', '#37a2da', '#67e0e3', '#ffdb5c', '#ff9f7f'],
          avoidLabelOverlap: false,
          label: {
            normal: {
              show: false,
              position: 'center'
            },
            emphasis: {
              show: true,
              textStyle: {
                fontSize: '20',
                fontWeight: 'bold'
              }
            }
          },
          labelLine: {
            normal: {
              show: false
            }
          },
          data:[
            
          ],
          itemStyle: {
            emphasis: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          }


        }
      ]
    }

    showDeptChartData(null,"consumer")//事业部
	showChannelChartData(null,"consumer");//频道 
    
   
	
	
    $(function(){
      window.onresize = function(){
        chart4.resize();
        chart5.resize();
        chart6.resize();
      }
    })
    this.resize = function size(){
      var chart4div=document.getElementById('main4');
      var chart5div=document.getElementById('main5');
      var chart6div=document.getElementById('main6');
      var tabcontent = document.getElementById('tab-content');
      width=tabcontent.offsetWidth;
      //height=tabcontent.offsetHeight;
      chart4div.style.width=width+'px';
      chart5div.style.width=width/2+'px';
      chart6div.style.width=width/2+'px';
      //chart4div.style.height=height+'px';
      chart4.resize(width);
      chart5.resize(width/2);
      chart6.resize(width/2);
    }
  }
</script>
<script type="text/javascript">
  autodivheight();
  function autodivheight(){ //函数：获取尺寸
    //获取浏览器窗口高度
    var winHeight=0;
    if (window.innerHeight)
      winHeight = window.innerHeight;
    else if ((document.body) && (document.body.clientHeight))
      winHeight = document.body.clientHeight;
    //通过深入Document内部对body进行检测，获取浏览器窗口高度
    if (document.documentElement && document.documentElement.clientHeight)
      winHeight = document.documentElement.clientHeight;
    //DIV高度为浏览器窗口的高度
    document.getElementById("nav_l").style.height= winHeight - 60  +"px";
  }
  window.onresize=autodivheight; //浏览器窗口发生变化时同时变化DIV高度
</script>

</body>
</html>