<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>选择城市</title>
    <script type="text/javascript" src="../scripts/bidLib.js"></script>
    <link href="../startbootstrap/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../startbootstrap/bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">
    <link href="../startbootstrap/dist/css/sb-admin-2.css" rel="stylesheet">
    <link href="../startbootstrap/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet"
          type="text/css">
    <script>
     	var employeeId = getUrlParamByKey("employee_no");
        var selectCity = getUrlParamByKey("selectCity");
        
    	var arr =new Array();
        $(function () {
        	
        	$("#employee_no").val(employeeId);
        	
            //页面加载成功后需要获取数据
            searchList();
        });
        
        var COLUMNS = {
                "id": function(aData, iColumn, sColumnName, map){
                     var citycode = map["citycode"];
                    
	           		 if(selectCity==""||selectCity=="null"){//全部
	           			 return '<input type="checkbox" name="chkbox" value="'+map[sColumnName]+'" checked="true"/>';
	           		 }else if(selectCity.indexOf(",")>=0){
	           			 var cityArray = selectCity.split(",");
	           			 for(var i=0;i<cityArray.length;i++){
	           				 if(citycode==cityArray[i]){
	           					return '<input type="checkbox" name="chkbox" value="'+map[sColumnName]+'" checked="true"/>';
	           				 }else{
	           					return '<input type="checkbox" name="chkbox" value="'+map[sColumnName]+'"/>';
	           				 }
	           			 }
	           		 }
                 
                }
            }
        
        
        //记载页面时请求数据列表默认的方法
        function searchList() {
        		 $$.executeSearch('queryNoticeReceiveCity', 'conditionsDiv');
        }

        function doSubmit(){
            var jsons=new Array();
            var objs = $$.getSelectedObj("queryNoticeReceiveCity");
            if (objs.length != 0) {
            	for(var i=0;i<objs.length;i++){
            		json = {id:objs[i][0],name:objs[i][1],code:objs[i][2]};
            		jsons.push(json);
            	}
            } 
           
            parent.win.callBack(jsons);
            parent.win.hide();
        }
      
         
    </script>
    <style type="text/css">
        html,body{
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="bodyDiv">
        <div id="userGroupInfo" class="panel panel-primary">
            <div class="panel-heading">
                <a href="#" onclick="toggleBizBiz('conditionsDiv','pic');"><img src="../scripts/images/22.png" align="absmiddle" id="pic"/></a>&nbsp;搜索条件
            </div>
            <div id="conditionsDiv" class="panel-body">
                    <table class="bigteble">
                        <tr>
                            <td align="left" width="4%" class="basetext">
                               城市名称:				
                            </td>
                            <td class="baseform" align="left" width="25%">
                                <input type="text" name="cityname" id="cityname" class="form-control" style="width: 20%" onkeyup="value=this.value.replace(/\s+/g,'')"/>
                            </td>
                            <input id="employee_no" name="employee_no" value="" type="hidden" />
                            <!-- <td align="left" width="10%" class="basetext">
                                用户电话:				
                            </td>
                            <td class="baseform" align="left" width="40%">
                                <input type="text" name="mobilephone" id="mobilephone" maxlength="11"  onkeyup="value=this.value.replace(/\D+/g,'')" class="form-control" style="width: 70%"/>
                            </td> -->
                        </tr>
                    </table>
                </div>
                <div class="panel-footer"  align="right">
                    <input class="btn btn-primary" onClick="searchList()" value="查询" type="button"/>
                </div>
            </div>
            <div id="gridContainer" searchDiv="conditionsDiv" queryid="queryNoticeReceiveCity" class="panel panel-primary"
                 operators="$pmspage.opArr" titleAlign="center" fnRender="renderColumns" searchDiv="conditionsDiv" showno="false"
                 showprint="false" showsearch="false" showtitle="true" showpaging="true" showcheckbox="false"
                 checkmode="multiple" autoload="false" showno="false">
            </div>
        </div>
    </body>
    
   
</html>